{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { listen as listenFocusOutside, containsTargetOrRenderContainer } from \"../../../lib/listenFocusOutside\";\nexport var FocusTrap = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(FocusTrap, _React$PureComponent);\n\n  function FocusTrap() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.focusOutsideListenerToken = null;\n\n    _this.onClickOutside = function (e) {\n      if (_this.props.onBlur) {\n        _this.props.onBlur(e);\n      }\n\n      _this.detachListeners();\n    };\n\n    _this.attachListeners = function () {\n      if (!_this.focusOutsideListenerToken) {\n        _this.focusOutsideListenerToken = listenFocusOutside([findDOMNode(_assertThisInitialized(_this))], _this.onClickOutside);\n        document.addEventListener('ontouchstart' in document.documentElement ? 'touchstart' : 'mousedown', _this.handleNativeDocClick);\n      }\n    };\n\n    _this.handleNativeDocClick = function (event) {\n      var target = event.target || event.srcElement;\n      var node = findDOMNode(_assertThisInitialized(_this));\n\n      if (target instanceof Element && containsTargetOrRenderContainer(target)(node)) {\n        return;\n      }\n\n      _this.onClickOutside(event);\n    };\n\n    return _this;\n  }\n\n  var _proto = FocusTrap.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.focusOutsideListenerToken) {\n      this.detachListeners();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        onBlur = _this$props.onBlur;\n    return React.cloneElement(React.Children.only(children), {\n      onFocus: function onFocus() {\n        if (onBlur) {\n          _this2.attachListeners();\n        }\n\n        if (children.props && children.props.onFocus) {\n          var _children$props;\n\n          (_children$props = children.props).onFocus.apply(_children$props, arguments);\n        }\n      }\n    });\n  };\n\n  _proto.detachListeners = function detachListeners() {\n    if (this.focusOutsideListenerToken) {\n      this.focusOutsideListenerToken.remove();\n      this.focusOutsideListenerToken = null;\n      document.removeEventListener('ontouchstart' in document.documentElement ? 'touchstart' : 'mousedown', this.handleNativeDocClick);\n    }\n  };\n\n  return FocusTrap;\n}(React.PureComponent);\nFocusTrap.__KONTUR_REACT_UI__ = 'FocusTrap';","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/internal/FocusTrap/FocusTrap/FocusTrap.js"],"names":["_assertThisInitialized","_inheritsLoose","React","findDOMNode","listen","listenFocusOutside","containsTargetOrRenderContainer","FocusTrap","_React$PureComponent","_this","_len","arguments","length","args","Array","_key","call","apply","concat","focusOutsideListenerToken","onClickOutside","e","props","onBlur","detachListeners","attachListeners","document","addEventListener","documentElement","handleNativeDocClick","event","target","srcElement","node","Element","_proto","prototype","componentWillUnmount","render","_this2","_this$props","children","cloneElement","Children","only","onFocus","_children$props","remove","removeEventListener","PureComponent","__KONTUR_REACT_UI__"],"mappings":"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","sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { listen as listenFocusOutside, containsTargetOrRenderContainer } from \"../../../lib/listenFocusOutside\";\nexport var FocusTrap =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inheritsLoose(FocusTrap, _React$PureComponent);\n\n  function FocusTrap() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.focusOutsideListenerToken = null;\n\n    _this.onClickOutside = function (e) {\n      if (_this.props.onBlur) {\n        _this.props.onBlur(e);\n      }\n\n      _this.detachListeners();\n    };\n\n    _this.attachListeners = function () {\n      if (!_this.focusOutsideListenerToken) {\n        _this.focusOutsideListenerToken = listenFocusOutside([findDOMNode(_assertThisInitialized(_this))], _this.onClickOutside);\n        document.addEventListener('ontouchstart' in document.documentElement ? 'touchstart' : 'mousedown', _this.handleNativeDocClick);\n      }\n    };\n\n    _this.handleNativeDocClick = function (event) {\n      var target = event.target || event.srcElement;\n      var node = findDOMNode(_assertThisInitialized(_this));\n\n      if (target instanceof Element && containsTargetOrRenderContainer(target)(node)) {\n        return;\n      }\n\n      _this.onClickOutside(event);\n    };\n\n    return _this;\n  }\n\n  var _proto = FocusTrap.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.focusOutsideListenerToken) {\n      this.detachListeners();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        onBlur = _this$props.onBlur;\n    return React.cloneElement(React.Children.only(children), {\n      onFocus: function onFocus() {\n        if (onBlur) {\n          _this2.attachListeners();\n        }\n\n        if (children.props && children.props.onFocus) {\n          var _children$props;\n\n          (_children$props = children.props).onFocus.apply(_children$props, arguments);\n        }\n      }\n    });\n  };\n\n  _proto.detachListeners = function detachListeners() {\n    if (this.focusOutsideListenerToken) {\n      this.focusOutsideListenerToken.remove();\n      this.focusOutsideListenerToken = null;\n      document.removeEventListener('ontouchstart' in document.documentElement ? 'touchstart' : 'mousedown', this.handleNativeDocClick);\n    }\n  };\n\n  return FocusTrap;\n}(React.PureComponent);\nFocusTrap.__KONTUR_REACT_UI__ = 'FocusTrap';"]},"metadata":{},"sourceType":"module"}