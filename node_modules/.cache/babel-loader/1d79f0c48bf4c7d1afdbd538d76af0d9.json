{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport { isKeyArrowDown, isKeyArrowUp, isKeyEnter } from \"../../../lib/events/keyboard/identifiers\";\nimport { ScrollContainer } from \"../../../components/ScrollContainer\";\nimport { isMenuItem } from \"../../../components/MenuItem\";\nimport { isMenuHeader } from \"../../../components/MenuHeader\";\nimport { createPropsGetter } from \"../../../lib/createPropsGetter\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../InternalMenu.styles\";\nimport { isActiveElement } from \"../isActiveElement\";\nexport var InternalMenu = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(InternalMenu, _React$Component);\n\n  function InternalMenu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      highlightedIndex: -1,\n      maxHeight: _this.props.maxHeight || 'none',\n      scrollState: 'top'\n    };\n    _this.theme = void 0;\n    _this.scrollContainer = void 0;\n    _this.highlighted = void 0;\n    _this.rootElement = void 0;\n    _this.header = void 0;\n    _this.footer = void 0;\n    _this.getProps = createPropsGetter(InternalMenu.defaultProps);\n\n    _this.renderHeader = function () {\n      var _cn;\n\n      return React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this.header = el;\n        },\n        className: cn((_cn = {}, _cn[jsStyles.header()] = true, _cn[jsStyles.fixedHeader()] = _this.state.scrollState !== 'top', _cn))\n      }, _this.props.header);\n    };\n\n    _this.renderFooter = function () {\n      var _cn2;\n\n      return React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this.footer = el;\n        },\n        className: cn((_cn2 = {}, _cn2[jsStyles.footer()] = true, _cn2[jsStyles.fixedFooter()] = _this.state.scrollState !== 'bottom', _cn2))\n      }, _this.props.footer);\n    };\n\n    _this.focusOnRootElement = function () {\n      if (_this.rootElement) {\n        _this.rootElement.focus();\n      }\n    };\n\n    _this.shouldRecalculateMaxHeight = function (prevProps) {\n      var _this$props = _this.props,\n          maxHeight = _this$props.maxHeight,\n          header = _this$props.header,\n          footer = _this$props.footer,\n          children = _this$props.children;\n      var prevMaxHeight = prevProps.maxHeight;\n      var prevHeader = prevProps.header;\n      var prevFooter = prevProps.footer;\n      var prevChildrenCount = React.Children.count(prevProps.children);\n      return maxHeight !== prevMaxHeight || footer !== prevFooter || header !== prevHeader || React.Children.count(children) !== prevChildrenCount;\n    };\n\n    _this.calculateMaxHeight = function () {\n      var maxHeight = _this.props.maxHeight;\n      var parsedMaxHeight = maxHeight;\n\n      if (typeof maxHeight === 'string' && typeof window !== 'undefined' && _this.rootElement) {\n        var rootElementMaxHeight = window.getComputedStyle(_this.rootElement).maxHeight;\n\n        if (rootElementMaxHeight) {\n          parsedMaxHeight = parseFloat(rootElementMaxHeight);\n        }\n      }\n\n      var calculatedMaxHeight = typeof parsedMaxHeight === 'number' ? parsedMaxHeight + (_this.header && _this.header.getBoundingClientRect().height || 0) + (_this.footer && _this.footer.getBoundingClientRect().height || 0) : maxHeight;\n\n      _this.setState({\n        maxHeight: calculatedMaxHeight || 'none'\n      });\n    };\n\n    _this.setInitialSelection = function () {\n      for (var i = _this.getProps().initialSelectedItemIndex; i > -1; i--) {\n        _this.moveDown();\n      }\n    };\n\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(ReactDOM.findDOMNode(_this.highlighted));\n      }\n    };\n\n    _this.highlightItem = function (index) {\n      _this.setState({\n        highlightedIndex: index\n      });\n\n      if (_this.rootElement) {\n        _this.rootElement.focus();\n      }\n    };\n\n    _this.unhighlight = function () {\n      _this.setState({\n        highlightedIndex: -1\n      });\n    };\n\n    _this.moveUp = function () {\n      _this.move(-1);\n    };\n\n    _this.moveDown = function () {\n      _this.move(1);\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (typeof _this.props.onKeyDown === 'function') {\n        _this.props.onKeyDown(e);\n      }\n\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (isKeyArrowUp(e)) {\n        e.preventDefault();\n\n        _this.moveUp();\n      } else if (isKeyArrowDown(e)) {\n        e.preventDefault();\n\n        _this.moveDown();\n      } else if (isKeyEnter(e)) {\n        if (_this.highlighted && _this.highlighted.props.onClick) {\n          _this.highlighted.props.onClick(e);\n        }\n      }\n    };\n\n    _this.handleScrollStateChange = function (scrollState) {\n      if (_this.state.scrollState !== scrollState) {\n        _this.setState({\n          scrollState: scrollState\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = InternalMenu.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.setInitialSelection();\n    this.calculateMaxHeight();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.shouldRecalculateMaxHeight(prevProps)) {\n      this.calculateMaxHeight();\n    }\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.maxHeight !== this.props.maxHeight) {\n      this.setState({\n        maxHeight: nextProps.maxHeight || 'none'\n      });\n    }\n  };\n\n  _proto.focus = function focus() {\n    this.focusOnRootElement();\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn3,\n        _this3 = this;\n\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {\n      return React.isValidElement(x) && x.props.icon;\n    });\n\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: cn((_cn3 = {}, _cn3[jsStyles.root(this.theme)] = true, _cn3[jsStyles.shadow()] = this.props.hasShadow, _cn3)),\n      style: {\n        width: this.props.width,\n        maxHeight: this.state.maxHeight\n      },\n      onKeyDown: this.handleKeyDown,\n      ref: function ref(element) {\n        _this3.rootElement = element;\n      },\n      tabIndex: 0\n    }, this.props.header ? this.renderHeader() : null, React.createElement(ScrollContainer, {\n      ref: this.refScrollContainer,\n      maxHeight: this.props.maxHeight,\n      preventWindowScroll: this.props.preventWindowScroll,\n      onScrollStateChange: this.handleScrollStateChange\n    }, React.Children.map(this.props.children, function (child, index) {\n      if (typeof child === 'string' || typeof child === 'number' || child == null) {\n        return child;\n      }\n\n      if (React.isValidElement(child) && typeof child.type === 'string') {\n        return child;\n      }\n\n      if (enableIconPadding && (isMenuItem(child) || isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true\n        });\n      }\n\n      if (isActiveElement(child)) {\n        var highlight = _this3.state.highlightedIndex === index;\n        var ref = child.ref;\n        var originalRef = ref;\n\n        if (highlight) {\n          ref = function ref(menuItem) {\n            return _this3.refHighlighted(originalRef, menuItem);\n          };\n        }\n\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this3.select.bind(_this3, index, false),\n          onMouseEnter: function onMouseEnter(event) {\n            _this3.highlightItem(index);\n\n            if (isMenuItem(child) && child.props.onMouseEnter) {\n              child.props.onMouseEnter(event);\n            }\n          },\n          onMouseLeave: function onMouseLeave(event) {\n            _this3.unhighlight();\n\n            if (isMenuItem(child) && child.props.onMouseLeave) {\n              child.props.onMouseLeave(event);\n            }\n          }\n        });\n      }\n\n      return child;\n    })), this.props.footer ? this.renderFooter() : null);\n  };\n\n  _proto.refHighlighted = function refHighlighted(originalRef, menuItem) {\n    this.highlighted = menuItem;\n\n    if (!originalRef || typeof originalRef === 'string') {\n      return;\n    }\n\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    } else if (typeof originalRef === 'object') {\n      // @ts-ignore see issue https://github.com/DefinitelyTyped/DefinitelyTyped/issues/31065\n      originalRef.current = menuItem;\n    }\n  };\n\n  _proto.select = function select(index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n\n    if (isActiveElement(item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else {\n          location.href = item.props.href;\n        }\n      }\n\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n\n      if (this.props.onItemClick) {\n        this.props.onItemClick(event);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.move = function move(step) {\n    this.setState(function (state, props) {\n      var children = childrenToArray(props.children);\n\n      if (!children.some(isActiveElement)) {\n        return null;\n      }\n\n      var index = state.highlightedIndex;\n\n      do {\n        index += step;\n\n        if (!props.cyclicSelection && (index < 0 || index > children.length)) {\n          return null;\n        }\n\n        if (index < 0) {\n          index = children.length - 1;\n        } else if (index > children.length) {\n          index = 0;\n        }\n\n        var child = children[index];\n\n        if (isActiveElement(child)) {\n          return {\n            highlightedIndex: index\n          };\n        }\n      } while (index !== state.highlightedIndex);\n\n      return null;\n    }, this.scrollToSelected);\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n\n  return InternalMenu;\n}(React.Component);\nInternalMenu.__KONTUR_REACT_UI__ = 'InternalMenu';\nInternalMenu.defaultProps = {\n  width: 'auto',\n  maxHeight: 300,\n  hasShadow: true,\n  preventWindowScroll: true,\n  cyclicSelection: true,\n  initialSelectedItemIndex: -1\n};\n\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\n\nfunction childrenToArray(children) {\n  var ret = []; // Use forEach instead of map to avoid cloning for key unifying.\n\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/internal/InternalMenu/InternalMenu/InternalMenu.js"],"names":["_inheritsLoose","React","ReactDOM","cn","isKeyArrowDown","isKeyArrowUp","isKeyEnter","ScrollContainer","isMenuItem","isMenuHeader","createPropsGetter","ThemeContext","jsStyles","isActiveElement","InternalMenu","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","highlightedIndex","maxHeight","props","scrollState","theme","scrollContainer","highlighted","rootElement","header","footer","getProps","defaultProps","renderHeader","_cn","createElement","ref","el","className","fixedHeader","renderFooter","_cn2","fixedFooter","focusOnRootElement","focus","shouldRecalculateMaxHeight","prevProps","_this$props","children","prevMaxHeight","prevHeader","prevFooter","prevChildrenCount","Children","count","calculateMaxHeight","parsedMaxHeight","window","rootElementMaxHeight","getComputedStyle","parseFloat","calculatedMaxHeight","getBoundingClientRect","height","setState","setInitialSelection","i","initialSelectedItemIndex","moveDown","refScrollContainer","scrollToSelected","scrollTo","findDOMNode","highlightItem","index","unhighlight","moveUp","move","handleKeyDown","e","onKeyDown","defaultPrevented","preventDefault","onClick","handleScrollStateChange","_proto","prototype","componentDidMount","componentDidUpdate","prevState","UNSAFE_componentWillReceiveProps","nextProps","render","_this2","Consumer","renderMain","_cn3","_this3","enableIconPadding","toArray","some","x","isValidElement","icon","isEmpty","root","shadow","hasShadow","style","width","element","tabIndex","preventWindowScroll","onScrollStateChange","map","child","type","cloneElement","_enableIconPadding","highlight","originalRef","menuItem","refHighlighted","select","bind","onMouseEnter","event","onMouseLeave","current","shouldHandleHref","item","childrenToArray","href","target","open","location","onItemClick","step","cyclicSelection","filter","isExist","Component","__KONTUR_REACT_UI__","value","undefined","ret","forEach","push"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport { isKeyArrowDown, isKeyArrowUp, isKeyEnter } from \"../../../lib/events/keyboard/identifiers\";\nimport { ScrollContainer } from \"../../../components/ScrollContainer\";\nimport { isMenuItem } from \"../../../components/MenuItem\";\nimport { isMenuHeader } from \"../../../components/MenuHeader\";\nimport { createPropsGetter } from \"../../../lib/createPropsGetter\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../InternalMenu.styles\";\nimport { isActiveElement } from \"../isActiveElement\";\nexport var InternalMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InternalMenu, _React$Component);\n\n  function InternalMenu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      highlightedIndex: -1,\n      maxHeight: _this.props.maxHeight || 'none',\n      scrollState: 'top'\n    };\n    _this.theme = void 0;\n    _this.scrollContainer = void 0;\n    _this.highlighted = void 0;\n    _this.rootElement = void 0;\n    _this.header = void 0;\n    _this.footer = void 0;\n    _this.getProps = createPropsGetter(InternalMenu.defaultProps);\n\n    _this.renderHeader = function () {\n      var _cn;\n\n      return React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this.header = el;\n        },\n        className: cn((_cn = {}, _cn[jsStyles.header()] = true, _cn[jsStyles.fixedHeader()] = _this.state.scrollState !== 'top', _cn))\n      }, _this.props.header);\n    };\n\n    _this.renderFooter = function () {\n      var _cn2;\n\n      return React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this.footer = el;\n        },\n        className: cn((_cn2 = {}, _cn2[jsStyles.footer()] = true, _cn2[jsStyles.fixedFooter()] = _this.state.scrollState !== 'bottom', _cn2))\n      }, _this.props.footer);\n    };\n\n    _this.focusOnRootElement = function () {\n      if (_this.rootElement) {\n        _this.rootElement.focus();\n      }\n    };\n\n    _this.shouldRecalculateMaxHeight = function (prevProps) {\n      var _this$props = _this.props,\n          maxHeight = _this$props.maxHeight,\n          header = _this$props.header,\n          footer = _this$props.footer,\n          children = _this$props.children;\n      var prevMaxHeight = prevProps.maxHeight;\n      var prevHeader = prevProps.header;\n      var prevFooter = prevProps.footer;\n      var prevChildrenCount = React.Children.count(prevProps.children);\n      return maxHeight !== prevMaxHeight || footer !== prevFooter || header !== prevHeader || React.Children.count(children) !== prevChildrenCount;\n    };\n\n    _this.calculateMaxHeight = function () {\n      var maxHeight = _this.props.maxHeight;\n      var parsedMaxHeight = maxHeight;\n\n      if (typeof maxHeight === 'string' && typeof window !== 'undefined' && _this.rootElement) {\n        var rootElementMaxHeight = window.getComputedStyle(_this.rootElement).maxHeight;\n\n        if (rootElementMaxHeight) {\n          parsedMaxHeight = parseFloat(rootElementMaxHeight);\n        }\n      }\n\n      var calculatedMaxHeight = typeof parsedMaxHeight === 'number' ? parsedMaxHeight + (_this.header && _this.header.getBoundingClientRect().height || 0) + (_this.footer && _this.footer.getBoundingClientRect().height || 0) : maxHeight;\n\n      _this.setState({\n        maxHeight: calculatedMaxHeight || 'none'\n      });\n    };\n\n    _this.setInitialSelection = function () {\n      for (var i = _this.getProps().initialSelectedItemIndex; i > -1; i--) {\n        _this.moveDown();\n      }\n    };\n\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(ReactDOM.findDOMNode(_this.highlighted));\n      }\n    };\n\n    _this.highlightItem = function (index) {\n      _this.setState({\n        highlightedIndex: index\n      });\n\n      if (_this.rootElement) {\n        _this.rootElement.focus();\n      }\n    };\n\n    _this.unhighlight = function () {\n      _this.setState({\n        highlightedIndex: -1\n      });\n    };\n\n    _this.moveUp = function () {\n      _this.move(-1);\n    };\n\n    _this.moveDown = function () {\n      _this.move(1);\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (typeof _this.props.onKeyDown === 'function') {\n        _this.props.onKeyDown(e);\n      }\n\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (isKeyArrowUp(e)) {\n        e.preventDefault();\n\n        _this.moveUp();\n      } else if (isKeyArrowDown(e)) {\n        e.preventDefault();\n\n        _this.moveDown();\n      } else if (isKeyEnter(e)) {\n        if (_this.highlighted && _this.highlighted.props.onClick) {\n          _this.highlighted.props.onClick(e);\n        }\n      }\n    };\n\n    _this.handleScrollStateChange = function (scrollState) {\n      if (_this.state.scrollState !== scrollState) {\n        _this.setState({\n          scrollState: scrollState\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = InternalMenu.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.setInitialSelection();\n    this.calculateMaxHeight();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.shouldRecalculateMaxHeight(prevProps)) {\n      this.calculateMaxHeight();\n    }\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.maxHeight !== this.props.maxHeight) {\n      this.setState({\n        maxHeight: nextProps.maxHeight || 'none'\n      });\n    }\n  };\n\n  _proto.focus = function focus() {\n    this.focusOnRootElement();\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn3,\n        _this3 = this;\n\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {\n      return React.isValidElement(x) && x.props.icon;\n    });\n\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: cn((_cn3 = {}, _cn3[jsStyles.root(this.theme)] = true, _cn3[jsStyles.shadow()] = this.props.hasShadow, _cn3)),\n      style: {\n        width: this.props.width,\n        maxHeight: this.state.maxHeight\n      },\n      onKeyDown: this.handleKeyDown,\n      ref: function ref(element) {\n        _this3.rootElement = element;\n      },\n      tabIndex: 0\n    }, this.props.header ? this.renderHeader() : null, React.createElement(ScrollContainer, {\n      ref: this.refScrollContainer,\n      maxHeight: this.props.maxHeight,\n      preventWindowScroll: this.props.preventWindowScroll,\n      onScrollStateChange: this.handleScrollStateChange\n    }, React.Children.map(this.props.children, function (child, index) {\n      if (typeof child === 'string' || typeof child === 'number' || child == null) {\n        return child;\n      }\n\n      if (React.isValidElement(child) && typeof child.type === 'string') {\n        return child;\n      }\n\n      if (enableIconPadding && (isMenuItem(child) || isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true\n        });\n      }\n\n      if (isActiveElement(child)) {\n        var highlight = _this3.state.highlightedIndex === index;\n        var ref = child.ref;\n        var originalRef = ref;\n\n        if (highlight) {\n          ref = function ref(menuItem) {\n            return _this3.refHighlighted(originalRef, menuItem);\n          };\n        }\n\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this3.select.bind(_this3, index, false),\n          onMouseEnter: function onMouseEnter(event) {\n            _this3.highlightItem(index);\n\n            if (isMenuItem(child) && child.props.onMouseEnter) {\n              child.props.onMouseEnter(event);\n            }\n          },\n          onMouseLeave: function onMouseLeave(event) {\n            _this3.unhighlight();\n\n            if (isMenuItem(child) && child.props.onMouseLeave) {\n              child.props.onMouseLeave(event);\n            }\n          }\n        });\n      }\n\n      return child;\n    })), this.props.footer ? this.renderFooter() : null);\n  };\n\n  _proto.refHighlighted = function refHighlighted(originalRef, menuItem) {\n    this.highlighted = menuItem;\n\n    if (!originalRef || typeof originalRef === 'string') {\n      return;\n    }\n\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    } else if (typeof originalRef === 'object') {\n      // @ts-ignore see issue https://github.com/DefinitelyTyped/DefinitelyTyped/issues/31065\n      originalRef.current = menuItem;\n    }\n  };\n\n  _proto.select = function select(index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n\n    if (isActiveElement(item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else {\n          location.href = item.props.href;\n        }\n      }\n\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n\n      if (this.props.onItemClick) {\n        this.props.onItemClick(event);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.move = function move(step) {\n    this.setState(function (state, props) {\n      var children = childrenToArray(props.children);\n\n      if (!children.some(isActiveElement)) {\n        return null;\n      }\n\n      var index = state.highlightedIndex;\n\n      do {\n        index += step;\n\n        if (!props.cyclicSelection && (index < 0 || index > children.length)) {\n          return null;\n        }\n\n        if (index < 0) {\n          index = children.length - 1;\n        } else if (index > children.length) {\n          index = 0;\n        }\n\n        var child = children[index];\n\n        if (isActiveElement(child)) {\n          return {\n            highlightedIndex: index\n          };\n        }\n      } while (index !== state.highlightedIndex);\n\n      return null;\n    }, this.scrollToSelected);\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n\n  return InternalMenu;\n}(React.Component);\nInternalMenu.__KONTUR_REACT_UI__ = 'InternalMenu';\nInternalMenu.defaultProps = {\n  width: 'auto',\n  maxHeight: 300,\n  hasShadow: true,\n  preventWindowScroll: true,\n  cyclicSelection: true,\n  initialSelectedItemIndex: -1\n};\n\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\n\nfunction childrenToArray(children) {\n  var ret = []; // Use forEach instead of map to avoid cloning for key unifying.\n\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}"]},"metadata":{},"sourceType":"module"}