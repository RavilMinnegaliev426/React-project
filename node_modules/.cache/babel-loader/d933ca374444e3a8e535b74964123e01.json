{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport cn from 'classnames';\nimport { isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { stopPropagation } from \"../../../lib/events/stopPropagation\";\nimport { HideBodyVerticalScroll } from \"../../../internal/HideBodyVerticalScroll\";\nimport { ModalStack } from \"../../../lib/ModalStack\";\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { RenderLayer } from \"../../../internal/RenderLayer\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { SidePageBody } from \"../SidePageBody\";\nimport { SidePageContainer } from \"../SidePageContainer\";\nimport { SidePageContext } from \"../SidePageContext\";\nimport { SidePageFooter } from \"../SidePageFooter\";\nimport { SidePageHeader } from \"../SidePageHeader\";\nimport { jsStyles } from \"../SidePage.styles\";\nvar TRANSITION_TIMEOUT = 200;\n/**\r\n                               * Сайдпейдж\r\n                               *\r\n                               * Содержит в себе три компоненты: **SidePage.Header**,\r\n                               * **SidePage.Body** и **SidePage.Footer**\r\n                               *\r\n                               * Для отображения серой плашки в футере в компонент\r\n                               * **Footer** необходимо передать пропс **panel**\r\n                               */\n\nexport var SidePage = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(SidePage, _React$Component);\n\n  function SidePage() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {};\n    _this.theme = void 0;\n    _this.stackSubscription = null;\n    _this.layoutRef = null;\n    _this.footer = null;\n\n    _this.updateLayout = function () {\n      if (_this.footer) {\n        _this.footer.update();\n      }\n    };\n\n    _this.getWidth = function () {\n      if (!_this.layoutRef) {\n        return 'auto';\n      }\n\n      return _this.layoutRef.getBoundingClientRect().width;\n    };\n\n    _this.handleStackChange = function (stack) {\n      var sidePages = stack.filter(function (x) {\n        return x instanceof SidePage;\n      });\n      var currentSidePagePosition = sidePages.indexOf(_assertThisInitialized(_this));\n      var isSidePageOnStackTop = stack[0] instanceof SidePage;\n      var hasMargin = sidePages.length > 1 && currentSidePagePosition === sidePages.length - 1;\n      var hasShadow = sidePages.length < 3 || currentSidePagePosition > sidePages.length - 3;\n      var hasBackground = currentSidePagePosition === sidePages.length - 1 && isSidePageOnStackTop;\n\n      _this.setState({\n        stackPosition: stack.indexOf(_assertThisInitialized(_this)),\n        hasMargin: hasMargin,\n        hasShadow: hasShadow,\n        hasBackground: hasBackground\n      });\n    };\n\n    _this.handleClickOutside = function (e) {\n      if (_this.state.stackPosition === 0 && !_this.props.ignoreBackgroundClick) {\n        // ignore mousedown on window scrollbar\n        if (e instanceof MouseEvent && e.clientX > document.documentElement.clientWidth) {\n          return;\n        }\n\n        _this.requestClose();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n\n      if (isKeyEscape(e)) {\n        stopPropagation(e);\n\n        _this.requestClose();\n      }\n    };\n\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.footerRef = function (ref) {\n      _this.footer = ref;\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePage.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n\n    ModalStack.remove(this);\n  }\n  /**\r\n   * Обновляет разметку компонента.\r\n   * @public\r\n   */\n  ;\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this$props = this.props,\n        blockBackground = _this$props.blockBackground,\n        disableAnimations = _this$props.disableAnimations;\n    return React.createElement(RenderContainer, null, React.createElement(\"div\", null, blockBackground && this.renderShadow(), React.createElement(CSSTransition, {\n      \"in\": true,\n      classNames: this.getTransitionNames(),\n      appear: !disableAnimations,\n      enter: !disableAnimations,\n      exit: false,\n      timeout: {\n        enter: TRANSITION_TIMEOUT,\n        exit: TRANSITION_TIMEOUT\n      }\n    }, this.renderContainer())));\n  };\n\n  _proto.renderContainer = function renderContainer() {\n    var _cn,\n        _this3 = this;\n\n    var _this$props2 = this.props,\n        width = _this$props2.width,\n        blockBackground = _this$props2.blockBackground,\n        fromLeft = _this$props2.fromLeft;\n    return React.createElement(ZIndex, {\n      priority: 'Sidepage',\n      \"data-tid\": \"SidePage__root\",\n      className: cn((_cn = {}, _cn[jsStyles.root()] = true, _cn[jsStyles.leftSide(this.theme)] = Boolean(fromLeft), _cn)),\n      onScroll: LayoutEvents.emit,\n      createStackingContext: true,\n      style: {\n        width: width || (blockBackground ? 800 : 500)\n      }\n    }, React.createElement(RenderLayer, {\n      onClickOutside: this.handleClickOutside,\n      active: true\n    }, React.createElement(\"div\", {\n      \"data-tid\": \"SidePage__container\",\n      className: cn(jsStyles.container(this.theme), this.state.hasShadow && jsStyles.shadow(this.theme)),\n      style: this.getSidebarStyle()\n    }, React.createElement(\"div\", {\n      ref: function ref(_) {\n        return _this3.layoutRef = _;\n      },\n      className: jsStyles.layout()\n    }, React.createElement(SidePageContext.Provider, {\n      value: {\n        requestClose: this.requestClose,\n        getWidth: this.getWidth,\n        updateLayout: this.updateLayout,\n        footerRef: this.footerRef\n      }\n    }, this.props.children)))));\n  };\n\n  _proto.renderShadow = function renderShadow() {\n    var _cn2;\n\n    return React.createElement(ZIndex, {\n      priority: 'Sidepage',\n      className: jsStyles.overlay(),\n      onScroll: LayoutEvents.emit\n    }, React.createElement(HideBodyVerticalScroll, {\n      key: \"hbvs\"\n    }), React.createElement(\"div\", {\n      key: \"overlay\",\n      className: cn((_cn2 = {}, _cn2[jsStyles.background()] = true, _cn2[jsStyles.backgroundGray()] = this.state.hasBackground, _cn2))\n    }));\n  };\n\n  _proto.getSidebarStyle = function getSidebarStyle() {\n    var sidePageStyle = {};\n\n    if (this.state.hasMargin) {\n      if (this.props.fromLeft) {\n        sidePageStyle.marginLeft = 20;\n      } else {\n        sidePageStyle.marginRight = 20;\n      }\n    }\n\n    return sidePageStyle;\n  };\n\n  _proto.getTransitionNames = function getTransitionNames() {\n    var transition = this.props.fromLeft ? jsStyles.transitionRight : jsStyles.transitionLeft;\n    return {\n      enter: transition(),\n      enterActive: jsStyles.transitionActive(),\n      exit: jsStyles.transitionLeave(),\n      exitActive: jsStyles.transitionLeaveActive(),\n      appear: transition(),\n      appearActive: jsStyles.transitionActive()\n    };\n  };\n\n  return SidePage;\n}(React.Component);\nSidePage.__KONTUR_REACT_UI__ = 'SidePage';\nSidePage.Header = SidePageHeader;\nSidePage.Body = SidePageBody;\nSidePage.Footer = SidePageFooter;\nSidePage.Container = SidePageContainer;","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/SidePage/SidePage/SidePage.js"],"names":["_assertThisInitialized","_inheritsLoose","React","CSSTransition","cn","isKeyEscape","LayoutEvents","stopPropagation","HideBodyVerticalScroll","ModalStack","RenderContainer","RenderLayer","ZIndex","ThemeContext","SidePageBody","SidePageContainer","SidePageContext","SidePageFooter","SidePageHeader","jsStyles","TRANSITION_TIMEOUT","SidePage","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","theme","stackSubscription","layoutRef","footer","updateLayout","update","getWidth","getBoundingClientRect","width","handleStackChange","stack","sidePages","filter","x","currentSidePagePosition","indexOf","isSidePageOnStackTop","hasMargin","hasShadow","hasBackground","setState","stackPosition","handleClickOutside","e","props","ignoreBackgroundClick","MouseEvent","clientX","document","documentElement","clientWidth","requestClose","handleKeyDown","disableClose","onClose","footerRef","ref","_proto","prototype","componentDidMount","window","addEventListener","add","componentWillUnmount","removeEventListener","remove","render","_this2","createElement","Consumer","renderMain","_this$props","blockBackground","disableAnimations","renderShadow","classNames","getTransitionNames","appear","enter","exit","timeout","renderContainer","_cn","_this3","_this$props2","fromLeft","priority","className","root","leftSide","Boolean","onScroll","emit","createStackingContext","style","onClickOutside","active","container","shadow","getSidebarStyle","_","layout","Provider","value","children","_cn2","overlay","key","background","backgroundGray","sidePageStyle","marginLeft","marginRight","transition","transitionRight","transitionLeft","enterActive","transitionActive","transitionLeave","exitActive","transitionLeaveActive","appearActive","Component","__KONTUR_REACT_UI__","Header","Body","Footer","Container"],"mappings":"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","sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport cn from 'classnames';\nimport { isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { stopPropagation } from \"../../../lib/events/stopPropagation\";\nimport { HideBodyVerticalScroll } from \"../../../internal/HideBodyVerticalScroll\";\nimport { ModalStack } from \"../../../lib/ModalStack\";\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { RenderLayer } from \"../../../internal/RenderLayer\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { SidePageBody } from \"../SidePageBody\";\nimport { SidePageContainer } from \"../SidePageContainer\";\nimport { SidePageContext } from \"../SidePageContext\";\nimport { SidePageFooter } from \"../SidePageFooter\";\nimport { SidePageHeader } from \"../SidePageHeader\";\nimport { jsStyles } from \"../SidePage.styles\";\nvar TRANSITION_TIMEOUT = 200;\n/**\r\n                               * Сайдпейдж\r\n                               *\r\n                               * Содержит в себе три компоненты: **SidePage.Header**,\r\n                               * **SidePage.Body** и **SidePage.Footer**\r\n                               *\r\n                               * Для отображения серой плашки в футере в компонент\r\n                               * **Footer** необходимо передать пропс **panel**\r\n                               */\n\nexport var SidePage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(SidePage, _React$Component);\n\n  function SidePage() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {};\n    _this.theme = void 0;\n    _this.stackSubscription = null;\n    _this.layoutRef = null;\n    _this.footer = null;\n\n    _this.updateLayout = function () {\n      if (_this.footer) {\n        _this.footer.update();\n      }\n    };\n\n    _this.getWidth = function () {\n      if (!_this.layoutRef) {\n        return 'auto';\n      }\n\n      return _this.layoutRef.getBoundingClientRect().width;\n    };\n\n    _this.handleStackChange = function (stack) {\n      var sidePages = stack.filter(function (x) {\n        return x instanceof SidePage;\n      });\n      var currentSidePagePosition = sidePages.indexOf(_assertThisInitialized(_this));\n      var isSidePageOnStackTop = stack[0] instanceof SidePage;\n      var hasMargin = sidePages.length > 1 && currentSidePagePosition === sidePages.length - 1;\n      var hasShadow = sidePages.length < 3 || currentSidePagePosition > sidePages.length - 3;\n      var hasBackground = currentSidePagePosition === sidePages.length - 1 && isSidePageOnStackTop;\n\n      _this.setState({\n        stackPosition: stack.indexOf(_assertThisInitialized(_this)),\n        hasMargin: hasMargin,\n        hasShadow: hasShadow,\n        hasBackground: hasBackground\n      });\n    };\n\n    _this.handleClickOutside = function (e) {\n      if (_this.state.stackPosition === 0 && !_this.props.ignoreBackgroundClick) {\n        // ignore mousedown on window scrollbar\n        if (e instanceof MouseEvent && e.clientX > document.documentElement.clientWidth) {\n          return;\n        }\n\n        _this.requestClose();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n\n      if (isKeyEscape(e)) {\n        stopPropagation(e);\n\n        _this.requestClose();\n      }\n    };\n\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.footerRef = function (ref) {\n      _this.footer = ref;\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePage.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n\n    ModalStack.remove(this);\n  }\n  /**\r\n   * Обновляет разметку компонента.\r\n   * @public\r\n   */\n  ;\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this$props = this.props,\n        blockBackground = _this$props.blockBackground,\n        disableAnimations = _this$props.disableAnimations;\n    return React.createElement(RenderContainer, null, React.createElement(\"div\", null, blockBackground && this.renderShadow(), React.createElement(CSSTransition, {\n      \"in\": true,\n      classNames: this.getTransitionNames(),\n      appear: !disableAnimations,\n      enter: !disableAnimations,\n      exit: false,\n      timeout: {\n        enter: TRANSITION_TIMEOUT,\n        exit: TRANSITION_TIMEOUT\n      }\n    }, this.renderContainer())));\n  };\n\n  _proto.renderContainer = function renderContainer() {\n    var _cn,\n        _this3 = this;\n\n    var _this$props2 = this.props,\n        width = _this$props2.width,\n        blockBackground = _this$props2.blockBackground,\n        fromLeft = _this$props2.fromLeft;\n    return React.createElement(ZIndex, {\n      priority: 'Sidepage',\n      \"data-tid\": \"SidePage__root\",\n      className: cn((_cn = {}, _cn[jsStyles.root()] = true, _cn[jsStyles.leftSide(this.theme)] = Boolean(fromLeft), _cn)),\n      onScroll: LayoutEvents.emit,\n      createStackingContext: true,\n      style: {\n        width: width || (blockBackground ? 800 : 500)\n      }\n    }, React.createElement(RenderLayer, {\n      onClickOutside: this.handleClickOutside,\n      active: true\n    }, React.createElement(\"div\", {\n      \"data-tid\": \"SidePage__container\",\n      className: cn(jsStyles.container(this.theme), this.state.hasShadow && jsStyles.shadow(this.theme)),\n      style: this.getSidebarStyle()\n    }, React.createElement(\"div\", {\n      ref: function ref(_) {\n        return _this3.layoutRef = _;\n      },\n      className: jsStyles.layout()\n    }, React.createElement(SidePageContext.Provider, {\n      value: {\n        requestClose: this.requestClose,\n        getWidth: this.getWidth,\n        updateLayout: this.updateLayout,\n        footerRef: this.footerRef\n      }\n    }, this.props.children)))));\n  };\n\n  _proto.renderShadow = function renderShadow() {\n    var _cn2;\n\n    return React.createElement(ZIndex, {\n      priority: 'Sidepage',\n      className: jsStyles.overlay(),\n      onScroll: LayoutEvents.emit\n    }, React.createElement(HideBodyVerticalScroll, {\n      key: \"hbvs\"\n    }), React.createElement(\"div\", {\n      key: \"overlay\",\n      className: cn((_cn2 = {}, _cn2[jsStyles.background()] = true, _cn2[jsStyles.backgroundGray()] = this.state.hasBackground, _cn2))\n    }));\n  };\n\n  _proto.getSidebarStyle = function getSidebarStyle() {\n    var sidePageStyle = {};\n\n    if (this.state.hasMargin) {\n      if (this.props.fromLeft) {\n        sidePageStyle.marginLeft = 20;\n      } else {\n        sidePageStyle.marginRight = 20;\n      }\n    }\n\n    return sidePageStyle;\n  };\n\n  _proto.getTransitionNames = function getTransitionNames() {\n    var transition = this.props.fromLeft ? jsStyles.transitionRight : jsStyles.transitionLeft;\n    return {\n      enter: transition(),\n      enterActive: jsStyles.transitionActive(),\n      exit: jsStyles.transitionLeave(),\n      exitActive: jsStyles.transitionLeaveActive(),\n      appear: transition(),\n      appearActive: jsStyles.transitionActive()\n    };\n  };\n\n  return SidePage;\n}(React.Component);\nSidePage.__KONTUR_REACT_UI__ = 'SidePage';\nSidePage.Header = SidePageHeader;\nSidePage.Body = SidePageBody;\nSidePage.Footer = SidePageFooter;\nSidePage.Container = SidePageContainer;"]},"metadata":{},"sourceType":"module"}