{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport invariant from 'invariant';\nimport React from 'react';\nimport raf from 'raf';\nimport cn from 'classnames';\nimport { isIE11, isEdge } from \"../../../lib/utils\";\nimport { isKeyBackspace, isKeyDelete, someKeys } from \"../../../lib/events/keyboard/identifiers\";\nimport { polyfillPlaceholder } from \"../../../lib/polyfillPlaceholder\";\nimport { MaskedInput } from \"../../../internal/MaskedInput\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Input.styles\";\n/**\r\n                                            * Интерфес пропсов наследуется от `React.InputHTMLAttributes<HTMLInputElement>`.\r\n                                            *  Все пропсы кроме перечисленных, `className` и `style` передаются в `<input>`\r\n                                            */\n\nexport var Input = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Input, _React$Component);\n\n  function Input() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      polyfillPlaceholder: false,\n      blinking: false,\n      focused: false\n    };\n    _this.selectAllId = null;\n    _this.theme = void 0;\n    _this.blinkTimeout = 0;\n    _this.input = null;\n\n    _this.selectAll = function () {\n      if (_this.input) {\n        _this.setSelectionRange(0, _this.input.value.length);\n      }\n    };\n\n    _this.delaySelectAll = function () {\n      return _this.selectAllId = raf(_this.selectAll);\n    };\n\n    _this.cancelDelayedSelectAll = function () {\n      if (_this.selectAllId) {\n        raf.cancel(_this.selectAllId);\n        _this.selectAllId = null;\n      }\n    };\n\n    _this.cancelBlink = function (callback) {\n      if (_this.blinkTimeout) {\n        clearTimeout(_this.blinkTimeout);\n        _this.blinkTimeout = 0;\n\n        if (_this.state.blinking) {\n          _this.setState({\n            blinking: false\n          }, callback);\n\n          return;\n        }\n      }\n\n      if (callback) {\n        callback();\n      }\n    };\n\n    _this.refInput = function (element) {\n      if (element instanceof MaskedInput) {\n        _this.input = element.input;\n      } else {\n        _this.input = element;\n      }\n    };\n\n    _this.handleChange = function (event) {\n      if (polyfillPlaceholder) {\n        var fieldIsEmpty = event.target.value === '';\n\n        if (_this.state.polyfillPlaceholder !== fieldIsEmpty) {\n          _this.setState({\n            polyfillPlaceholder: fieldIsEmpty\n          });\n        }\n      }\n\n      if (_this.props.onValueChange) {\n        _this.props.onValueChange(event.target.value);\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(event);\n      }\n    };\n\n    _this.handleFocus = function (event) {\n      _this.setState({\n        focused: true\n      });\n\n      if (_this.props.selectAllOnFocus) {\n        // https://github.com/facebook/react/issues/7769\n        _this.input ? _this.selectAll() : _this.delaySelectAll();\n      }\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n\n      var isDeleteKey = someKeys(isKeyBackspace, isKeyDelete)(e);\n\n      if (!e.currentTarget.value && isDeleteKey && !e.repeat) {\n        _this.handleUnexpectedInput();\n      }\n    };\n\n    _this.handleKeyPress = function (event) {\n      if (_this.props.onKeyPress) {\n        _this.props.onKeyPress(event);\n      }\n\n      if (_this.props.maxLength === event.currentTarget.value.length) {\n        _this.handleUnexpectedInput(event.currentTarget.value);\n      }\n    };\n\n    _this.handleMaskedValueChange = function (value) {\n      if (_this.props.onValueChange) {\n        _this.props.onValueChange(value);\n      }\n    };\n\n    _this.handleUnexpectedInput = function (value) {\n      if (value === void 0) {\n        value = _this.props.value || '';\n      }\n\n      if (_this.props.onUnexpectedInput) {\n        _this.props.onUnexpectedInput(value);\n      } else {\n        _this.blink();\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      _this.setState({\n        focused: false\n      });\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n    };\n\n    _this.renderPrefix = function () {\n      var prefix = _this.props.prefix;\n\n      if (!prefix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: jsStyles.prefix(_this.theme)\n      }, prefix);\n    };\n\n    _this.renderSuffix = function () {\n      var suffix = _this.props.suffix;\n\n      if (!suffix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: jsStyles.suffix(_this.theme)\n      }, suffix);\n    };\n\n    return _this;\n  }\n\n  var _proto = Input.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (polyfillPlaceholder) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.blinkTimeout) {\n      clearTimeout(this.blinkTimeout);\n    }\n\n    this.cancelDelayedSelectAll();\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (polyfillPlaceholder && !nextProps.value) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.focus = function focus() {\n    invariant(this.input, 'Cannot call \"focus\" because Input is not mounted');\n    this.input.focus();\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.blur = function blur() {\n    invariant(this.input, 'Cannot call \"blur\" because Input is not mounted');\n    this.input.blur();\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.blink = function blink() {\n    var _this2 = this;\n\n    if (this.blinkTimeout) {\n      this.cancelBlink(function () {\n        // trigger reflow to restart animation\n        // @see https://css-tricks.com/restart-css-animation/#article-header-id-0\n        void (_this2.input && _this2.input.offsetWidth);\n\n        _this2.blink();\n      });\n      return;\n    }\n\n    this.setState({\n      blinking: true\n    }, function () {\n      _this2.blinkTimeout = window.setTimeout(_this2.cancelBlink, 150);\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.setSelectionRange = function setSelectionRange(start, end) {\n    if (!this.input) {\n      throw new Error('Cannot call \"setSelectionRange\" on unmounted Input');\n    }\n\n    if (document.activeElement !== this.input) {\n      this.focus();\n    }\n\n    this.input.setSelectionRange(start, end);\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this3.theme = theme;\n      return _this3.renderMain();\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.renderMain = function renderMain() {\n    var _cn;\n\n    var _this$props = this.props,\n        onMouseEnter = _this$props.onMouseEnter,\n        onMouseLeave = _this$props.onMouseLeave,\n        onMouseOver = _this$props.onMouseOver,\n        onKeyDown = _this$props.onKeyDown,\n        onKeyPress = _this$props.onKeyPress,\n        onValueChange = _this$props.onValueChange,\n        width = _this$props.width,\n        error = _this$props.error,\n        warning = _this$props.warning,\n        leftIcon = _this$props.leftIcon,\n        rightIcon = _this$props.rightIcon,\n        borderless = _this$props.borderless,\n        value = _this$props.value,\n        align = _this$props.align,\n        type = _this$props.type,\n        mask = _this$props.mask,\n        maskChar = _this$props.maskChar,\n        alwaysShowMask = _this$props.alwaysShowMask,\n        style = _this$props.style,\n        className = _this$props.className,\n        size = _this$props.size,\n        placeholder = _this$props.placeholder,\n        selectAllOnFocus = _this$props.selectAllOnFocus,\n        disabled = _this$props.disabled,\n        onUnexpectedInput = _this$props.onUnexpectedInput,\n        prefix = _this$props.prefix,\n        suffix = _this$props.suffix,\n        formatChars = _this$props.formatChars,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"onMouseEnter\", \"onMouseLeave\", \"onMouseOver\", \"onKeyDown\", \"onKeyPress\", \"onValueChange\", \"width\", \"error\", \"warning\", \"leftIcon\", \"rightIcon\", \"borderless\", \"value\", \"align\", \"type\", \"mask\", \"maskChar\", \"alwaysShowMask\", \"style\", \"className\", \"size\", \"placeholder\", \"selectAllOnFocus\", \"disabled\", \"onUnexpectedInput\", \"prefix\", \"suffix\", \"formatChars\"]);\n\n    var _this$state = this.state,\n        blinking = _this$state.blinking,\n        focused = _this$state.focused;\n    var labelProps = {\n      className: cn(jsStyles.root(this.theme), this.getSizeClassName(), (_cn = {}, _cn[jsStyles.borderless()] = !!borderless, _cn[jsStyles.focus(this.theme)] = focused, _cn[jsStyles.blink(this.theme)] = !!blinking, _cn[jsStyles.warning(this.theme)] = !!warning, _cn[jsStyles.error(this.theme)] = !!error, _cn[jsStyles.disabled(this.theme)] = !!disabled, _cn[jsStyles.focusFallback(this.theme)] = focused && (isIE11 || isEdge), _cn[jsStyles.warningFallback(this.theme)] = !!warning && (isIE11 || isEdge), _cn[jsStyles.errorFallback(this.theme)] = !!error && (isIE11 || isEdge), _cn)),\n      style: {\n        width: width\n      },\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseOver: onMouseOver\n    };\n\n    var inputProps = _extends({}, rest, {\n      className: jsStyles.input(this.theme),\n      value: value,\n      onChange: this.handleChange,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      onBlur: this.handleBlur,\n      style: {\n        textAlign: align\n      },\n      ref: this.refInput,\n      type: 'text',\n      placeholder: !this.isMaskVisible && !polyfillPlaceholder ? placeholder : undefined,\n      disabled: disabled\n    });\n\n    if (type === 'password') {\n      inputProps.type = type;\n    }\n\n    var input = mask ? this.renderMaskedInput(inputProps, mask) : React.createElement('input', inputProps);\n    return React.createElement(\"label\", labelProps, React.createElement(\"span\", {\n      className: jsStyles.sideContainer()\n    }, this.renderLeftIcon(), this.renderPrefix()), React.createElement(\"span\", {\n      className: jsStyles.wrapper()\n    }, input, this.renderPlaceholder()), React.createElement(\"span\", {\n      className: cn(jsStyles.sideContainer(), jsStyles.rightContainer())\n    }, this.renderSuffix(), this.renderRightIcon()));\n  };\n\n  _proto.renderMaskedInput = function renderMaskedInput(inputProps, mask) {\n    return React.createElement(MaskedInput, _extends({}, inputProps, {\n      mask: mask,\n      maskChar: this.props.maskChar === undefined ? '_' : this.props.maskChar,\n      alwaysShowMask: this.props.alwaysShowMask,\n      formatChars: this.props.formatChars,\n      onChange: this.props.onChange,\n      onValueChange: this.handleMaskedValueChange,\n      onUnexpectedInput: this.handleUnexpectedInput\n    }));\n  };\n\n  _proto.renderLeftIcon = function renderLeftIcon() {\n    return this.renderIcon(this.props.leftIcon, jsStyles.leftIcon());\n  };\n\n  _proto.renderRightIcon = function renderRightIcon() {\n    return this.renderIcon(this.props.rightIcon, jsStyles.rightIcon());\n  };\n\n  _proto.renderIcon = function renderIcon(icon, className) {\n    if (!icon) {\n      return null;\n    }\n\n    if (icon instanceof Function) {\n      return React.createElement(\"span\", {\n        className: className\n      }, icon());\n    }\n\n    return React.createElement(\"span\", {\n      className: cn(className, jsStyles.useDefaultColor(this.theme), jsStyles.useDefaultColor(this.theme))\n    }, icon);\n  };\n\n  _proto.renderPlaceholder = function renderPlaceholder() {\n    var placeholder = null;\n\n    if (this.state.polyfillPlaceholder && this.props.placeholder && !this.isMaskVisible && !this.props.value) {\n      placeholder = React.createElement(\"div\", {\n        className: cn(jsStyles.placeholder(this.theme), jsStyles.placeholder(this.theme)),\n        style: {\n          textAlign: this.props.align || 'inherit'\n        }\n      }, this.props.placeholder);\n    }\n\n    return placeholder;\n  };\n\n  _proto.getSizeClassName = function getSizeClassName() {\n    var _ref, _ref2, _ref3;\n\n    switch (this.props.size) {\n      case 'large':\n        return _ref = {}, _ref[jsStyles.sizeLarge(this.theme)] = true, _ref[jsStyles.sizeLargeFallback(this.theme)] = isIE11 || isEdge, _ref;\n\n      case 'medium':\n        return _ref2 = {}, _ref2[jsStyles.sizeMedium(this.theme)] = true, _ref2[jsStyles.sizeMediumFallback(this.theme)] = isIE11 || isEdge, _ref2;\n\n      case 'small':\n      default:\n        return _ref3 = {}, _ref3[jsStyles.sizeSmall(this.theme)] = true, _ref3[jsStyles.sizeSmallFallback(this.theme)] = isIE11 || isEdge, _ref3;\n    }\n  };\n\n  _createClass(Input, [{\n    key: \"isMaskVisible\",\n    get: function get() {\n      var _this$props2 = this.props,\n          mask = _this$props2.mask,\n          alwaysShowMask = _this$props2.alwaysShowMask;\n      var focused = this.state.focused;\n      return Boolean(mask && (focused || alwaysShowMask));\n    }\n  }]);\n\n  return Input;\n}(React.Component);\nInput.__KONTUR_REACT_UI__ = 'Input';\nInput.defaultProps = {\n  size: 'small'\n};","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/Input/Input/Input.js"],"names":["_extends","_objectWithoutPropertiesLoose","_createClass","_inheritsLoose","invariant","React","raf","cn","isIE11","isEdge","isKeyBackspace","isKeyDelete","someKeys","polyfillPlaceholder","MaskedInput","ThemeContext","jsStyles","Input","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","blinking","focused","selectAllId","theme","blinkTimeout","input","selectAll","setSelectionRange","value","delaySelectAll","cancelDelayedSelectAll","cancel","cancelBlink","callback","clearTimeout","setState","refInput","element","handleChange","event","fieldIsEmpty","target","props","onValueChange","onChange","handleFocus","selectAllOnFocus","onFocus","handleKeyDown","e","onKeyDown","isDeleteKey","currentTarget","repeat","handleUnexpectedInput","handleKeyPress","onKeyPress","maxLength","handleMaskedValueChange","onUnexpectedInput","blink","handleBlur","onBlur","renderPrefix","prefix","createElement","className","renderSuffix","suffix","_proto","prototype","componentDidMount","componentWillUnmount","UNSAFE_componentWillReceiveProps","nextProps","focus","blur","_this2","offsetWidth","window","setTimeout","start","end","Error","document","activeElement","render","_this3","Consumer","renderMain","_cn","_this$props","onMouseEnter","onMouseLeave","onMouseOver","width","error","warning","leftIcon","rightIcon","borderless","align","type","mask","maskChar","alwaysShowMask","style","size","placeholder","disabled","formatChars","rest","_this$state","labelProps","root","getSizeClassName","focusFallback","warningFallback","errorFallback","inputProps","textAlign","ref","isMaskVisible","undefined","renderMaskedInput","sideContainer","renderLeftIcon","wrapper","renderPlaceholder","rightContainer","renderRightIcon","renderIcon","icon","Function","useDefaultColor","_ref","_ref2","_ref3","sizeLarge","sizeLargeFallback","sizeMedium","sizeMediumFallback","sizeSmall","sizeSmallFallback","key","get","_this$props2","Boolean","Component","__KONTUR_REACT_UI__","defaultProps"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport invariant from 'invariant';\nimport React from 'react';\nimport raf from 'raf';\nimport cn from 'classnames';\nimport { isIE11, isEdge } from \"../../../lib/utils\";\nimport { isKeyBackspace, isKeyDelete, someKeys } from \"../../../lib/events/keyboard/identifiers\";\nimport { polyfillPlaceholder } from \"../../../lib/polyfillPlaceholder\";\nimport { MaskedInput } from \"../../../internal/MaskedInput\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Input.styles\";\n/**\r\n                                            * Интерфес пропсов наследуется от `React.InputHTMLAttributes<HTMLInputElement>`.\r\n                                            *  Все пропсы кроме перечисленных, `className` и `style` передаются в `<input>`\r\n                                            */\n\nexport var Input =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Input, _React$Component);\n\n  function Input() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      polyfillPlaceholder: false,\n      blinking: false,\n      focused: false\n    };\n    _this.selectAllId = null;\n    _this.theme = void 0;\n    _this.blinkTimeout = 0;\n    _this.input = null;\n\n    _this.selectAll = function () {\n      if (_this.input) {\n        _this.setSelectionRange(0, _this.input.value.length);\n      }\n    };\n\n    _this.delaySelectAll = function () {\n      return _this.selectAllId = raf(_this.selectAll);\n    };\n\n    _this.cancelDelayedSelectAll = function () {\n      if (_this.selectAllId) {\n        raf.cancel(_this.selectAllId);\n        _this.selectAllId = null;\n      }\n    };\n\n    _this.cancelBlink = function (callback) {\n      if (_this.blinkTimeout) {\n        clearTimeout(_this.blinkTimeout);\n        _this.blinkTimeout = 0;\n\n        if (_this.state.blinking) {\n          _this.setState({\n            blinking: false\n          }, callback);\n\n          return;\n        }\n      }\n\n      if (callback) {\n        callback();\n      }\n    };\n\n    _this.refInput = function (element) {\n      if (element instanceof MaskedInput) {\n        _this.input = element.input;\n      } else {\n        _this.input = element;\n      }\n    };\n\n    _this.handleChange = function (event) {\n      if (polyfillPlaceholder) {\n        var fieldIsEmpty = event.target.value === '';\n\n        if (_this.state.polyfillPlaceholder !== fieldIsEmpty) {\n          _this.setState({\n            polyfillPlaceholder: fieldIsEmpty\n          });\n        }\n      }\n\n      if (_this.props.onValueChange) {\n        _this.props.onValueChange(event.target.value);\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(event);\n      }\n    };\n\n    _this.handleFocus = function (event) {\n      _this.setState({\n        focused: true\n      });\n\n      if (_this.props.selectAllOnFocus) {\n        // https://github.com/facebook/react/issues/7769\n        _this.input ? _this.selectAll() : _this.delaySelectAll();\n      }\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n\n      var isDeleteKey = someKeys(isKeyBackspace, isKeyDelete)(e);\n\n      if (!e.currentTarget.value && isDeleteKey && !e.repeat) {\n        _this.handleUnexpectedInput();\n      }\n    };\n\n    _this.handleKeyPress = function (event) {\n      if (_this.props.onKeyPress) {\n        _this.props.onKeyPress(event);\n      }\n\n      if (_this.props.maxLength === event.currentTarget.value.length) {\n        _this.handleUnexpectedInput(event.currentTarget.value);\n      }\n    };\n\n    _this.handleMaskedValueChange = function (value) {\n      if (_this.props.onValueChange) {\n        _this.props.onValueChange(value);\n      }\n    };\n\n    _this.handleUnexpectedInput = function (value) {\n      if (value === void 0) {\n        value = _this.props.value || '';\n      }\n\n      if (_this.props.onUnexpectedInput) {\n        _this.props.onUnexpectedInput(value);\n      } else {\n        _this.blink();\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      _this.setState({\n        focused: false\n      });\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n    };\n\n    _this.renderPrefix = function () {\n      var prefix = _this.props.prefix;\n\n      if (!prefix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: jsStyles.prefix(_this.theme)\n      }, prefix);\n    };\n\n    _this.renderSuffix = function () {\n      var suffix = _this.props.suffix;\n\n      if (!suffix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: jsStyles.suffix(_this.theme)\n      }, suffix);\n    };\n\n    return _this;\n  }\n\n  var _proto = Input.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (polyfillPlaceholder) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.blinkTimeout) {\n      clearTimeout(this.blinkTimeout);\n    }\n\n    this.cancelDelayedSelectAll();\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (polyfillPlaceholder && !nextProps.value) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.focus = function focus() {\n    invariant(this.input, 'Cannot call \"focus\" because Input is not mounted');\n    this.input.focus();\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.blur = function blur() {\n    invariant(this.input, 'Cannot call \"blur\" because Input is not mounted');\n    this.input.blur();\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.blink = function blink() {\n    var _this2 = this;\n\n    if (this.blinkTimeout) {\n      this.cancelBlink(function () {\n        // trigger reflow to restart animation\n        // @see https://css-tricks.com/restart-css-animation/#article-header-id-0\n        void (_this2.input && _this2.input.offsetWidth);\n\n        _this2.blink();\n      });\n      return;\n    }\n\n    this.setState({\n      blinking: true\n    }, function () {\n      _this2.blinkTimeout = window.setTimeout(_this2.cancelBlink, 150);\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.setSelectionRange = function setSelectionRange(start, end) {\n    if (!this.input) {\n      throw new Error('Cannot call \"setSelectionRange\" on unmounted Input');\n    }\n\n    if (document.activeElement !== this.input) {\n      this.focus();\n    }\n\n    this.input.setSelectionRange(start, end);\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this3.theme = theme;\n      return _this3.renderMain();\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.renderMain = function renderMain() {\n    var _cn;\n\n    var _this$props = this.props,\n        onMouseEnter = _this$props.onMouseEnter,\n        onMouseLeave = _this$props.onMouseLeave,\n        onMouseOver = _this$props.onMouseOver,\n        onKeyDown = _this$props.onKeyDown,\n        onKeyPress = _this$props.onKeyPress,\n        onValueChange = _this$props.onValueChange,\n        width = _this$props.width,\n        error = _this$props.error,\n        warning = _this$props.warning,\n        leftIcon = _this$props.leftIcon,\n        rightIcon = _this$props.rightIcon,\n        borderless = _this$props.borderless,\n        value = _this$props.value,\n        align = _this$props.align,\n        type = _this$props.type,\n        mask = _this$props.mask,\n        maskChar = _this$props.maskChar,\n        alwaysShowMask = _this$props.alwaysShowMask,\n        style = _this$props.style,\n        className = _this$props.className,\n        size = _this$props.size,\n        placeholder = _this$props.placeholder,\n        selectAllOnFocus = _this$props.selectAllOnFocus,\n        disabled = _this$props.disabled,\n        onUnexpectedInput = _this$props.onUnexpectedInput,\n        prefix = _this$props.prefix,\n        suffix = _this$props.suffix,\n        formatChars = _this$props.formatChars,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"onMouseEnter\", \"onMouseLeave\", \"onMouseOver\", \"onKeyDown\", \"onKeyPress\", \"onValueChange\", \"width\", \"error\", \"warning\", \"leftIcon\", \"rightIcon\", \"borderless\", \"value\", \"align\", \"type\", \"mask\", \"maskChar\", \"alwaysShowMask\", \"style\", \"className\", \"size\", \"placeholder\", \"selectAllOnFocus\", \"disabled\", \"onUnexpectedInput\", \"prefix\", \"suffix\", \"formatChars\"]);\n\n    var _this$state = this.state,\n        blinking = _this$state.blinking,\n        focused = _this$state.focused;\n    var labelProps = {\n      className: cn(jsStyles.root(this.theme), this.getSizeClassName(), (_cn = {}, _cn[jsStyles.borderless()] = !!borderless, _cn[jsStyles.focus(this.theme)] = focused, _cn[jsStyles.blink(this.theme)] = !!blinking, _cn[jsStyles.warning(this.theme)] = !!warning, _cn[jsStyles.error(this.theme)] = !!error, _cn[jsStyles.disabled(this.theme)] = !!disabled, _cn[jsStyles.focusFallback(this.theme)] = focused && (isIE11 || isEdge), _cn[jsStyles.warningFallback(this.theme)] = !!warning && (isIE11 || isEdge), _cn[jsStyles.errorFallback(this.theme)] = !!error && (isIE11 || isEdge), _cn)),\n      style: {\n        width: width\n      },\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseOver: onMouseOver\n    };\n\n    var inputProps = _extends({}, rest, {\n      className: jsStyles.input(this.theme),\n      value: value,\n      onChange: this.handleChange,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      onBlur: this.handleBlur,\n      style: {\n        textAlign: align\n      },\n      ref: this.refInput,\n      type: 'text',\n      placeholder: !this.isMaskVisible && !polyfillPlaceholder ? placeholder : undefined,\n      disabled: disabled\n    });\n\n    if (type === 'password') {\n      inputProps.type = type;\n    }\n\n    var input = mask ? this.renderMaskedInput(inputProps, mask) : React.createElement('input', inputProps);\n    return React.createElement(\"label\", labelProps, React.createElement(\"span\", {\n      className: jsStyles.sideContainer()\n    }, this.renderLeftIcon(), this.renderPrefix()), React.createElement(\"span\", {\n      className: jsStyles.wrapper()\n    }, input, this.renderPlaceholder()), React.createElement(\"span\", {\n      className: cn(jsStyles.sideContainer(), jsStyles.rightContainer())\n    }, this.renderSuffix(), this.renderRightIcon()));\n  };\n\n  _proto.renderMaskedInput = function renderMaskedInput(inputProps, mask) {\n    return React.createElement(MaskedInput, _extends({}, inputProps, {\n      mask: mask,\n      maskChar: this.props.maskChar === undefined ? '_' : this.props.maskChar,\n      alwaysShowMask: this.props.alwaysShowMask,\n      formatChars: this.props.formatChars,\n      onChange: this.props.onChange,\n      onValueChange: this.handleMaskedValueChange,\n      onUnexpectedInput: this.handleUnexpectedInput\n    }));\n  };\n\n  _proto.renderLeftIcon = function renderLeftIcon() {\n    return this.renderIcon(this.props.leftIcon, jsStyles.leftIcon());\n  };\n\n  _proto.renderRightIcon = function renderRightIcon() {\n    return this.renderIcon(this.props.rightIcon, jsStyles.rightIcon());\n  };\n\n  _proto.renderIcon = function renderIcon(icon, className) {\n    if (!icon) {\n      return null;\n    }\n\n    if (icon instanceof Function) {\n      return React.createElement(\"span\", {\n        className: className\n      }, icon());\n    }\n\n    return React.createElement(\"span\", {\n      className: cn(className, jsStyles.useDefaultColor(this.theme), jsStyles.useDefaultColor(this.theme))\n    }, icon);\n  };\n\n  _proto.renderPlaceholder = function renderPlaceholder() {\n    var placeholder = null;\n\n    if (this.state.polyfillPlaceholder && this.props.placeholder && !this.isMaskVisible && !this.props.value) {\n      placeholder = React.createElement(\"div\", {\n        className: cn(jsStyles.placeholder(this.theme), jsStyles.placeholder(this.theme)),\n        style: {\n          textAlign: this.props.align || 'inherit'\n        }\n      }, this.props.placeholder);\n    }\n\n    return placeholder;\n  };\n\n  _proto.getSizeClassName = function getSizeClassName() {\n    var _ref, _ref2, _ref3;\n\n    switch (this.props.size) {\n      case 'large':\n        return _ref = {}, _ref[jsStyles.sizeLarge(this.theme)] = true, _ref[jsStyles.sizeLargeFallback(this.theme)] = isIE11 || isEdge, _ref;\n\n      case 'medium':\n        return _ref2 = {}, _ref2[jsStyles.sizeMedium(this.theme)] = true, _ref2[jsStyles.sizeMediumFallback(this.theme)] = isIE11 || isEdge, _ref2;\n\n      case 'small':\n      default:\n        return _ref3 = {}, _ref3[jsStyles.sizeSmall(this.theme)] = true, _ref3[jsStyles.sizeSmallFallback(this.theme)] = isIE11 || isEdge, _ref3;\n    }\n  };\n\n  _createClass(Input, [{\n    key: \"isMaskVisible\",\n    get: function get() {\n      var _this$props2 = this.props,\n          mask = _this$props2.mask,\n          alwaysShowMask = _this$props2.alwaysShowMask;\n      var focused = this.state.focused;\n      return Boolean(mask && (focused || alwaysShowMask));\n    }\n  }]);\n\n  return Input;\n}(React.Component);\nInput.__KONTUR_REACT_UI__ = 'Input';\nInput.defaultProps = {\n  size: 'small'\n};"]},"metadata":{},"sourceType":"module"}