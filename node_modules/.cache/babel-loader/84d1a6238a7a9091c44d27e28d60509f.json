{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport cn from 'classnames';\nimport { Sticky } from \"../../Sticky\";\nimport { CrossIcon } from \"../../../internal/icons/CrossIcon\";\nimport { isFunction } from \"../../../lib/utils\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../SidePage.styles\";\nimport { SidePageContext } from \"../SidePageContext\";\nvar REGULAR_HEADER_PADDING_TOP = 25;\nvar FIXED_HEADER_PADDING_TOP = 13;\nvar FONT_FAMILY_CORRECTION = 1;\nvar CLOSE_ELEMENT_OFFSET = REGULAR_HEADER_PADDING_TOP - FIXED_HEADER_PADDING_TOP - FONT_FAMILY_CORRECTION;\nvar FIXED_HEADER_HEIGHT = 50;\n/**\r\n                               * Шапка сайдпейджа\r\n                               *\r\n                               * @visibleName SidePage.Header\r\n                               */\n\nexport var SidePageHeader = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(SidePageHeader, _React$Component);\n\n  function SidePageHeader() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      isReadyToFix: false\n    };\n    _this.theme = void 0;\n    _this.wrapper = null;\n    _this.lastRegularHeight = 0;\n\n    _this.componentDidMount = function () {\n      window.addEventListener('scroll', _this.update, true);\n    };\n\n    _this.componentWillUnmount = function () {\n      window.removeEventListener('scroll', _this.update, true);\n    };\n\n    _this.update = function () {\n      _this.updateReadyToFix();\n    };\n\n    _this.renderHeader = function (fixed) {\n      var _cn, _cn2;\n\n      if (fixed === void 0) {\n        fixed = false;\n      }\n\n      return React.createElement(\"div\", {\n        className: cn(jsStyles.header(), (_cn = {}, _cn[jsStyles.headerFixed(_this.theme)] = fixed, _cn))\n      }, _this.renderClose(), React.createElement(\"div\", {\n        className: cn(jsStyles.title(), (_cn2 = {}, _cn2[jsStyles.titleFixed()] = fixed, _cn2))\n      }, isFunction(_this.props.children) ? _this.props.children(fixed) : _this.props.children));\n    };\n\n    _this.renderCloseContent = function (fixed) {\n      return React.createElement(SidePageContext.Consumer, null, function (_ref) {\n        var _cn3;\n\n        var requestClose = _ref.requestClose;\n        return React.createElement(\"a\", {\n          className: cn(jsStyles.close(_this.theme), (_cn3 = {}, _cn3[jsStyles.fixed()] = fixed, _cn3)),\n          onClick: requestClose,\n          \"data-tid\": \"SidePage__close\"\n        }, React.createElement(\"span\", {\n          className: jsStyles.closeIcon()\n        }, React.createElement(CrossIcon, null)));\n      });\n    };\n\n    _this.renderClose = function () {\n      return React.createElement(Sticky, {\n        side: \"top\",\n        offset: CLOSE_ELEMENT_OFFSET\n      }, _this.renderCloseContent);\n    };\n\n    _this.updateReadyToFix = function () {\n      if (_this.wrapper) {\n        var wrapperScrolledUp = _this.wrapper.getBoundingClientRect().top;\n\n        var isReadyToFix = _this.regularHeight + wrapperScrolledUp <= FIXED_HEADER_HEIGHT;\n\n        _this.setState(function (state) {\n          return state.isReadyToFix !== isReadyToFix ? {\n            isReadyToFix: isReadyToFix\n          } : state;\n        });\n      }\n    };\n\n    _this.wrapperRef = function (el) {\n      _this.wrapper = el;\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePageHeader.prototype;\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var isReadyToFix = this.state.isReadyToFix;\n    return React.createElement(\"div\", {\n      ref: this.wrapperRef\n    }, isReadyToFix ? React.createElement(Sticky, {\n      side: \"top\"\n    }, this.renderHeader) : this.renderHeader());\n  };\n\n  _createClass(SidePageHeader, [{\n    key: \"regularHeight\",\n    get: function get() {\n      var isReadyToFix = this.state.isReadyToFix;\n\n      if (!this.wrapper) {\n        return 0;\n      }\n\n      if (!isReadyToFix) {\n        this.lastRegularHeight = this.wrapper.getBoundingClientRect().height;\n      }\n\n      return this.lastRegularHeight;\n    }\n  }]);\n\n  return SidePageHeader;\n}(React.Component);\nSidePageHeader.__KONTUR_REACT_UI__ = 'SidePageHeader';","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/SidePage/SidePageHeader/SidePageHeader.js"],"names":["_createClass","_inheritsLoose","React","cn","Sticky","CrossIcon","isFunction","ThemeContext","jsStyles","SidePageContext","REGULAR_HEADER_PADDING_TOP","FIXED_HEADER_PADDING_TOP","FONT_FAMILY_CORRECTION","CLOSE_ELEMENT_OFFSET","FIXED_HEADER_HEIGHT","SidePageHeader","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","isReadyToFix","theme","wrapper","lastRegularHeight","componentDidMount","window","addEventListener","update","componentWillUnmount","removeEventListener","updateReadyToFix","renderHeader","fixed","_cn","_cn2","createElement","className","header","headerFixed","renderClose","title","titleFixed","props","children","renderCloseContent","Consumer","_ref","_cn3","requestClose","close","onClick","closeIcon","side","offset","wrapperScrolledUp","getBoundingClientRect","top","regularHeight","setState","wrapperRef","el","_proto","prototype","render","_this2","renderMain","ref","key","get","height","Component","__KONTUR_REACT_UI__"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,wCAAzB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,SAAT,QAA0B,mCAA1B;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,IAAIC,0BAA0B,GAAG,EAAjC;AACA,IAAIC,wBAAwB,GAAG,EAA/B;AACA,IAAIC,sBAAsB,GAAG,CAA7B;AACA,IAAIC,oBAAoB,GAAGH,0BAA0B,GAAGC,wBAA7B,GAAwDC,sBAAnF;AACA,IAAIE,mBAAmB,GAAG,EAA1B;AACA;;;;;;AAMA,OAAO,IAAIC,cAAc,GACzB,aACA,UAAUC,gBAAV,EAA4B;AAC1Bf,EAAAA,cAAc,CAACc,cAAD,EAAiBC,gBAAjB,CAAd;;AAEA,WAASD,cAAT,GAA0B;AACxB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,gBAAgB,CAACQ,IAAjB,CAAsBC,KAAtB,CAA4BT,gBAA5B,EAA8C,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAA9E;AACAJ,IAAAA,KAAK,CAACU,KAAN,GAAc;AACZC,MAAAA,YAAY,EAAE;AADF,KAAd;AAGAX,IAAAA,KAAK,CAACY,KAAN,GAAc,KAAK,CAAnB;AACAZ,IAAAA,KAAK,CAACa,OAAN,GAAgB,IAAhB;AACAb,IAAAA,KAAK,CAACc,iBAAN,GAA0B,CAA1B;;AAEAd,IAAAA,KAAK,CAACe,iBAAN,GAA0B,YAAY;AACpCC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCjB,KAAK,CAACkB,MAAxC,EAAgD,IAAhD;AACD,KAFD;;AAIAlB,IAAAA,KAAK,CAACmB,oBAAN,GAA6B,YAAY;AACvCH,MAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCpB,KAAK,CAACkB,MAA3C,EAAmD,IAAnD;AACD,KAFD;;AAIAlB,IAAAA,KAAK,CAACkB,MAAN,GAAe,YAAY;AACzBlB,MAAAA,KAAK,CAACqB,gBAAN;AACD,KAFD;;AAIArB,IAAAA,KAAK,CAACsB,YAAN,GAAqB,UAAUC,KAAV,EAAiB;AACpC,UAAIC,GAAJ,EAASC,IAAT;;AAEA,UAAIF,KAAK,KAAK,KAAK,CAAnB,EAAsB;AACpBA,QAAAA,KAAK,GAAG,KAAR;AACD;;AAED,aAAOtC,KAAK,CAACyC,aAAN,CAAoB,KAApB,EAA2B;AAChCC,QAAAA,SAAS,EAAEzC,EAAE,CAACK,QAAQ,CAACqC,MAAT,EAAD,GAAqBJ,GAAG,GAAG,EAAN,EAAUA,GAAG,CAACjC,QAAQ,CAACsC,WAAT,CAAqB7B,KAAK,CAACY,KAA3B,CAAD,CAAH,GAAyCW,KAAnD,EAA0DC,GAA/E;AADmB,OAA3B,EAEJxB,KAAK,CAAC8B,WAAN,EAFI,EAEiB7C,KAAK,CAACyC,aAAN,CAAoB,KAApB,EAA2B;AACjDC,QAAAA,SAAS,EAAEzC,EAAE,CAACK,QAAQ,CAACwC,KAAT,EAAD,GAAoBN,IAAI,GAAG,EAAP,EAAWA,IAAI,CAAClC,QAAQ,CAACyC,UAAT,EAAD,CAAJ,GAA8BT,KAAzC,EAAgDE,IAApE;AADoC,OAA3B,EAErBpC,UAAU,CAACW,KAAK,CAACiC,KAAN,CAAYC,QAAb,CAAV,GAAmClC,KAAK,CAACiC,KAAN,CAAYC,QAAZ,CAAqBX,KAArB,CAAnC,GAAiEvB,KAAK,CAACiC,KAAN,CAAYC,QAFxD,CAFjB,CAAP;AAKD,KAZD;;AAcAlC,IAAAA,KAAK,CAACmC,kBAAN,GAA2B,UAAUZ,KAAV,EAAiB;AAC1C,aAAOtC,KAAK,CAACyC,aAAN,CAAoBlC,eAAe,CAAC4C,QAApC,EAA8C,IAA9C,EAAoD,UAAUC,IAAV,EAAgB;AACzE,YAAIC,IAAJ;;AAEA,YAAIC,YAAY,GAAGF,IAAI,CAACE,YAAxB;AACA,eAAOtD,KAAK,CAACyC,aAAN,CAAoB,GAApB,EAAyB;AAC9BC,UAAAA,SAAS,EAAEzC,EAAE,CAACK,QAAQ,CAACiD,KAAT,CAAexC,KAAK,CAACY,KAArB,CAAD,GAA+B0B,IAAI,GAAG,EAAP,EAAWA,IAAI,CAAC/C,QAAQ,CAACgC,KAAT,EAAD,CAAJ,GAAyBA,KAApC,EAA2Ce,IAA1E,EADiB;AAE9BG,UAAAA,OAAO,EAAEF,YAFqB;AAG9B,sBAAY;AAHkB,SAAzB,EAIJtD,KAAK,CAACyC,aAAN,CAAoB,MAApB,EAA4B;AAC7BC,UAAAA,SAAS,EAAEpC,QAAQ,CAACmD,SAAT;AADkB,SAA5B,EAEAzD,KAAK,CAACyC,aAAN,CAAoBtC,SAApB,EAA+B,IAA/B,CAFA,CAJI,CAAP;AAOD,OAXM,CAAP;AAYD,KAbD;;AAeAY,IAAAA,KAAK,CAAC8B,WAAN,GAAoB,YAAY;AAC9B,aAAO7C,KAAK,CAACyC,aAAN,CAAoBvC,MAApB,EAA4B;AACjCwD,QAAAA,IAAI,EAAE,KAD2B;AAEjCC,QAAAA,MAAM,EAAEhD;AAFyB,OAA5B,EAGJI,KAAK,CAACmC,kBAHF,CAAP;AAID,KALD;;AAOAnC,IAAAA,KAAK,CAACqB,gBAAN,GAAyB,YAAY;AACnC,UAAIrB,KAAK,CAACa,OAAV,EAAmB;AACjB,YAAIgC,iBAAiB,GAAG7C,KAAK,CAACa,OAAN,CAAciC,qBAAd,GAAsCC,GAA9D;;AAEA,YAAIpC,YAAY,GAAGX,KAAK,CAACgD,aAAN,GAAsBH,iBAAtB,IAA2ChD,mBAA9D;;AAEAG,QAAAA,KAAK,CAACiD,QAAN,CAAe,UAAUvC,KAAV,EAAiB;AAC9B,iBAAOA,KAAK,CAACC,YAAN,KAAuBA,YAAvB,GAAsC;AAC3CA,YAAAA,YAAY,EAAEA;AAD6B,WAAtC,GAEHD,KAFJ;AAGD,SAJD;AAKD;AACF,KAZD;;AAcAV,IAAAA,KAAK,CAACkD,UAAN,GAAmB,UAAUC,EAAV,EAAc;AAC/BnD,MAAAA,KAAK,CAACa,OAAN,GAAgBsC,EAAhB;AACD,KAFD;;AAIA,WAAOnD,KAAP;AACD;;AAED,MAAIoD,MAAM,GAAGtD,cAAc,CAACuD,SAA5B;;AAEAD,EAAAA,MAAM,CAACE,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,MAAM,GAAG,IAAb;;AAEA,WAAOtE,KAAK,CAACyC,aAAN,CAAoBpC,YAAY,CAAC8C,QAAjC,EAA2C,IAA3C,EAAiD,UAAUxB,KAAV,EAAiB;AACvE2C,MAAAA,MAAM,CAAC3C,KAAP,GAAeA,KAAf;AACA,aAAO2C,MAAM,CAACC,UAAP,EAAP;AACD,KAHM,CAAP;AAID,GAPD;;AASAJ,EAAAA,MAAM,CAACI,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAI7C,YAAY,GAAG,KAAKD,KAAL,CAAWC,YAA9B;AACA,WAAO1B,KAAK,CAACyC,aAAN,CAAoB,KAApB,EAA2B;AAChC+B,MAAAA,GAAG,EAAE,KAAKP;AADsB,KAA3B,EAEJvC,YAAY,GAAG1B,KAAK,CAACyC,aAAN,CAAoBvC,MAApB,EAA4B;AAC5CwD,MAAAA,IAAI,EAAE;AADsC,KAA5B,EAEf,KAAKrB,YAFU,CAAH,GAES,KAAKA,YAAL,EAJjB,CAAP;AAKD,GAPD;;AASAvC,EAAAA,YAAY,CAACe,cAAD,EAAiB,CAAC;AAC5B4D,IAAAA,GAAG,EAAE,eADuB;AAE5BC,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,UAAIhD,YAAY,GAAG,KAAKD,KAAL,CAAWC,YAA9B;;AAEA,UAAI,CAAC,KAAKE,OAAV,EAAmB;AACjB,eAAO,CAAP;AACD;;AAED,UAAI,CAACF,YAAL,EAAmB;AACjB,aAAKG,iBAAL,GAAyB,KAAKD,OAAL,CAAaiC,qBAAb,GAAqCc,MAA9D;AACD;;AAED,aAAO,KAAK9C,iBAAZ;AACD;AAd2B,GAAD,CAAjB,CAAZ;;AAiBA,SAAOhB,cAAP;AACD,CA7HD,CA6HEb,KAAK,CAAC4E,SA7HR,CAFO;AAgIP/D,cAAc,CAACgE,mBAAf,GAAqC,gBAArC","sourcesContent":["import _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport cn from 'classnames';\nimport { Sticky } from \"../../Sticky\";\nimport { CrossIcon } from \"../../../internal/icons/CrossIcon\";\nimport { isFunction } from \"../../../lib/utils\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../SidePage.styles\";\nimport { SidePageContext } from \"../SidePageContext\";\nvar REGULAR_HEADER_PADDING_TOP = 25;\nvar FIXED_HEADER_PADDING_TOP = 13;\nvar FONT_FAMILY_CORRECTION = 1;\nvar CLOSE_ELEMENT_OFFSET = REGULAR_HEADER_PADDING_TOP - FIXED_HEADER_PADDING_TOP - FONT_FAMILY_CORRECTION;\nvar FIXED_HEADER_HEIGHT = 50;\n/**\r\n                               * Шапка сайдпейджа\r\n                               *\r\n                               * @visibleName SidePage.Header\r\n                               */\n\nexport var SidePageHeader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(SidePageHeader, _React$Component);\n\n  function SidePageHeader() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      isReadyToFix: false\n    };\n    _this.theme = void 0;\n    _this.wrapper = null;\n    _this.lastRegularHeight = 0;\n\n    _this.componentDidMount = function () {\n      window.addEventListener('scroll', _this.update, true);\n    };\n\n    _this.componentWillUnmount = function () {\n      window.removeEventListener('scroll', _this.update, true);\n    };\n\n    _this.update = function () {\n      _this.updateReadyToFix();\n    };\n\n    _this.renderHeader = function (fixed) {\n      var _cn, _cn2;\n\n      if (fixed === void 0) {\n        fixed = false;\n      }\n\n      return React.createElement(\"div\", {\n        className: cn(jsStyles.header(), (_cn = {}, _cn[jsStyles.headerFixed(_this.theme)] = fixed, _cn))\n      }, _this.renderClose(), React.createElement(\"div\", {\n        className: cn(jsStyles.title(), (_cn2 = {}, _cn2[jsStyles.titleFixed()] = fixed, _cn2))\n      }, isFunction(_this.props.children) ? _this.props.children(fixed) : _this.props.children));\n    };\n\n    _this.renderCloseContent = function (fixed) {\n      return React.createElement(SidePageContext.Consumer, null, function (_ref) {\n        var _cn3;\n\n        var requestClose = _ref.requestClose;\n        return React.createElement(\"a\", {\n          className: cn(jsStyles.close(_this.theme), (_cn3 = {}, _cn3[jsStyles.fixed()] = fixed, _cn3)),\n          onClick: requestClose,\n          \"data-tid\": \"SidePage__close\"\n        }, React.createElement(\"span\", {\n          className: jsStyles.closeIcon()\n        }, React.createElement(CrossIcon, null)));\n      });\n    };\n\n    _this.renderClose = function () {\n      return React.createElement(Sticky, {\n        side: \"top\",\n        offset: CLOSE_ELEMENT_OFFSET\n      }, _this.renderCloseContent);\n    };\n\n    _this.updateReadyToFix = function () {\n      if (_this.wrapper) {\n        var wrapperScrolledUp = _this.wrapper.getBoundingClientRect().top;\n\n        var isReadyToFix = _this.regularHeight + wrapperScrolledUp <= FIXED_HEADER_HEIGHT;\n\n        _this.setState(function (state) {\n          return state.isReadyToFix !== isReadyToFix ? {\n            isReadyToFix: isReadyToFix\n          } : state;\n        });\n      }\n    };\n\n    _this.wrapperRef = function (el) {\n      _this.wrapper = el;\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePageHeader.prototype;\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var isReadyToFix = this.state.isReadyToFix;\n    return React.createElement(\"div\", {\n      ref: this.wrapperRef\n    }, isReadyToFix ? React.createElement(Sticky, {\n      side: \"top\"\n    }, this.renderHeader) : this.renderHeader());\n  };\n\n  _createClass(SidePageHeader, [{\n    key: \"regularHeight\",\n    get: function get() {\n      var isReadyToFix = this.state.isReadyToFix;\n\n      if (!this.wrapper) {\n        return 0;\n      }\n\n      if (!isReadyToFix) {\n        this.lastRegularHeight = this.wrapper.getBoundingClientRect().height;\n      }\n\n      return this.lastRegularHeight;\n    }\n  }]);\n\n  return SidePageHeader;\n}(React.Component);\nSidePageHeader.__KONTUR_REACT_UI__ = 'SidePageHeader';"]},"metadata":{},"sourceType":"module"}