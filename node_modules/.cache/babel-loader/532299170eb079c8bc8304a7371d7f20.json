{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { getScrollWidth } from \"../../../lib/dom/getScrollWidth\";\nimport { isChrome, isOpera, isSafari } from \"../../../lib/utils\";\nimport { jsStyles } from \"../ScrollContainer.styles\";\nvar PADDING_RIGHT = 30;\nvar MIN_SCROLL_SIZE = 20;\nvar SCROLL_HIDDEN = isChrome || isOpera || isSafari;\nexport var ScrollContainer = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ScrollContainer, _React$Component);\n\n  function ScrollContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      scrollActive: false,\n      scrollSize: 0,\n      scrollPos: 0,\n      // Mouse is moving where big scrollbar can be located.\n      hover: false,\n      // True when scroll is following mouse (mouse down on scroll).\n      scrolling: false,\n      scrollState: 'top'\n    };\n    _this.inner = void 0;\n    _this.scroll = void 0;\n\n    _this.refInner = function (element) {\n      if (!_this.inner && element && _this.props.preventWindowScroll) {\n        element.addEventListener('wheel', _this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.inner && !element) {\n        _this.inner.removeEventListener('wheel', _this.handleInnerScrollWheel);\n      }\n\n      _this.inner = element;\n    };\n\n    _this.refScroll = function (element) {\n      if (!_this.scroll && element) {\n        element.addEventListener('wheel', _this.handleScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.scroll && !element) {\n        _this.scroll.removeEventListener('wheel', _this.handleScrollWheel);\n      }\n\n      _this.scroll = element;\n    };\n\n    _this.handleNativeScroll = function (event) {\n      _this.reflow();\n\n      if (_this.props.preventWindowScroll) {\n        event.preventDefault();\n        return;\n      }\n\n      LayoutEvents.emit();\n    };\n\n    _this.reflow = function () {\n      if (!_this.inner) {\n        return;\n      }\n\n      var containerHeight = _this.inner.offsetHeight;\n      var contentHeight = _this.inner.scrollHeight;\n      var scrollTop = _this.inner.scrollTop;\n      var scrollActive = containerHeight < contentHeight;\n\n      if (!scrollActive && !_this.state.scrollActive) {\n        return;\n      }\n\n      if (scrollActive) {\n        var scrollSize = containerHeight / contentHeight * containerHeight;\n\n        if (scrollSize < MIN_SCROLL_SIZE) {\n          scrollSize = MIN_SCROLL_SIZE;\n        }\n\n        var scrollPos = scrollTop / (contentHeight - containerHeight) * (containerHeight - scrollSize);\n\n        if (_this.state.scrollSize !== scrollSize || _this.state.scrollPos !== scrollPos) {\n          var _scrollState = _this.state.scrollState;\n\n          var updatedScrollState = _this.getImmediateScrollState();\n\n          var scrollParamsToUpdate = {\n            scrollActive: true,\n            scrollSize: scrollSize,\n            scrollPos: scrollPos,\n            scrollState: _scrollState\n          };\n\n          if (updatedScrollState !== _this.state.scrollState) {\n            scrollParamsToUpdate.scrollState = updatedScrollState;\n\n            if (_this.props.onScrollStateChange) {\n              _this.props.onScrollStateChange(updatedScrollState);\n            }\n          }\n\n          _this.setState(scrollParamsToUpdate);\n        }\n      } else {\n        _this.setState({\n          scrollActive: false,\n          scrollSize: 0,\n          scrollPos: 0\n        });\n      }\n    };\n\n    _this.handleScrollMouseDown = function (event) {\n      if (!_this.inner) {\n        return;\n      }\n\n      var target = window.document;\n      var initialY = event.clientY;\n      var initialScrollTop = _this.inner.scrollTop;\n\n      var mouseMove = function mouseMove(mouseMoveEvent) {\n        if (!_this.inner) {\n          return;\n        }\n\n        var ratio = (_this.inner.scrollHeight - _this.inner.offsetHeight) / (_this.inner.offsetHeight - _this.state.scrollSize);\n        var deltaY = (mouseMoveEvent.clientY - initialY) * ratio;\n        _this.inner.scrollTop = initialScrollTop + deltaY;\n\n        if (mouseMoveEvent.preventDefault) {\n          mouseMoveEvent.preventDefault();\n        }\n\n        if (Object.prototype.hasOwnProperty.call(mouseMoveEvent, 'returnValue')) {\n          mouseMoveEvent.returnValue = false;\n        }\n      };\n\n      var mouseUp = function mouseUp() {\n        target.removeEventListener('mousemove', mouseMove);\n        target.removeEventListener('mouseup', mouseUp);\n\n        _this.setState({\n          scrolling: false\n        });\n      };\n\n      target.addEventListener('mousemove', mouseMove);\n      target.addEventListener('mouseup', mouseUp);\n\n      _this.setState({\n        scrolling: true\n      });\n\n      event.preventDefault();\n    };\n\n    _this.handleScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        return;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        return;\n      }\n\n      _this.inner.scrollTop += event.deltaY;\n      event.preventDefault();\n    };\n\n    _this.handleInnerScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        event.preventDefault();\n        return false;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        event.preventDefault();\n        return false;\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      var right = event.currentTarget.getBoundingClientRect().right - event.pageX;\n\n      _this.setHover(right <= 12);\n    };\n\n    _this.handleMouseLeave = function () {\n      _this.setHover(false);\n    };\n\n    return _this;\n  }\n\n  var _proto = ScrollContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.reflow();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.inner) {\n      if (prevProps.preventWindowScroll && !this.props.preventWindowScroll) {\n        this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\n      }\n\n      if (!prevProps.preventWindowScroll && this.props.preventWindowScroll) {\n        this.inner.addEventListener('wheel', this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n    }\n\n    this.reflow();\n  };\n\n  _proto.render = function render() {\n    var state = this.state;\n    var props = this.props;\n    var scroll = null;\n\n    if (state.scrollActive) {\n      var _cn;\n\n      var scrollClass = cn((_cn = {}, _cn[jsStyles.scroll()] = true, _cn[jsStyles.scrollInvert()] = Boolean(props.invert), _cn[jsStyles.scrollHover()] = state.hover || state.scrolling, _cn));\n      var scrollStyle = {\n        top: state.scrollPos,\n        height: state.scrollSize\n      };\n      scroll = React.createElement(\"div\", {\n        ref: this.refScroll,\n        className: scrollClass,\n        style: scrollStyle,\n        onMouseDown: this.handleScrollMouseDown\n      });\n    }\n\n    var innerStyle = {\n      marginRight: this.getMarginRight(),\n      maxHeight: props.maxHeight,\n      paddingRight: PADDING_RIGHT,\n      scrollBehavior: props.scrollBehaviour\n    };\n    return React.createElement(\"div\", {\n      className: jsStyles.root(),\n      onMouseMove: this.handleMouseMove,\n      onMouseLeave: this.handleMouseLeave\n    }, scroll, React.createElement(\"div\", {\n      \"data-tid\": \"ScrollContainer__inner\",\n      className: jsStyles.inner(),\n      style: innerStyle,\n      ref: this.refInner,\n      onScroll: this.handleNativeScroll\n    }, props.children));\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollTo = function scrollTo(element) {\n    if (!element || !this.inner) {\n      return;\n    }\n\n    var maxScroll = element.offsetTop;\n\n    if (this.inner.scrollTop > maxScroll) {\n      this.inner.scrollTop = maxScroll;\n      return;\n    }\n\n    var minScroll = element.offsetTop + element.scrollHeight - this.inner.offsetHeight;\n\n    if (this.inner.scrollTop < minScroll) {\n      this.inner.scrollTop = minScroll;\n    }\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollToTop = function scrollToTop() {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = 0;\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollToBottom = function scrollToBottom() {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = this.inner.scrollHeight - this.inner.offsetHeight;\n  };\n\n  _proto.setHover = function setHover(hover) {\n    if (this.state.hover !== hover) {\n      this.setState({\n        hover: hover\n      });\n    }\n  };\n\n  _proto.getImmediateScrollState = function getImmediateScrollState() {\n    if (!this.inner || this.inner.scrollTop === 0) {\n      return 'top';\n    } else if (this.inner.scrollTop === this.inner.scrollHeight - this.inner.offsetHeight) {\n      return 'bottom';\n    } else {\n      return 'scroll';\n    }\n  };\n\n  _proto.getMarginRight = function getMarginRight() {\n    return -1 * (PADDING_RIGHT + (SCROLL_HIDDEN ? 0 : getScrollWidth()));\n  };\n\n  return ScrollContainer;\n}(React.Component);\nScrollContainer.__KONTUR_REACT_UI__ = 'ScrollContainer';\nScrollContainer.propTypes = {\n  invert: PropTypes.bool,\n  maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  scrollBehaviour: PropTypes.oneOf(['auto', 'smooth']),\n  preventWindowScroll: PropTypes.bool,\n  onScrollStateChange: PropTypes.func\n};\nScrollContainer.defaultProps = {\n  scrollBehaviour: 'auto'\n};","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/ScrollContainer/ScrollContainer/ScrollContainer.js"],"names":["_inheritsLoose","React","PropTypes","cn","LayoutEvents","getScrollWidth","isChrome","isOpera","isSafari","jsStyles","PADDING_RIGHT","MIN_SCROLL_SIZE","SCROLL_HIDDEN","ScrollContainer","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","scrollActive","scrollSize","scrollPos","hover","scrolling","scrollState","inner","scroll","refInner","element","props","preventWindowScroll","addEventListener","handleInnerScrollWheel","passive","removeEventListener","refScroll","handleScrollWheel","handleNativeScroll","event","reflow","preventDefault","emit","containerHeight","offsetHeight","contentHeight","scrollHeight","scrollTop","_scrollState","updatedScrollState","getImmediateScrollState","scrollParamsToUpdate","onScrollStateChange","setState","handleScrollMouseDown","target","window","document","initialY","clientY","initialScrollTop","mouseMove","mouseMoveEvent","ratio","deltaY","Object","prototype","hasOwnProperty","returnValue","mouseUp","WheelEvent","handleMouseMove","right","currentTarget","getBoundingClientRect","pageX","setHover","handleMouseLeave","_proto","componentDidMount","componentDidUpdate","prevProps","render","_cn","scrollClass","scrollInvert","Boolean","invert","scrollHover","scrollStyle","top","height","createElement","ref","className","style","onMouseDown","innerStyle","marginRight","getMarginRight","maxHeight","paddingRight","scrollBehavior","scrollBehaviour","root","onMouseMove","onMouseLeave","onScroll","children","scrollTo","maxScroll","offsetTop","minScroll","scrollToTop","scrollToBottom","Component","__KONTUR_REACT_UI__","propTypes","bool","oneOfType","string","number","oneOf","func","defaultProps"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { getScrollWidth } from \"../../../lib/dom/getScrollWidth\";\nimport { isChrome, isOpera, isSafari } from \"../../../lib/utils\";\nimport { jsStyles } from \"../ScrollContainer.styles\";\nvar PADDING_RIGHT = 30;\nvar MIN_SCROLL_SIZE = 20;\nvar SCROLL_HIDDEN = isChrome || isOpera || isSafari;\nexport var ScrollContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(ScrollContainer, _React$Component);\n\n  function ScrollContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      scrollActive: false,\n      scrollSize: 0,\n      scrollPos: 0,\n      // Mouse is moving where big scrollbar can be located.\n      hover: false,\n      // True when scroll is following mouse (mouse down on scroll).\n      scrolling: false,\n      scrollState: 'top'\n    };\n    _this.inner = void 0;\n    _this.scroll = void 0;\n\n    _this.refInner = function (element) {\n      if (!_this.inner && element && _this.props.preventWindowScroll) {\n        element.addEventListener('wheel', _this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.inner && !element) {\n        _this.inner.removeEventListener('wheel', _this.handleInnerScrollWheel);\n      }\n\n      _this.inner = element;\n    };\n\n    _this.refScroll = function (element) {\n      if (!_this.scroll && element) {\n        element.addEventListener('wheel', _this.handleScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.scroll && !element) {\n        _this.scroll.removeEventListener('wheel', _this.handleScrollWheel);\n      }\n\n      _this.scroll = element;\n    };\n\n    _this.handleNativeScroll = function (event) {\n      _this.reflow();\n\n      if (_this.props.preventWindowScroll) {\n        event.preventDefault();\n        return;\n      }\n\n      LayoutEvents.emit();\n    };\n\n    _this.reflow = function () {\n      if (!_this.inner) {\n        return;\n      }\n\n      var containerHeight = _this.inner.offsetHeight;\n      var contentHeight = _this.inner.scrollHeight;\n      var scrollTop = _this.inner.scrollTop;\n      var scrollActive = containerHeight < contentHeight;\n\n      if (!scrollActive && !_this.state.scrollActive) {\n        return;\n      }\n\n      if (scrollActive) {\n        var scrollSize = containerHeight / contentHeight * containerHeight;\n\n        if (scrollSize < MIN_SCROLL_SIZE) {\n          scrollSize = MIN_SCROLL_SIZE;\n        }\n\n        var scrollPos = scrollTop / (contentHeight - containerHeight) * (containerHeight - scrollSize);\n\n        if (_this.state.scrollSize !== scrollSize || _this.state.scrollPos !== scrollPos) {\n          var _scrollState = _this.state.scrollState;\n\n          var updatedScrollState = _this.getImmediateScrollState();\n\n          var scrollParamsToUpdate = {\n            scrollActive: true,\n            scrollSize: scrollSize,\n            scrollPos: scrollPos,\n            scrollState: _scrollState\n          };\n\n          if (updatedScrollState !== _this.state.scrollState) {\n            scrollParamsToUpdate.scrollState = updatedScrollState;\n\n            if (_this.props.onScrollStateChange) {\n              _this.props.onScrollStateChange(updatedScrollState);\n            }\n          }\n\n          _this.setState(scrollParamsToUpdate);\n        }\n      } else {\n        _this.setState({\n          scrollActive: false,\n          scrollSize: 0,\n          scrollPos: 0\n        });\n      }\n    };\n\n    _this.handleScrollMouseDown = function (event) {\n      if (!_this.inner) {\n        return;\n      }\n\n      var target = window.document;\n      var initialY = event.clientY;\n      var initialScrollTop = _this.inner.scrollTop;\n\n      var mouseMove = function mouseMove(mouseMoveEvent) {\n        if (!_this.inner) {\n          return;\n        }\n\n        var ratio = (_this.inner.scrollHeight - _this.inner.offsetHeight) / (_this.inner.offsetHeight - _this.state.scrollSize);\n        var deltaY = (mouseMoveEvent.clientY - initialY) * ratio;\n        _this.inner.scrollTop = initialScrollTop + deltaY;\n\n        if (mouseMoveEvent.preventDefault) {\n          mouseMoveEvent.preventDefault();\n        }\n\n        if (Object.prototype.hasOwnProperty.call(mouseMoveEvent, 'returnValue')) {\n          mouseMoveEvent.returnValue = false;\n        }\n      };\n\n      var mouseUp = function mouseUp() {\n        target.removeEventListener('mousemove', mouseMove);\n        target.removeEventListener('mouseup', mouseUp);\n\n        _this.setState({\n          scrolling: false\n        });\n      };\n\n      target.addEventListener('mousemove', mouseMove);\n      target.addEventListener('mouseup', mouseUp);\n\n      _this.setState({\n        scrolling: true\n      });\n\n      event.preventDefault();\n    };\n\n    _this.handleScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        return;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        return;\n      }\n\n      _this.inner.scrollTop += event.deltaY;\n      event.preventDefault();\n    };\n\n    _this.handleInnerScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        event.preventDefault();\n        return false;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        event.preventDefault();\n        return false;\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      var right = event.currentTarget.getBoundingClientRect().right - event.pageX;\n\n      _this.setHover(right <= 12);\n    };\n\n    _this.handleMouseLeave = function () {\n      _this.setHover(false);\n    };\n\n    return _this;\n  }\n\n  var _proto = ScrollContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.reflow();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.inner) {\n      if (prevProps.preventWindowScroll && !this.props.preventWindowScroll) {\n        this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\n      }\n\n      if (!prevProps.preventWindowScroll && this.props.preventWindowScroll) {\n        this.inner.addEventListener('wheel', this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n    }\n\n    this.reflow();\n  };\n\n  _proto.render = function render() {\n    var state = this.state;\n    var props = this.props;\n    var scroll = null;\n\n    if (state.scrollActive) {\n      var _cn;\n\n      var scrollClass = cn((_cn = {}, _cn[jsStyles.scroll()] = true, _cn[jsStyles.scrollInvert()] = Boolean(props.invert), _cn[jsStyles.scrollHover()] = state.hover || state.scrolling, _cn));\n      var scrollStyle = {\n        top: state.scrollPos,\n        height: state.scrollSize\n      };\n      scroll = React.createElement(\"div\", {\n        ref: this.refScroll,\n        className: scrollClass,\n        style: scrollStyle,\n        onMouseDown: this.handleScrollMouseDown\n      });\n    }\n\n    var innerStyle = {\n      marginRight: this.getMarginRight(),\n      maxHeight: props.maxHeight,\n      paddingRight: PADDING_RIGHT,\n      scrollBehavior: props.scrollBehaviour\n    };\n    return React.createElement(\"div\", {\n      className: jsStyles.root(),\n      onMouseMove: this.handleMouseMove,\n      onMouseLeave: this.handleMouseLeave\n    }, scroll, React.createElement(\"div\", {\n      \"data-tid\": \"ScrollContainer__inner\",\n      className: jsStyles.inner(),\n      style: innerStyle,\n      ref: this.refInner,\n      onScroll: this.handleNativeScroll\n    }, props.children));\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollTo = function scrollTo(element) {\n    if (!element || !this.inner) {\n      return;\n    }\n\n    var maxScroll = element.offsetTop;\n\n    if (this.inner.scrollTop > maxScroll) {\n      this.inner.scrollTop = maxScroll;\n      return;\n    }\n\n    var minScroll = element.offsetTop + element.scrollHeight - this.inner.offsetHeight;\n\n    if (this.inner.scrollTop < minScroll) {\n      this.inner.scrollTop = minScroll;\n    }\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollToTop = function scrollToTop() {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = 0;\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.scrollToBottom = function scrollToBottom() {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = this.inner.scrollHeight - this.inner.offsetHeight;\n  };\n\n  _proto.setHover = function setHover(hover) {\n    if (this.state.hover !== hover) {\n      this.setState({\n        hover: hover\n      });\n    }\n  };\n\n  _proto.getImmediateScrollState = function getImmediateScrollState() {\n    if (!this.inner || this.inner.scrollTop === 0) {\n      return 'top';\n    } else if (this.inner.scrollTop === this.inner.scrollHeight - this.inner.offsetHeight) {\n      return 'bottom';\n    } else {\n      return 'scroll';\n    }\n  };\n\n  _proto.getMarginRight = function getMarginRight() {\n    return -1 * (PADDING_RIGHT + (SCROLL_HIDDEN ? 0 : getScrollWidth()));\n  };\n\n  return ScrollContainer;\n}(React.Component);\nScrollContainer.__KONTUR_REACT_UI__ = 'ScrollContainer';\nScrollContainer.propTypes = {\n  invert: PropTypes.bool,\n  maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  scrollBehaviour: PropTypes.oneOf(['auto', 'smooth']),\n  preventWindowScroll: PropTypes.bool,\n  onScrollStateChange: PropTypes.func\n};\nScrollContainer.defaultProps = {\n  scrollBehaviour: 'auto'\n};"]},"metadata":{},"sourceType":"module"}