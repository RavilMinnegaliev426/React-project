{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport FocusLock from 'react-focus-lock';\nimport cn from 'classnames';\nimport { isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { stopPropagation } from \"../../../lib/events/stopPropagation\";\nimport { HideBodyVerticalScroll } from \"../../../internal/HideBodyVerticalScroll\";\nimport { ModalStack } from \"../../../lib/ModalStack\";\nimport { ResizeDetector } from \"../../../internal/ResizeDetector\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { isIE11 } from \"../../../lib/utils\";\nimport { ModalContext } from \"../ModalContext\";\nimport { ModalFooter } from \"../ModalFooter\";\nimport { ModalHeader } from \"../ModalHeader\";\nimport { isBody, isFooter, isHeader } from \"../helpers\";\nimport { ModalBody } from \"../ModalBody\";\nimport { ModalClose } from \"../ModalClose\";\nimport { jsStyles } from \"../Modal.styles\";\nvar mountedModalsCount = 0;\n/**\r\n                             * Модальное окно\r\n                             *\r\n                             * Содержит в себе три компоненты: **Modal.Header**,\r\n                             * **Modal.Body** и **Modal.Footer**\r\n                             *\r\n                             * Для отображения серой плашки в футере в компонент\r\n                             * **Footer** необходимо передать пропс **panel**\r\n                             *\r\n                             * Для отключения прилипания шапки и футера\r\n                             * в соответствующий компонет нужно передать\r\n                             * проп **sticky** со значением **false**\r\n                             * (по-умолчанию прилипание включено)\r\n                             */\n\nexport var Modal = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Modal, _React$Component);\n\n  function Modal() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      stackPosition: 0,\n      horizontalScroll: false\n    };\n    _this.theme = void 0;\n    _this.stackSubscription = null;\n    _this.containerNode = null;\n    _this.mouseDownTarget = null;\n    _this.mouseUpTarget = null;\n\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.refContainer = function (center) {\n      _this.containerNode = center;\n    };\n\n    _this.handleStackChange = function (stack) {\n      _this.setState({\n        stackPosition: stack.indexOf(_assertThisInitialized(_this))\n      });\n    };\n\n    _this.handleContainerMouseDown = function (event) {\n      _this.mouseDownTarget = event.target;\n    };\n\n    _this.handleContainerMouseUp = function (event) {\n      _this.mouseUpTarget = event.target;\n    };\n\n    _this.handleContainerClick = function (event) {\n      if (!_this.props.ignoreBackgroundClick) {\n        var target = event.target,\n            currentTarget = event.currentTarget;\n\n        if (target === currentTarget && _this.mouseDownTarget === currentTarget && _this.mouseUpTarget === currentTarget) {\n          _this.requestClose();\n        }\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n\n      if (isKeyEscape(e)) {\n        stopPropagation(e);\n\n        _this.requestClose();\n      }\n    };\n\n    _this.checkHorizontalScrollAppearance = function () {\n      var hasScroll = false;\n\n      if (_this.containerNode) {\n        var containerClientWidth = _this.containerNode.clientWidth;\n        var containerScrollWidth = _this.containerNode.scrollWidth;\n        hasScroll = containerClientWidth < containerScrollWidth;\n      }\n\n      if (hasScroll && !_this.state.horizontalScroll) {\n        _this.setState({\n          horizontalScroll: true\n        });\n      } else if (_this.state.horizontalScroll) {\n        _this.setState({\n          horizontalScroll: false\n        });\n      }\n    };\n\n    _this.handleResize = function (event) {\n      LayoutEvents.emit();\n    };\n\n    return _this;\n  }\n\n  var _proto = Modal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\n\n    if (mountedModalsCount === 0) {\n      window.addEventListener('resize', this.checkHorizontalScrollAppearance);\n    }\n\n    mountedModalsCount++;\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.checkHorizontalScrollAppearance();\n\n    if (this.containerNode) {\n      this.containerNode.addEventListener('scroll', LayoutEvents.emit);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (--mountedModalsCount === 0) {\n      window.removeEventListener('resize', this.checkHorizontalScrollAppearance);\n      LayoutEvents.emit();\n    }\n\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n\n    ModalStack.remove(this);\n\n    if (this.containerNode) {\n      this.containerNode.removeEventListener('scroll', LayoutEvents.emit);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn;\n\n    var hasHeader = false;\n    var hasFooter = false;\n    var hasPanel = false;\n    React.Children.toArray(this.props.children).forEach(function (child) {\n      if (isHeader(child)) {\n        hasHeader = true;\n      }\n\n      if (isFooter(child)) {\n        hasFooter = true;\n\n        if (child.props.panel) {\n          hasPanel = true;\n        }\n      }\n    });\n    var modalContextProps = {\n      hasHeader: hasHeader,\n      horizontalScroll: this.state.horizontalScroll\n    };\n\n    if (hasHeader && !this.props.noClose) {\n      modalContextProps.close = {\n        disableClose: this.props.disableClose,\n        requestClose: this.requestClose\n      };\n    }\n\n    if (!hasFooter) {\n      modalContextProps.additionalPadding = true;\n    }\n\n    if (hasFooter && hasPanel) {\n      modalContextProps.additionalPadding = true;\n    }\n\n    var style = {};\n    var containerStyle = {};\n\n    if (this.props.width) {\n      style.width = this.props.width;\n    } else {\n      containerStyle.width = 'auto';\n    }\n\n    return React.createElement(RenderContainer, null, React.createElement(ZIndex, {\n      priority: 'Modal',\n      className: jsStyles.root()\n    }, React.createElement(HideBodyVerticalScroll, null), this.state.stackPosition === 0 && React.createElement(\"div\", {\n      className: jsStyles.bg(this.theme)\n    }), React.createElement(\"div\", {\n      ref: this.refContainer,\n      className: jsStyles.container(),\n      onMouseDown: this.handleContainerMouseDown,\n      onMouseUp: this.handleContainerMouseUp,\n      onClick: this.handleContainerClick,\n      \"data-tid\": \"modal-container\"\n    }, React.createElement(\"div\", {\n      className: cn((_cn = {}, _cn[jsStyles.centerContainer(this.theme)] = true, _cn[jsStyles.alignTop(this.theme)] = Boolean(this.props.alignTop), _cn)),\n      style: containerStyle,\n      \"data-tid\": \"modal-content\"\n    }, React.createElement(\"div\", {\n      className: jsStyles.window(this.theme),\n      style: style\n    }, React.createElement(ResizeDetector, {\n      onResize: this.handleResize\n    }, React.createElement(FocusLock, {\n      disabled: this.props.disableFocusLock,\n      autoFocus: false\n    }, !hasHeader && !this.props.noClose ? React.createElement(ZIndex, {\n      priority: 'ModalCross',\n      className: jsStyles.closeWrapper()\n    }, React.createElement(ModalClose, {\n      requestClose: this.requestClose,\n      disableClose: this.props.disableClose\n    })) : null, React.createElement(ModalContext.Provider, {\n      value: modalContextProps\n    }, this.props.children))))))));\n  };\n\n  return Modal;\n}(React.Component);\nModal.__KONTUR_REACT_UI__ = 'Modal';\nModal.Header = ModalHeader;\nModal.Body = ModalBody;\nModal.Footer = ModalFooter;\nModal.propTypes = {\n  children: function children(props, propName, componentName) {\n    if (React.Children.toArray(props[propName]).some(function (child) {\n      return !isHeader(child) && !isBody(child) && !isFooter(child);\n    })) {\n      return new Error(\"Only 'Header/Body/Footer' components are allowed for '\" + propName + \"' prop of '\" + componentName + \"' component\");\n    }\n  }\n};\nModal.defaultProps = {\n  // NOTE: в ie нормально не работает\n  disableFocusLock: isIE11\n};","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/Modal/Modal/Modal.js"],"names":["_assertThisInitialized","_inheritsLoose","React","FocusLock","cn","isKeyEscape","LayoutEvents","RenderContainer","ZIndex","stopPropagation","HideBodyVerticalScroll","ModalStack","ResizeDetector","ThemeContext","isIE11","ModalContext","ModalFooter","ModalHeader","isBody","isFooter","isHeader","ModalBody","ModalClose","jsStyles","mountedModalsCount","Modal","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","stackPosition","horizontalScroll","theme","stackSubscription","containerNode","mouseDownTarget","mouseUpTarget","requestClose","props","disableClose","onClose","refContainer","center","handleStackChange","stack","setState","indexOf","handleContainerMouseDown","event","target","handleContainerMouseUp","handleContainerClick","ignoreBackgroundClick","currentTarget","handleKeyDown","e","checkHorizontalScrollAppearance","hasScroll","containerClientWidth","clientWidth","containerScrollWidth","scrollWidth","handleResize","emit","_proto","prototype","componentDidMount","add","window","addEventListener","componentWillUnmount","removeEventListener","remove","render","_this2","createElement","Consumer","renderMain","_cn","hasHeader","hasFooter","hasPanel","Children","toArray","children","forEach","child","panel","modalContextProps","noClose","close","additionalPadding","style","containerStyle","width","priority","className","root","bg","ref","container","onMouseDown","onMouseUp","onClick","centerContainer","alignTop","Boolean","onResize","disabled","disableFocusLock","autoFocus","closeWrapper","Provider","value","Component","__KONTUR_REACT_UI__","Header","Body","Footer","propTypes","propName","componentName","some","Error","defaultProps"],"mappings":"AAAA,OAAOA,sBAAP,MAAmC,kDAAnC;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,SAASC,WAAT,QAA4B,0CAA5B;AACA,OAAO,KAAKC,YAAZ,MAA8B,2BAA9B;AACA,SAASC,eAAT,QAAgC,mCAAhC;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,eAAT,QAAgC,qCAAhC;AACA,SAASC,sBAAT,QAAuC,0CAAvC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,QAA3B,QAA2C,YAA3C;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,IAAIC,kBAAkB,GAAG,CAAzB;AACA;;;;;;;;;;;;;;;AAeA,OAAO,IAAIC,KAAK,GAChB,aACA,UAAUC,gBAAV,EAA4B;AAC1BzB,EAAAA,cAAc,CAACwB,KAAD,EAAQC,gBAAR,CAAd;;AAEA,WAASD,KAAT,GAAiB;AACf,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,gBAAgB,CAACQ,IAAjB,CAAsBC,KAAtB,CAA4BT,gBAA5B,EAA8C,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAA9E;AACAJ,IAAAA,KAAK,CAACU,KAAN,GAAc;AACZC,MAAAA,aAAa,EAAE,CADH;AAEZC,MAAAA,gBAAgB,EAAE;AAFN,KAAd;AAIAZ,IAAAA,KAAK,CAACa,KAAN,GAAc,KAAK,CAAnB;AACAb,IAAAA,KAAK,CAACc,iBAAN,GAA0B,IAA1B;AACAd,IAAAA,KAAK,CAACe,aAAN,GAAsB,IAAtB;AACAf,IAAAA,KAAK,CAACgB,eAAN,GAAwB,IAAxB;AACAhB,IAAAA,KAAK,CAACiB,aAAN,GAAsB,IAAtB;;AAEAjB,IAAAA,KAAK,CAACkB,YAAN,GAAqB,YAAY;AAC/B,UAAIlB,KAAK,CAACmB,KAAN,CAAYC,YAAhB,EAA8B;AAC5B;AACD;;AAED,UAAIpB,KAAK,CAACmB,KAAN,CAAYE,OAAhB,EAAyB;AACvBrB,QAAAA,KAAK,CAACmB,KAAN,CAAYE,OAAZ;AACD;AACF,KARD;;AAUArB,IAAAA,KAAK,CAACsB,YAAN,GAAqB,UAAUC,MAAV,EAAkB;AACrCvB,MAAAA,KAAK,CAACe,aAAN,GAAsBQ,MAAtB;AACD,KAFD;;AAIAvB,IAAAA,KAAK,CAACwB,iBAAN,GAA0B,UAAUC,KAAV,EAAiB;AACzCzB,MAAAA,KAAK,CAAC0B,QAAN,CAAe;AACbf,QAAAA,aAAa,EAAEc,KAAK,CAACE,OAAN,CAActD,sBAAsB,CAAC2B,KAAD,CAApC;AADF,OAAf;AAGD,KAJD;;AAMAA,IAAAA,KAAK,CAAC4B,wBAAN,GAAiC,UAAUC,KAAV,EAAiB;AAChD7B,MAAAA,KAAK,CAACgB,eAAN,GAAwBa,KAAK,CAACC,MAA9B;AACD,KAFD;;AAIA9B,IAAAA,KAAK,CAAC+B,sBAAN,GAA+B,UAAUF,KAAV,EAAiB;AAC9C7B,MAAAA,KAAK,CAACiB,aAAN,GAAsBY,KAAK,CAACC,MAA5B;AACD,KAFD;;AAIA9B,IAAAA,KAAK,CAACgC,oBAAN,GAA6B,UAAUH,KAAV,EAAiB;AAC5C,UAAI,CAAC7B,KAAK,CAACmB,KAAN,CAAYc,qBAAjB,EAAwC;AACtC,YAAIH,MAAM,GAAGD,KAAK,CAACC,MAAnB;AAAA,YACII,aAAa,GAAGL,KAAK,CAACK,aAD1B;;AAGA,YAAIJ,MAAM,KAAKI,aAAX,IAA4BlC,KAAK,CAACgB,eAAN,KAA0BkB,aAAtD,IAAuElC,KAAK,CAACiB,aAAN,KAAwBiB,aAAnG,EAAkH;AAChHlC,UAAAA,KAAK,CAACkB,YAAN;AACD;AACF;AACF,KATD;;AAWAlB,IAAAA,KAAK,CAACmC,aAAN,GAAsB,UAAUC,CAAV,EAAa;AACjC,UAAIpC,KAAK,CAACU,KAAN,CAAYC,aAAZ,KAA8B,CAAlC,EAAqC;AACnC;AACD;;AAED,UAAIjC,WAAW,CAAC0D,CAAD,CAAf,EAAoB;AAClBtD,QAAAA,eAAe,CAACsD,CAAD,CAAf;;AAEApC,QAAAA,KAAK,CAACkB,YAAN;AACD;AACF,KAVD;;AAYAlB,IAAAA,KAAK,CAACqC,+BAAN,GAAwC,YAAY;AAClD,UAAIC,SAAS,GAAG,KAAhB;;AAEA,UAAItC,KAAK,CAACe,aAAV,EAAyB;AACvB,YAAIwB,oBAAoB,GAAGvC,KAAK,CAACe,aAAN,CAAoByB,WAA/C;AACA,YAAIC,oBAAoB,GAAGzC,KAAK,CAACe,aAAN,CAAoB2B,WAA/C;AACAJ,QAAAA,SAAS,GAAGC,oBAAoB,GAAGE,oBAAnC;AACD;;AAED,UAAIH,SAAS,IAAI,CAACtC,KAAK,CAACU,KAAN,CAAYE,gBAA9B,EAAgD;AAC9CZ,QAAAA,KAAK,CAAC0B,QAAN,CAAe;AACbd,UAAAA,gBAAgB,EAAE;AADL,SAAf;AAGD,OAJD,MAIO,IAAIZ,KAAK,CAACU,KAAN,CAAYE,gBAAhB,EAAkC;AACvCZ,QAAAA,KAAK,CAAC0B,QAAN,CAAe;AACbd,UAAAA,gBAAgB,EAAE;AADL,SAAf;AAGD;AACF,KAlBD;;AAoBAZ,IAAAA,KAAK,CAAC2C,YAAN,GAAqB,UAAUd,KAAV,EAAiB;AACpClD,MAAAA,YAAY,CAACiE,IAAb;AACD,KAFD;;AAIA,WAAO5C,KAAP;AACD;;AAED,MAAI6C,MAAM,GAAG/C,KAAK,CAACgD,SAAnB;;AAEAD,EAAAA,MAAM,CAACE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKjC,iBAAL,GAAyB9B,UAAU,CAACgE,GAAX,CAAe,IAAf,EAAqB,KAAKxB,iBAA1B,CAAzB;;AAEA,QAAI3B,kBAAkB,KAAK,CAA3B,EAA8B;AAC5BoD,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKb,+BAAvC;AACD;;AAEDxC,IAAAA,kBAAkB;AAClBoD,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKf,aAAxC;AACA,SAAKE,+BAAL;;AAEA,QAAI,KAAKtB,aAAT,EAAwB;AACtB,WAAKA,aAAL,CAAmBmC,gBAAnB,CAAoC,QAApC,EAA8CvE,YAAY,CAACiE,IAA3D;AACD;AACF,GAdD;;AAgBAC,EAAAA,MAAM,CAACM,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,QAAI,EAAEtD,kBAAF,KAAyB,CAA7B,EAAgC;AAC9BoD,MAAAA,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqC,KAAKf,+BAA1C;AACA1D,MAAAA,YAAY,CAACiE,IAAb;AACD;;AAEDK,IAAAA,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsC,KAAKjB,aAA3C;;AAEA,QAAI,KAAKrB,iBAAL,IAA0B,IAA9B,EAAoC;AAClC,WAAKA,iBAAL,CAAuBuC,MAAvB;AACD;;AAEDrE,IAAAA,UAAU,CAACqE,MAAX,CAAkB,IAAlB;;AAEA,QAAI,KAAKtC,aAAT,EAAwB;AACtB,WAAKA,aAAL,CAAmBqC,mBAAnB,CAAuC,QAAvC,EAAiDzE,YAAY,CAACiE,IAA9D;AACD;AACF,GAjBD;;AAmBAC,EAAAA,MAAM,CAACS,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,MAAM,GAAG,IAAb;;AAEA,WAAOhF,KAAK,CAACiF,aAAN,CAAoBtE,YAAY,CAACuE,QAAjC,EAA2C,IAA3C,EAAiD,UAAU5C,KAAV,EAAiB;AACvE0C,MAAAA,MAAM,CAAC1C,KAAP,GAAeA,KAAf;AACA,aAAO0C,MAAM,CAACG,UAAP,EAAP;AACD,KAHM,CAAP;AAID,GAPD;;AASAb,EAAAA,MAAM,CAACa,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAIC,GAAJ;;AAEA,QAAIC,SAAS,GAAG,KAAhB;AACA,QAAIC,SAAS,GAAG,KAAhB;AACA,QAAIC,QAAQ,GAAG,KAAf;AACAvF,IAAAA,KAAK,CAACwF,QAAN,CAAeC,OAAf,CAAuB,KAAK7C,KAAL,CAAW8C,QAAlC,EAA4CC,OAA5C,CAAoD,UAAUC,KAAV,EAAiB;AACnE,UAAI1E,QAAQ,CAAC0E,KAAD,CAAZ,EAAqB;AACnBP,QAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,UAAIpE,QAAQ,CAAC2E,KAAD,CAAZ,EAAqB;AACnBN,QAAAA,SAAS,GAAG,IAAZ;;AAEA,YAAIM,KAAK,CAAChD,KAAN,CAAYiD,KAAhB,EAAuB;AACrBN,UAAAA,QAAQ,GAAG,IAAX;AACD;AACF;AACF,KAZD;AAaA,QAAIO,iBAAiB,GAAG;AACtBT,MAAAA,SAAS,EAAEA,SADW;AAEtBhD,MAAAA,gBAAgB,EAAE,KAAKF,KAAL,CAAWE;AAFP,KAAxB;;AAKA,QAAIgD,SAAS,IAAI,CAAC,KAAKzC,KAAL,CAAWmD,OAA7B,EAAsC;AACpCD,MAAAA,iBAAiB,CAACE,KAAlB,GAA0B;AACxBnD,QAAAA,YAAY,EAAE,KAAKD,KAAL,CAAWC,YADD;AAExBF,QAAAA,YAAY,EAAE,KAAKA;AAFK,OAA1B;AAID;;AAED,QAAI,CAAC2C,SAAL,EAAgB;AACdQ,MAAAA,iBAAiB,CAACG,iBAAlB,GAAsC,IAAtC;AACD;;AAED,QAAIX,SAAS,IAAIC,QAAjB,EAA2B;AACzBO,MAAAA,iBAAiB,CAACG,iBAAlB,GAAsC,IAAtC;AACD;;AAED,QAAIC,KAAK,GAAG,EAAZ;AACA,QAAIC,cAAc,GAAG,EAArB;;AAEA,QAAI,KAAKvD,KAAL,CAAWwD,KAAf,EAAsB;AACpBF,MAAAA,KAAK,CAACE,KAAN,GAAc,KAAKxD,KAAL,CAAWwD,KAAzB;AACD,KAFD,MAEO;AACLD,MAAAA,cAAc,CAACC,KAAf,GAAuB,MAAvB;AACD;;AAED,WAAOpG,KAAK,CAACiF,aAAN,CAAoB5E,eAApB,EAAqC,IAArC,EAA2CL,KAAK,CAACiF,aAAN,CAAoB3E,MAApB,EAA4B;AAC5E+F,MAAAA,QAAQ,EAAE,OADkE;AAE5EC,MAAAA,SAAS,EAAEjF,QAAQ,CAACkF,IAAT;AAFiE,KAA5B,EAG/CvG,KAAK,CAACiF,aAAN,CAAoBzE,sBAApB,EAA4C,IAA5C,CAH+C,EAGI,KAAK2B,KAAL,CAAWC,aAAX,KAA6B,CAA7B,IAAkCpC,KAAK,CAACiF,aAAN,CAAoB,KAApB,EAA2B;AACjHqB,MAAAA,SAAS,EAAEjF,QAAQ,CAACmF,EAAT,CAAY,KAAKlE,KAAjB;AADsG,KAA3B,CAHtC,EAK9CtC,KAAK,CAACiF,aAAN,CAAoB,KAApB,EAA2B;AAC7BwB,MAAAA,GAAG,EAAE,KAAK1D,YADmB;AAE7BuD,MAAAA,SAAS,EAAEjF,QAAQ,CAACqF,SAAT,EAFkB;AAG7BC,MAAAA,WAAW,EAAE,KAAKtD,wBAHW;AAI7BuD,MAAAA,SAAS,EAAE,KAAKpD,sBAJa;AAK7BqD,MAAAA,OAAO,EAAE,KAAKpD,oBALe;AAM7B,kBAAY;AANiB,KAA3B,EAODzD,KAAK,CAACiF,aAAN,CAAoB,KAApB,EAA2B;AAC5BqB,MAAAA,SAAS,EAAEpG,EAAE,EAAEkF,GAAG,GAAG,EAAN,EAAUA,GAAG,CAAC/D,QAAQ,CAACyF,eAAT,CAAyB,KAAKxE,KAA9B,CAAD,CAAH,GAA4C,IAAtD,EAA4D8C,GAAG,CAAC/D,QAAQ,CAAC0F,QAAT,CAAkB,KAAKzE,KAAvB,CAAD,CAAH,GAAqC0E,OAAO,CAAC,KAAKpE,KAAL,CAAWmE,QAAZ,CAAxG,EAA+H3B,GAAjI,EADe;AAE5Bc,MAAAA,KAAK,EAAEC,cAFqB;AAG5B,kBAAY;AAHgB,KAA3B,EAIAnG,KAAK,CAACiF,aAAN,CAAoB,KAApB,EAA2B;AAC5BqB,MAAAA,SAAS,EAAEjF,QAAQ,CAACqD,MAAT,CAAgB,KAAKpC,KAArB,CADiB;AAE5B4D,MAAAA,KAAK,EAAEA;AAFqB,KAA3B,EAGAlG,KAAK,CAACiF,aAAN,CAAoBvE,cAApB,EAAoC;AACrCuG,MAAAA,QAAQ,EAAE,KAAK7C;AADsB,KAApC,EAEApE,KAAK,CAACiF,aAAN,CAAoBhF,SAApB,EAA+B;AAChCiH,MAAAA,QAAQ,EAAE,KAAKtE,KAAL,CAAWuE,gBADW;AAEhCC,MAAAA,SAAS,EAAE;AAFqB,KAA/B,EAGA,CAAC/B,SAAD,IAAc,CAAC,KAAKzC,KAAL,CAAWmD,OAA1B,GAAoC/F,KAAK,CAACiF,aAAN,CAAoB3E,MAApB,EAA4B;AACjE+F,MAAAA,QAAQ,EAAE,YADuD;AAEjEC,MAAAA,SAAS,EAAEjF,QAAQ,CAACgG,YAAT;AAFsD,KAA5B,EAGpCrH,KAAK,CAACiF,aAAN,CAAoB7D,UAApB,EAAgC;AACjCuB,MAAAA,YAAY,EAAE,KAAKA,YADc;AAEjCE,MAAAA,YAAY,EAAE,KAAKD,KAAL,CAAWC;AAFQ,KAAhC,CAHoC,CAApC,GAMG,IATH,EASS7C,KAAK,CAACiF,aAAN,CAAoBpE,YAAY,CAACyG,QAAjC,EAA2C;AACrDC,MAAAA,KAAK,EAAEzB;AAD8C,KAA3C,EAET,KAAKlD,KAAL,CAAW8C,QAFF,CATT,CAFA,CAHA,CAJA,CAPC,CAL8C,CAA3C,CAAP;AAiCD,GAjFD;;AAmFA,SAAOnE,KAAP;AACD,CArOD,CAqOEvB,KAAK,CAACwH,SArOR,CAFO;AAwOPjG,KAAK,CAACkG,mBAAN,GAA4B,OAA5B;AACAlG,KAAK,CAACmG,MAAN,GAAe3G,WAAf;AACAQ,KAAK,CAACoG,IAAN,GAAaxG,SAAb;AACAI,KAAK,CAACqG,MAAN,GAAe9G,WAAf;AACAS,KAAK,CAACsG,SAAN,GAAkB;AAChBnC,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB9C,KAAlB,EAAyBkF,QAAzB,EAAmCC,aAAnC,EAAkD;AAC1D,QAAI/H,KAAK,CAACwF,QAAN,CAAeC,OAAf,CAAuB7C,KAAK,CAACkF,QAAD,CAA5B,EAAwCE,IAAxC,CAA6C,UAAUpC,KAAV,EAAiB;AAChE,aAAO,CAAC1E,QAAQ,CAAC0E,KAAD,CAAT,IAAoB,CAAC5E,MAAM,CAAC4E,KAAD,CAA3B,IAAsC,CAAC3E,QAAQ,CAAC2E,KAAD,CAAtD;AACD,KAFG,CAAJ,EAEI;AACF,aAAO,IAAIqC,KAAJ,CAAU,2DAA2DH,QAA3D,GAAsE,aAAtE,GAAsFC,aAAtF,GAAsG,aAAhH,CAAP;AACD;AACF;AAPe,CAAlB;AASAxG,KAAK,CAAC2G,YAAN,GAAqB;AACnB;AACAf,EAAAA,gBAAgB,EAAEvG;AAFC,CAArB","sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport FocusLock from 'react-focus-lock';\nimport cn from 'classnames';\nimport { isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { stopPropagation } from \"../../../lib/events/stopPropagation\";\nimport { HideBodyVerticalScroll } from \"../../../internal/HideBodyVerticalScroll\";\nimport { ModalStack } from \"../../../lib/ModalStack\";\nimport { ResizeDetector } from \"../../../internal/ResizeDetector\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { isIE11 } from \"../../../lib/utils\";\nimport { ModalContext } from \"../ModalContext\";\nimport { ModalFooter } from \"../ModalFooter\";\nimport { ModalHeader } from \"../ModalHeader\";\nimport { isBody, isFooter, isHeader } from \"../helpers\";\nimport { ModalBody } from \"../ModalBody\";\nimport { ModalClose } from \"../ModalClose\";\nimport { jsStyles } from \"../Modal.styles\";\nvar mountedModalsCount = 0;\n/**\r\n                             * Модальное окно\r\n                             *\r\n                             * Содержит в себе три компоненты: **Modal.Header**,\r\n                             * **Modal.Body** и **Modal.Footer**\r\n                             *\r\n                             * Для отображения серой плашки в футере в компонент\r\n                             * **Footer** необходимо передать пропс **panel**\r\n                             *\r\n                             * Для отключения прилипания шапки и футера\r\n                             * в соответствующий компонет нужно передать\r\n                             * проп **sticky** со значением **false**\r\n                             * (по-умолчанию прилипание включено)\r\n                             */\n\nexport var Modal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Modal, _React$Component);\n\n  function Modal() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      stackPosition: 0,\n      horizontalScroll: false\n    };\n    _this.theme = void 0;\n    _this.stackSubscription = null;\n    _this.containerNode = null;\n    _this.mouseDownTarget = null;\n    _this.mouseUpTarget = null;\n\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.refContainer = function (center) {\n      _this.containerNode = center;\n    };\n\n    _this.handleStackChange = function (stack) {\n      _this.setState({\n        stackPosition: stack.indexOf(_assertThisInitialized(_this))\n      });\n    };\n\n    _this.handleContainerMouseDown = function (event) {\n      _this.mouseDownTarget = event.target;\n    };\n\n    _this.handleContainerMouseUp = function (event) {\n      _this.mouseUpTarget = event.target;\n    };\n\n    _this.handleContainerClick = function (event) {\n      if (!_this.props.ignoreBackgroundClick) {\n        var target = event.target,\n            currentTarget = event.currentTarget;\n\n        if (target === currentTarget && _this.mouseDownTarget === currentTarget && _this.mouseUpTarget === currentTarget) {\n          _this.requestClose();\n        }\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n\n      if (isKeyEscape(e)) {\n        stopPropagation(e);\n\n        _this.requestClose();\n      }\n    };\n\n    _this.checkHorizontalScrollAppearance = function () {\n      var hasScroll = false;\n\n      if (_this.containerNode) {\n        var containerClientWidth = _this.containerNode.clientWidth;\n        var containerScrollWidth = _this.containerNode.scrollWidth;\n        hasScroll = containerClientWidth < containerScrollWidth;\n      }\n\n      if (hasScroll && !_this.state.horizontalScroll) {\n        _this.setState({\n          horizontalScroll: true\n        });\n      } else if (_this.state.horizontalScroll) {\n        _this.setState({\n          horizontalScroll: false\n        });\n      }\n    };\n\n    _this.handleResize = function (event) {\n      LayoutEvents.emit();\n    };\n\n    return _this;\n  }\n\n  var _proto = Modal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\n\n    if (mountedModalsCount === 0) {\n      window.addEventListener('resize', this.checkHorizontalScrollAppearance);\n    }\n\n    mountedModalsCount++;\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.checkHorizontalScrollAppearance();\n\n    if (this.containerNode) {\n      this.containerNode.addEventListener('scroll', LayoutEvents.emit);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (--mountedModalsCount === 0) {\n      window.removeEventListener('resize', this.checkHorizontalScrollAppearance);\n      LayoutEvents.emit();\n    }\n\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n\n    ModalStack.remove(this);\n\n    if (this.containerNode) {\n      this.containerNode.removeEventListener('scroll', LayoutEvents.emit);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn;\n\n    var hasHeader = false;\n    var hasFooter = false;\n    var hasPanel = false;\n    React.Children.toArray(this.props.children).forEach(function (child) {\n      if (isHeader(child)) {\n        hasHeader = true;\n      }\n\n      if (isFooter(child)) {\n        hasFooter = true;\n\n        if (child.props.panel) {\n          hasPanel = true;\n        }\n      }\n    });\n    var modalContextProps = {\n      hasHeader: hasHeader,\n      horizontalScroll: this.state.horizontalScroll\n    };\n\n    if (hasHeader && !this.props.noClose) {\n      modalContextProps.close = {\n        disableClose: this.props.disableClose,\n        requestClose: this.requestClose\n      };\n    }\n\n    if (!hasFooter) {\n      modalContextProps.additionalPadding = true;\n    }\n\n    if (hasFooter && hasPanel) {\n      modalContextProps.additionalPadding = true;\n    }\n\n    var style = {};\n    var containerStyle = {};\n\n    if (this.props.width) {\n      style.width = this.props.width;\n    } else {\n      containerStyle.width = 'auto';\n    }\n\n    return React.createElement(RenderContainer, null, React.createElement(ZIndex, {\n      priority: 'Modal',\n      className: jsStyles.root()\n    }, React.createElement(HideBodyVerticalScroll, null), this.state.stackPosition === 0 && React.createElement(\"div\", {\n      className: jsStyles.bg(this.theme)\n    }), React.createElement(\"div\", {\n      ref: this.refContainer,\n      className: jsStyles.container(),\n      onMouseDown: this.handleContainerMouseDown,\n      onMouseUp: this.handleContainerMouseUp,\n      onClick: this.handleContainerClick,\n      \"data-tid\": \"modal-container\"\n    }, React.createElement(\"div\", {\n      className: cn((_cn = {}, _cn[jsStyles.centerContainer(this.theme)] = true, _cn[jsStyles.alignTop(this.theme)] = Boolean(this.props.alignTop), _cn)),\n      style: containerStyle,\n      \"data-tid\": \"modal-content\"\n    }, React.createElement(\"div\", {\n      className: jsStyles.window(this.theme),\n      style: style\n    }, React.createElement(ResizeDetector, {\n      onResize: this.handleResize\n    }, React.createElement(FocusLock, {\n      disabled: this.props.disableFocusLock,\n      autoFocus: false\n    }, !hasHeader && !this.props.noClose ? React.createElement(ZIndex, {\n      priority: 'ModalCross',\n      className: jsStyles.closeWrapper()\n    }, React.createElement(ModalClose, {\n      requestClose: this.requestClose,\n      disableClose: this.props.disableClose\n    })) : null, React.createElement(ModalContext.Provider, {\n      value: modalContextProps\n    }, this.props.children))))))));\n  };\n\n  return Modal;\n}(React.Component);\nModal.__KONTUR_REACT_UI__ = 'Modal';\nModal.Header = ModalHeader;\nModal.Body = ModalBody;\nModal.Footer = ModalFooter;\nModal.propTypes = {\n  children: function children(props, propName, componentName) {\n    if (React.Children.toArray(props[propName]).some(function (child) {\n      return !isHeader(child) && !isBody(child) && !isFooter(child);\n    })) {\n      return new Error(\"Only 'Header/Body/Footer' components are allowed for '\" + propName + \"' prop of '\" + componentName + \"' component\");\n    }\n  }\n};\nModal.defaultProps = {\n  // NOTE: в ie нормально не работает\n  disableFocusLock: isIE11\n};"]},"metadata":{},"sourceType":"module"}