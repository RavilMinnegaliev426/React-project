{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { defaultLangCode } from \"../../locale/constants\";\nimport { defaultDateComponentsOrder, defaultDateComponentsSeparator, emptyDateComponents } from \"../constants\";\nimport { InternalDateCalculator } from \"../InternalDateCalculator\";\nimport { InternalDateGetter } from \"../InternalDateGetter\";\nimport { InternalDateSetter } from \"../InternalDateSetter\";\nimport { InternalDateTransformer } from \"../InternalDateTransformer\";\nimport { InternalDateValidator } from \"../InternalDateValidator\";\nimport { internalDateLocale } from \"../localeSets\";\nimport { InternalDateComponentType, InternalDateOrder, InternalDateValidateCheck, isInternalDateValidateCheck } from \"../types\";\nexport var InternalDate = /*#__PURE__*/function () {\n  function InternalDate(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        order = _ref.order,\n        separator = _ref.separator,\n        _ref$langCode = _ref.langCode,\n        langCode = _ref$langCode === void 0 ? defaultLangCode : _ref$langCode,\n        value = _ref.value;\n\n    this.order = void 0;\n    this.separator = void 0;\n    this.components = _extends({}, emptyDateComponents);\n    this.start = null;\n    this.end = null;\n    this.order = order != null ? order : internalDateLocale[langCode].order;\n    this.separator = separator != null ? separator : internalDateLocale[langCode].separator;\n\n    if (value !== undefined) {\n      this.parseInternalValue(value);\n    }\n  }\n\n  var _proto = InternalDate.prototype;\n\n  _proto.getComponentsRaw = function getComponentsRaw() {\n    return _extends({}, this.components);\n  };\n\n  _proto.getComponentsLikeNumber = function getComponentsLikeNumber() {\n    return InternalDateTransformer.dateComponentsStringToNumber(this.getComponentsRaw());\n  };\n\n  _proto.getSeparator = function getSeparator() {\n    return this.separator;\n  };\n\n  _proto.getOrder = function getOrder() {\n    return this.order;\n  };\n\n  _proto.getYear = function getYear() {\n    return this.components.year;\n  };\n\n  _proto.getMonth = function getMonth() {\n    return this.components.month;\n  };\n\n  _proto.getDate = function getDate() {\n    return this.components.date;\n  };\n\n  _proto.getRangeStart = function getRangeStart() {\n    return this.start;\n  };\n\n  _proto.getRangeEnd = function getRangeEnd() {\n    return this.end;\n  };\n\n  _proto.setOrder = function setOrder(order) {\n    if (order === void 0) {\n      order = defaultDateComponentsOrder;\n    }\n\n    this.order = order;\n    return this;\n  };\n\n  _proto.setSeparator = function setSeparator(separator) {\n    if (separator === void 0) {\n      separator = defaultDateComponentsSeparator;\n    }\n\n    this.separator = separator;\n    return this;\n  };\n\n  _proto.setComponents = function setComponents(components, isNativeMonth) {\n    if (isNativeMonth === void 0) {\n      isNativeMonth = false;\n    }\n\n    if (components && isNativeMonth) {\n      var clone = this.clone().setComponents(components).shiftMonth(1);\n\n      if (clone.validate({\n        checks: [InternalDateValidateCheck.Native]\n      })) {\n        this.components = _extends({}, clone.getComponentsLikeNumber());\n      }\n\n      return this;\n    }\n\n    this.components = components || _extends({}, emptyDateComponents);\n    return this;\n  };\n\n  _proto.setYear = function setYear(year) {\n    this.components.year = year;\n    return this;\n  };\n\n  _proto.setMonth = function setMonth(month) {\n    this.components.month = month;\n    return this;\n  };\n\n  _proto.setDate = function setDate(date) {\n    this.components.date = date;\n    return this;\n  };\n\n  _proto.shiftYear = function shiftYear(step, _temp2) {\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        isLoop = _ref2.isLoop,\n        isRange = _ref2.isRange,\n        isCutFeb = _ref2.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Year, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Year, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi = this.getComponentsLikeNumber(),\n        year = _this$getComponentsLi.year;\n\n    this.components.year = InternalDateCalculator.calcShiftValueDateComponent(step, year, min, max, isLoop);\n    return this;\n  };\n\n  _proto.shiftMonth = function shiftMonth(step, _temp3) {\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        isLoop = _ref3.isLoop,\n        isRange = _ref3.isRange,\n        isCutFeb = _ref3.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Month, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Month, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi2 = this.getComponentsLikeNumber(),\n        month = _this$getComponentsLi2.month;\n\n    this.components.month = InternalDateCalculator.calcShiftValueDateComponent(step, month, min, max, isLoop);\n    return this;\n  };\n\n  _proto.shiftDate = function shiftDate(step, _temp4) {\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        isLoop = _ref4.isLoop,\n        isRange = _ref4.isRange,\n        isCutFeb = _ref4.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Date, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Date, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi3 = this.getComponentsLikeNumber(),\n        date = _this$getComponentsLi3.date;\n\n    this.components.date = InternalDateCalculator.calcShiftValueDateComponent(step, date, min, max, isLoop);\n    return this;\n  };\n\n  _proto.setRangeStart = function setRangeStart(internalDate) {\n    this.start = internalDate;\n    return this;\n  };\n\n  _proto.setRangeEnd = function setRangeEnd(internalDate) {\n    this.end = internalDate;\n    return this;\n  };\n\n  _proto.get = function get(type) {\n    return type !== null ? InternalDateGetter.getValueDateComponent(type, this.getComponentsRaw()) : null;\n  };\n\n  _proto.set = function set(type, value) {\n    return type !== null ? InternalDateSetter.setValueDateComponent(this, type, value) : this;\n  };\n\n  _proto.shift = function shift(type, step, settings) {\n    return type !== null ? InternalDateSetter.shiftValueDateComponent(this, type, step, settings) : this;\n  };\n\n  _proto.parseValue = function parseValue(value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer.parseValueToDate(value, this.order) || _extends({}, emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  _proto.parseInternalValue = function parseInternalValue(value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer.parseValueToDate(value, InternalDateOrder.DMY) || _extends({}, emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  _proto.validate = function validate(_temp5) {\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        type = _ref5.type,\n        nextValue = _ref5.nextValue,\n        _ref5$checks = _ref5.checks,\n        checks = _ref5$checks === void 0 ? Object.values(InternalDateValidateCheck).filter(isInternalDateValidateCheck) : _ref5$checks; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n    var self = this;\n\n    if (type !== undefined) {\n      var clone = this.clone();\n\n      if (nextValue !== undefined) {\n        clone.set(type, nextValue);\n      }\n\n      self = clone;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.NotNull) && !InternalDateValidator.checkForNull(self.getComponentsRaw(), type)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Number) && !Object.values(self.getComponentsRaw()).every(InternalDateValidator.testParseToNumber)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Limits) && !InternalDateValidator.checkLimits(self.getComponentsLikeNumber(), type)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Native) && !InternalDateValidator.compareWithNativeDate(self.getComponentsLikeNumber())) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Range)) {\n      return type !== undefined ? InternalDateValidator.checkRangePiecemeal(type, self.getComponentsLikeNumber(), self.start && self.start.getComponentsLikeNumber(), self.end && self.end.getComponentsLikeNumber()) : InternalDateValidator.checkRangeFully(self.toNumber(), self.start && self.start.toNumber(), self.end && self.end.toNumber());\n    }\n\n    return true;\n  };\n\n  _proto.toFragments = function toFragments(settings, components) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    if (components === void 0) {\n      components = this.getComponentsRaw();\n    }\n\n    return InternalDateTransformer.dateToFragments(components, _extends({\n      order: this.order,\n      separator: this.separator\n    }, settings));\n  }\n  /**\r\n     * Перевод даты в числовое представление (**НЕ** аналог `timestamp`)\r\n     * Предназначено для быстрого сравнивания дат `<=>`\r\n     */\n  ;\n\n  _proto.toNumber = function toNumber() {\n    return Number(this.toFragments({\n      order: InternalDateOrder.YMD,\n      withPad: true\n    }).map(function (_ref6) {\n      var valueWithPad = _ref6.valueWithPad;\n      return valueWithPad;\n    }).join(''));\n  };\n\n  _proto.toString = function toString(settings) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    return this.toFragments(_extends({\n      withPad: true,\n      withSeparator: true\n    }, settings)).filter(function (_ref7) {\n      var value = _ref7.value;\n      return value !== null;\n    }).map(function (_ref8) {\n      var type = _ref8.type,\n          valueWithPad = _ref8.valueWithPad,\n          value = _ref8.value;\n      return settings.withPad && type !== InternalDateComponentType.Separator ? valueWithPad : value;\n    }).join('');\n  };\n\n  _proto.toInternalString = function toInternalString() {\n    return InternalDateTransformer.dateToInternalString(this.getComponentsRaw());\n  };\n\n  _proto.toNativeFormat = function toNativeFormat() {\n    var components = this.getComponentsLikeNumber();\n\n    if (InternalDateValidator.compareWithNativeDate(components)) {\n      return _extends({}, components, {\n        month: components.month - 1\n      });\n    }\n\n    return null;\n  };\n\n  _proto.clone = function clone() {\n    return new InternalDate({\n      order: this.order,\n      separator: this.separator\n    }).setComponents(_extends({}, this.components)).setRangeStart(this.start && this.start.clone()).setRangeEnd(this.end && this.end.clone());\n  };\n\n  _proto.duplicateOf = function duplicateOf(pattern) {\n    return this.setComponents(pattern.getComponentsRaw());\n  };\n\n  _proto.restore = function restore(type) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var prev = this.getComponentsRaw();\n    var today = InternalDateGetter.getTodayComponents();\n\n    if (prev.year === null && prev.month === null && prev.date === null) {\n      return this;\n    }\n\n    var restoreYear = prev.year !== null && InternalDateValidator.testParseToNumber(prev.year) ? prev.year > 50 && prev.year < 100 ? Number(prev.year) + 1900 : prev.year > 0 && prev.year < 51 ? Number(prev.year) + 2000 : prev.year : today.year;\n\n    if (type === null && restoreYear !== prev.year || type === InternalDateComponentType.Year || type === InternalDateComponentType.All) {\n      this.setYear(restoreYear);\n    }\n\n    if (type === null && prev.month === null || type === InternalDateComponentType.Month || type === InternalDateComponentType.All) {\n      this.setMonth(today.month);\n    }\n\n    if (type === null && prev.date === null || type === InternalDateComponentType.Date || type === InternalDateComponentType.All) {\n      this.setDate(today.date);\n    }\n\n    return this;\n  };\n\n  _proto.cutOffExcess = function cutOffExcess(type, _temp6) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var _ref9 = _temp6 === void 0 ? {} : _temp6,\n        _ref9$isLoop = _ref9.isLoop,\n        isLoop = _ref9$isLoop === void 0 ? false : _ref9$isLoop,\n        isRange = _ref9.isRange,\n        _ref9$isCutFeb = _ref9.isCutFeb,\n        isCutFeb = _ref9$isCutFeb === void 0 ? false : _ref9$isCutFeb;\n\n    var _this$components = this.components,\n        year = _this$components.year,\n        month = _this$components.month,\n        date = _this$components.date;\n\n    if ((type === null || type === InternalDateComponentType.Year) && InternalDateValidator.testParseToNumber(year)) {\n      this.shiftYear(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === InternalDateComponentType.Month) && InternalDateValidator.testParseToNumber(month)) {\n      this.shiftMonth(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === InternalDateComponentType.Date) && InternalDateValidator.testParseToNumber(date)) {\n      this.shiftDate(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    return this;\n  };\n\n  _proto.isIncomplete = function isIncomplete() {\n    return !this.isEmpty() && Object.values(this.components).some(function (component) {\n      return component === null;\n    });\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    return Object.values(this.components).every(function (component) {\n      return component === null;\n    });\n  };\n\n  _proto.isEqualComponentDate = function isEqualComponentDate(type, compared) {\n    return this.get(type) === compared.get(type);\n  };\n\n  _proto.isEqual = function isEqual(compared) {\n    return InternalDateValidator.isEqualDateValues(this, compared) && InternalDateValidator.isEqualDateFormats(this, compared);\n  };\n\n  _proto.getMinValue = function getMinValue(type, isRange) {\n    if (isRange === true && this.start !== null) {\n      return Number(InternalDateCalculator.calcRangeStartDateComponent(type, this.getComponentsLikeNumber(), this.start.getComponentsLikeNumber()));\n    }\n\n    return InternalDateGetter.getDefaultMin(type);\n  };\n\n  _proto.getMaxValue = function getMaxValue(type, _temp7) {\n    var _ref10 = _temp7 === void 0 ? {} : _temp7,\n        isRange = _ref10.isRange,\n        isCutFeb = _ref10.isCutFeb;\n\n    if (isRange && this.end !== null) {\n      return Number(InternalDateCalculator.calcRangeEndDateComponent(type, this.getComponentsLikeNumber(), this.end.getComponentsLikeNumber()));\n    }\n\n    if (!isCutFeb) {\n      return InternalDateGetter.getDefaultMax(type);\n    }\n\n    return InternalDateGetter.getDefaultMax(type, this.getComponentsLikeNumber());\n  };\n\n  return InternalDate;\n}();","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/lib/date/InternalDate/InternalDate.js"],"names":["_extends","defaultLangCode","defaultDateComponentsOrder","defaultDateComponentsSeparator","emptyDateComponents","InternalDateCalculator","InternalDateGetter","InternalDateSetter","InternalDateTransformer","InternalDateValidator","internalDateLocale","InternalDateComponentType","InternalDateOrder","InternalDateValidateCheck","isInternalDateValidateCheck","InternalDate","_temp","_ref","order","separator","_ref$langCode","langCode","value","components","start","end","undefined","parseInternalValue","_proto","prototype","getComponentsRaw","getComponentsLikeNumber","dateComponentsStringToNumber","getSeparator","getOrder","getYear","year","getMonth","month","getDate","date","getRangeStart","getRangeEnd","setOrder","setSeparator","setComponents","isNativeMonth","clone","shiftMonth","validate","checks","Native","setYear","setMonth","setDate","shiftYear","step","_temp2","_ref2","isLoop","isRange","isCutFeb","min","getMinValue","Year","max","getMaxValue","_this$getComponentsLi","calcShiftValueDateComponent","_temp3","_ref3","Month","_this$getComponentsLi2","shiftDate","_temp4","_ref4","Date","_this$getComponentsLi3","setRangeStart","internalDate","setRangeEnd","get","type","getValueDateComponent","set","setValueDateComponent","shift","settings","shiftValueDateComponent","parseValue","parseValueToDate","DMY","_temp5","_ref5","nextValue","_ref5$checks","Object","values","filter","self","includes","NotNull","checkForNull","Number","every","testParseToNumber","Limits","checkLimits","compareWithNativeDate","Range","checkRangePiecemeal","checkRangeFully","toNumber","toFragments","dateToFragments","YMD","withPad","map","_ref6","valueWithPad","join","toString","withSeparator","_ref7","_ref8","Separator","toInternalString","dateToInternalString","toNativeFormat","duplicateOf","pattern","restore","prev","today","getTodayComponents","restoreYear","All","cutOffExcess","_temp6","_ref9","_ref9$isLoop","_ref9$isCutFeb","_this$components","isIncomplete","isEmpty","some","component","isEqualComponentDate","compared","isEqual","isEqualDateValues","isEqualDateFormats","calcRangeStartDateComponent","getDefaultMin","_temp7","_ref10","calcRangeEndDateComponent","getDefaultMax"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { defaultLangCode } from \"../../locale/constants\";\nimport { defaultDateComponentsOrder, defaultDateComponentsSeparator, emptyDateComponents } from \"../constants\";\nimport { InternalDateCalculator } from \"../InternalDateCalculator\";\nimport { InternalDateGetter } from \"../InternalDateGetter\";\nimport { InternalDateSetter } from \"../InternalDateSetter\";\nimport { InternalDateTransformer } from \"../InternalDateTransformer\";\nimport { InternalDateValidator } from \"../InternalDateValidator\";\nimport { internalDateLocale } from \"../localeSets\";\nimport { InternalDateComponentType, InternalDateOrder, InternalDateValidateCheck, isInternalDateValidateCheck } from \"../types\";\nexport var InternalDate =\n/*#__PURE__*/\nfunction () {\n  function InternalDate(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        order = _ref.order,\n        separator = _ref.separator,\n        _ref$langCode = _ref.langCode,\n        langCode = _ref$langCode === void 0 ? defaultLangCode : _ref$langCode,\n        value = _ref.value;\n\n    this.order = void 0;\n    this.separator = void 0;\n    this.components = _extends({}, emptyDateComponents);\n    this.start = null;\n    this.end = null;\n    this.order = order != null ? order : internalDateLocale[langCode].order;\n    this.separator = separator != null ? separator : internalDateLocale[langCode].separator;\n\n    if (value !== undefined) {\n      this.parseInternalValue(value);\n    }\n  }\n\n  var _proto = InternalDate.prototype;\n\n  _proto.getComponentsRaw = function getComponentsRaw() {\n    return _extends({}, this.components);\n  };\n\n  _proto.getComponentsLikeNumber = function getComponentsLikeNumber() {\n    return InternalDateTransformer.dateComponentsStringToNumber(this.getComponentsRaw());\n  };\n\n  _proto.getSeparator = function getSeparator() {\n    return this.separator;\n  };\n\n  _proto.getOrder = function getOrder() {\n    return this.order;\n  };\n\n  _proto.getYear = function getYear() {\n    return this.components.year;\n  };\n\n  _proto.getMonth = function getMonth() {\n    return this.components.month;\n  };\n\n  _proto.getDate = function getDate() {\n    return this.components.date;\n  };\n\n  _proto.getRangeStart = function getRangeStart() {\n    return this.start;\n  };\n\n  _proto.getRangeEnd = function getRangeEnd() {\n    return this.end;\n  };\n\n  _proto.setOrder = function setOrder(order) {\n    if (order === void 0) {\n      order = defaultDateComponentsOrder;\n    }\n\n    this.order = order;\n    return this;\n  };\n\n  _proto.setSeparator = function setSeparator(separator) {\n    if (separator === void 0) {\n      separator = defaultDateComponentsSeparator;\n    }\n\n    this.separator = separator;\n    return this;\n  };\n\n  _proto.setComponents = function setComponents(components, isNativeMonth) {\n    if (isNativeMonth === void 0) {\n      isNativeMonth = false;\n    }\n\n    if (components && isNativeMonth) {\n      var clone = this.clone().setComponents(components).shiftMonth(1);\n\n      if (clone.validate({\n        checks: [InternalDateValidateCheck.Native]\n      })) {\n        this.components = _extends({}, clone.getComponentsLikeNumber());\n      }\n\n      return this;\n    }\n\n    this.components = components || _extends({}, emptyDateComponents);\n    return this;\n  };\n\n  _proto.setYear = function setYear(year) {\n    this.components.year = year;\n    return this;\n  };\n\n  _proto.setMonth = function setMonth(month) {\n    this.components.month = month;\n    return this;\n  };\n\n  _proto.setDate = function setDate(date) {\n    this.components.date = date;\n    return this;\n  };\n\n  _proto.shiftYear = function shiftYear(step, _temp2) {\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        isLoop = _ref2.isLoop,\n        isRange = _ref2.isRange,\n        isCutFeb = _ref2.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Year, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Year, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi = this.getComponentsLikeNumber(),\n        year = _this$getComponentsLi.year;\n\n    this.components.year = InternalDateCalculator.calcShiftValueDateComponent(step, year, min, max, isLoop);\n    return this;\n  };\n\n  _proto.shiftMonth = function shiftMonth(step, _temp3) {\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        isLoop = _ref3.isLoop,\n        isRange = _ref3.isRange,\n        isCutFeb = _ref3.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Month, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Month, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi2 = this.getComponentsLikeNumber(),\n        month = _this$getComponentsLi2.month;\n\n    this.components.month = InternalDateCalculator.calcShiftValueDateComponent(step, month, min, max, isLoop);\n    return this;\n  };\n\n  _proto.shiftDate = function shiftDate(step, _temp4) {\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        isLoop = _ref4.isLoop,\n        isRange = _ref4.isRange,\n        isCutFeb = _ref4.isCutFeb;\n\n    var min = this.getMinValue(InternalDateComponentType.Date, isRange);\n    var max = this.getMaxValue(InternalDateComponentType.Date, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n\n    var _this$getComponentsLi3 = this.getComponentsLikeNumber(),\n        date = _this$getComponentsLi3.date;\n\n    this.components.date = InternalDateCalculator.calcShiftValueDateComponent(step, date, min, max, isLoop);\n    return this;\n  };\n\n  _proto.setRangeStart = function setRangeStart(internalDate) {\n    this.start = internalDate;\n    return this;\n  };\n\n  _proto.setRangeEnd = function setRangeEnd(internalDate) {\n    this.end = internalDate;\n    return this;\n  };\n\n  _proto.get = function get(type) {\n    return type !== null ? InternalDateGetter.getValueDateComponent(type, this.getComponentsRaw()) : null;\n  };\n\n  _proto.set = function set(type, value) {\n    return type !== null ? InternalDateSetter.setValueDateComponent(this, type, value) : this;\n  };\n\n  _proto.shift = function shift(type, step, settings) {\n    return type !== null ? InternalDateSetter.shiftValueDateComponent(this, type, step, settings) : this;\n  };\n\n  _proto.parseValue = function parseValue(value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer.parseValueToDate(value, this.order) || _extends({}, emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  _proto.parseInternalValue = function parseInternalValue(value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer.parseValueToDate(value, InternalDateOrder.DMY) || _extends({}, emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  _proto.validate = function validate(_temp5) {\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        type = _ref5.type,\n        nextValue = _ref5.nextValue,\n        _ref5$checks = _ref5.checks,\n        checks = _ref5$checks === void 0 ? Object.values(InternalDateValidateCheck).filter(isInternalDateValidateCheck) : _ref5$checks; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n    var self = this;\n\n    if (type !== undefined) {\n      var clone = this.clone();\n\n      if (nextValue !== undefined) {\n        clone.set(type, nextValue);\n      }\n\n      self = clone;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.NotNull) && !InternalDateValidator.checkForNull(self.getComponentsRaw(), type)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Number) && !Object.values(self.getComponentsRaw()).every(InternalDateValidator.testParseToNumber)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Limits) && !InternalDateValidator.checkLimits(self.getComponentsLikeNumber(), type)) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Native) && !InternalDateValidator.compareWithNativeDate(self.getComponentsLikeNumber())) {\n      return false;\n    }\n\n    if (checks.includes(InternalDateValidateCheck.Range)) {\n      return type !== undefined ? InternalDateValidator.checkRangePiecemeal(type, self.getComponentsLikeNumber(), self.start && self.start.getComponentsLikeNumber(), self.end && self.end.getComponentsLikeNumber()) : InternalDateValidator.checkRangeFully(self.toNumber(), self.start && self.start.toNumber(), self.end && self.end.toNumber());\n    }\n\n    return true;\n  };\n\n  _proto.toFragments = function toFragments(settings, components) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    if (components === void 0) {\n      components = this.getComponentsRaw();\n    }\n\n    return InternalDateTransformer.dateToFragments(components, _extends({\n      order: this.order,\n      separator: this.separator\n    }, settings));\n  }\n  /**\r\n     * Перевод даты в числовое представление (**НЕ** аналог `timestamp`)\r\n     * Предназначено для быстрого сравнивания дат `<=>`\r\n     */\n  ;\n\n  _proto.toNumber = function toNumber() {\n    return Number(this.toFragments({\n      order: InternalDateOrder.YMD,\n      withPad: true\n    }).map(function (_ref6) {\n      var valueWithPad = _ref6.valueWithPad;\n      return valueWithPad;\n    }).join(''));\n  };\n\n  _proto.toString = function toString(settings) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    return this.toFragments(_extends({\n      withPad: true,\n      withSeparator: true\n    }, settings)).filter(function (_ref7) {\n      var value = _ref7.value;\n      return value !== null;\n    }).map(function (_ref8) {\n      var type = _ref8.type,\n          valueWithPad = _ref8.valueWithPad,\n          value = _ref8.value;\n      return settings.withPad && type !== InternalDateComponentType.Separator ? valueWithPad : value;\n    }).join('');\n  };\n\n  _proto.toInternalString = function toInternalString() {\n    return InternalDateTransformer.dateToInternalString(this.getComponentsRaw());\n  };\n\n  _proto.toNativeFormat = function toNativeFormat() {\n    var components = this.getComponentsLikeNumber();\n\n    if (InternalDateValidator.compareWithNativeDate(components)) {\n      return _extends({}, components, {\n        month: components.month - 1\n      });\n    }\n\n    return null;\n  };\n\n  _proto.clone = function clone() {\n    return new InternalDate({\n      order: this.order,\n      separator: this.separator\n    }).setComponents(_extends({}, this.components)).setRangeStart(this.start && this.start.clone()).setRangeEnd(this.end && this.end.clone());\n  };\n\n  _proto.duplicateOf = function duplicateOf(pattern) {\n    return this.setComponents(pattern.getComponentsRaw());\n  };\n\n  _proto.restore = function restore(type) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var prev = this.getComponentsRaw();\n    var today = InternalDateGetter.getTodayComponents();\n\n    if (prev.year === null && prev.month === null && prev.date === null) {\n      return this;\n    }\n\n    var restoreYear = prev.year !== null && InternalDateValidator.testParseToNumber(prev.year) ? prev.year > 50 && prev.year < 100 ? Number(prev.year) + 1900 : prev.year > 0 && prev.year < 51 ? Number(prev.year) + 2000 : prev.year : today.year;\n\n    if (type === null && restoreYear !== prev.year || type === InternalDateComponentType.Year || type === InternalDateComponentType.All) {\n      this.setYear(restoreYear);\n    }\n\n    if (type === null && prev.month === null || type === InternalDateComponentType.Month || type === InternalDateComponentType.All) {\n      this.setMonth(today.month);\n    }\n\n    if (type === null && prev.date === null || type === InternalDateComponentType.Date || type === InternalDateComponentType.All) {\n      this.setDate(today.date);\n    }\n\n    return this;\n  };\n\n  _proto.cutOffExcess = function cutOffExcess(type, _temp6) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var _ref9 = _temp6 === void 0 ? {} : _temp6,\n        _ref9$isLoop = _ref9.isLoop,\n        isLoop = _ref9$isLoop === void 0 ? false : _ref9$isLoop,\n        isRange = _ref9.isRange,\n        _ref9$isCutFeb = _ref9.isCutFeb,\n        isCutFeb = _ref9$isCutFeb === void 0 ? false : _ref9$isCutFeb;\n\n    var _this$components = this.components,\n        year = _this$components.year,\n        month = _this$components.month,\n        date = _this$components.date;\n\n    if ((type === null || type === InternalDateComponentType.Year) && InternalDateValidator.testParseToNumber(year)) {\n      this.shiftYear(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === InternalDateComponentType.Month) && InternalDateValidator.testParseToNumber(month)) {\n      this.shiftMonth(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === InternalDateComponentType.Date) && InternalDateValidator.testParseToNumber(date)) {\n      this.shiftDate(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    return this;\n  };\n\n  _proto.isIncomplete = function isIncomplete() {\n    return !this.isEmpty() && Object.values(this.components).some(function (component) {\n      return component === null;\n    });\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    return Object.values(this.components).every(function (component) {\n      return component === null;\n    });\n  };\n\n  _proto.isEqualComponentDate = function isEqualComponentDate(type, compared) {\n    return this.get(type) === compared.get(type);\n  };\n\n  _proto.isEqual = function isEqual(compared) {\n    return InternalDateValidator.isEqualDateValues(this, compared) && InternalDateValidator.isEqualDateFormats(this, compared);\n  };\n\n  _proto.getMinValue = function getMinValue(type, isRange) {\n    if (isRange === true && this.start !== null) {\n      return Number(InternalDateCalculator.calcRangeStartDateComponent(type, this.getComponentsLikeNumber(), this.start.getComponentsLikeNumber()));\n    }\n\n    return InternalDateGetter.getDefaultMin(type);\n  };\n\n  _proto.getMaxValue = function getMaxValue(type, _temp7) {\n    var _ref10 = _temp7 === void 0 ? {} : _temp7,\n        isRange = _ref10.isRange,\n        isCutFeb = _ref10.isCutFeb;\n\n    if (isRange && this.end !== null) {\n      return Number(InternalDateCalculator.calcRangeEndDateComponent(type, this.getComponentsLikeNumber(), this.end.getComponentsLikeNumber()));\n    }\n\n    if (!isCutFeb) {\n      return InternalDateGetter.getDefaultMax(type);\n    }\n\n    return InternalDateGetter.getDefaultMax(type, this.getComponentsLikeNumber());\n  };\n\n  return InternalDate;\n}();"]},"metadata":{},"sourceType":"module"}