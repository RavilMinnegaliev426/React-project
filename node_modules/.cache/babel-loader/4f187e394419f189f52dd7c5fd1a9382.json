{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport throttle from 'lodash.throttle';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Indicator.styles\";\nimport { TabsContext } from \"../TabsContext\";\nexport var Indicator = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Indicator, _React$Component);\n\n  function Indicator() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.context = _this.context;\n    _this.state = {\n      styles: {}\n    };\n    _this.theme = void 0;\n    _this.eventListener = null;\n    _this.removeTabUpdatesListener = null;\n\n    _this.reflow = function () {\n      var _this$context = _this.context,\n          getTab = _this$context.getTab,\n          activeTab = _this$context.activeTab;\n      var node = getTab(activeTab);\n\n      var nodeStyles = _this.getStyles(node);\n\n      var stylesUpdated = ['left', 'top', 'width', 'height'].some(function (prop) {\n        return nodeStyles[prop] !== _this.state.styles[prop];\n      });\n\n      if (stylesUpdated) {\n        _this.setState({\n          styles: nodeStyles\n        });\n      }\n    };\n\n    _this.throttledReflow = throttle(_this.reflow, 100);\n    return _this;\n  }\n\n  var _proto = Indicator.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.eventListener = LayoutEvents.addListener(this.throttledReflow);\n    this.removeTabUpdatesListener = this.props.tabUpdates.on(this.reflow);\n    this.reflow();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.throttledReflow.cancel();\n\n    if (this.eventListener) {\n      this.eventListener.remove();\n    }\n\n    if (this.removeTabUpdatesListener) {\n      this.removeTabUpdatesListener();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    this.reflow();\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this$context2 = this.context,\n        getTab = _this$context2.getTab,\n        activeTab = _this$context2.activeTab;\n    var node = getTab(activeTab);\n    var indicators = node && node.getIndicators && node.getIndicators() || {\n      error: false,\n      warning: false,\n      success: false,\n      primary: false,\n      disabled: false\n    };\n    return React.createElement(\"div\", {\n      className: cn(jsStyles.root(this.theme), indicators.primary && jsStyles.primary(this.theme), indicators.success && jsStyles.success(this.theme), indicators.warning && jsStyles.warning(this.theme), indicators.error && jsStyles.error(this.theme), this.props.className),\n      style: this.state.styles\n    });\n  };\n\n  _proto.getStyles = function getStyles(node) {\n    if (node instanceof React.Component) {\n      node = findDOMNode(node);\n    }\n\n    if (node instanceof HTMLElement) {\n      var rect = node.getBoundingClientRect();\n\n      if (this.props.vertical) {\n        return {\n          width: 3,\n          left: node.offsetLeft,\n          top: node.offsetTop,\n          height: rect.bottom - rect.top\n        };\n      }\n\n      return {\n        left: node.offsetLeft,\n        top: node.offsetHeight + node.offsetTop - 3,\n        width: rect.right - rect.left\n      };\n    }\n\n    return {};\n  };\n\n  return Indicator;\n}(React.Component);\nIndicator.contextType = TabsContext;","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/Tabs/Indicator/Indicator.js"],"names":["_inheritsLoose","React","findDOMNode","throttle","cn","LayoutEvents","ThemeContext","jsStyles","TabsContext","Indicator","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","context","state","styles","theme","eventListener","removeTabUpdatesListener","reflow","_this$context","getTab","activeTab","node","nodeStyles","getStyles","stylesUpdated","some","prop","setState","throttledReflow","_proto","prototype","componentDidMount","addListener","props","tabUpdates","on","componentWillUnmount","cancel","remove","componentDidUpdate","_","prevState","render","_this2","createElement","Consumer","renderMain","_this$context2","indicators","getIndicators","error","warning","success","primary","disabled","className","root","style","Component","HTMLElement","rect","getBoundingClientRect","vertical","width","left","offsetLeft","top","offsetTop","height","bottom","offsetHeight","right","contextType"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,0CAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAO,KAAKC,YAAZ,MAA8B,2BAA9B;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAO,IAAIC,SAAS,GACpB,aACA,UAAUC,gBAAV,EAA4B;AAC1BV,EAAAA,cAAc,CAACS,SAAD,EAAYC,gBAAZ,CAAd;;AAEA,WAASD,SAAT,GAAqB;AACnB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,gBAAgB,CAACQ,IAAjB,CAAsBC,KAAtB,CAA4BT,gBAA5B,EAA8C,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAA9E;AACAJ,IAAAA,KAAK,CAACU,OAAN,GAAgBV,KAAK,CAACU,OAAtB;AACAV,IAAAA,KAAK,CAACW,KAAN,GAAc;AACZC,MAAAA,MAAM,EAAE;AADI,KAAd;AAGAZ,IAAAA,KAAK,CAACa,KAAN,GAAc,KAAK,CAAnB;AACAb,IAAAA,KAAK,CAACc,aAAN,GAAsB,IAAtB;AACAd,IAAAA,KAAK,CAACe,wBAAN,GAAiC,IAAjC;;AAEAf,IAAAA,KAAK,CAACgB,MAAN,GAAe,YAAY;AACzB,UAAIC,aAAa,GAAGjB,KAAK,CAACU,OAA1B;AAAA,UACIQ,MAAM,GAAGD,aAAa,CAACC,MAD3B;AAAA,UAEIC,SAAS,GAAGF,aAAa,CAACE,SAF9B;AAGA,UAAIC,IAAI,GAAGF,MAAM,CAACC,SAAD,CAAjB;;AAEA,UAAIE,UAAU,GAAGrB,KAAK,CAACsB,SAAN,CAAgBF,IAAhB,CAAjB;;AAEA,UAAIG,aAAa,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,EAAmCC,IAAnC,CAAwC,UAAUC,IAAV,EAAgB;AAC1E,eAAOJ,UAAU,CAACI,IAAD,CAAV,KAAqBzB,KAAK,CAACW,KAAN,CAAYC,MAAZ,CAAmBa,IAAnB,CAA5B;AACD,OAFmB,CAApB;;AAIA,UAAIF,aAAJ,EAAmB;AACjBvB,QAAAA,KAAK,CAAC0B,QAAN,CAAe;AACbd,UAAAA,MAAM,EAAES;AADK,SAAf;AAGD;AACF,KAjBD;;AAmBArB,IAAAA,KAAK,CAAC2B,eAAN,GAAwBnC,QAAQ,CAACQ,KAAK,CAACgB,MAAP,EAAe,GAAf,CAAhC;AACA,WAAOhB,KAAP;AACD;;AAED,MAAI4B,MAAM,GAAG9B,SAAS,CAAC+B,SAAvB;;AAEAD,EAAAA,MAAM,CAACE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKhB,aAAL,GAAqBpB,YAAY,CAACqC,WAAb,CAAyB,KAAKJ,eAA9B,CAArB;AACA,SAAKZ,wBAAL,GAAgC,KAAKiB,KAAL,CAAWC,UAAX,CAAsBC,EAAtB,CAAyB,KAAKlB,MAA9B,CAAhC;AACA,SAAKA,MAAL;AACD,GAJD;;AAMAY,EAAAA,MAAM,CAACO,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,SAAKR,eAAL,CAAqBS,MAArB;;AAEA,QAAI,KAAKtB,aAAT,EAAwB;AACtB,WAAKA,aAAL,CAAmBuB,MAAnB;AACD;;AAED,QAAI,KAAKtB,wBAAT,EAAmC;AACjC,WAAKA,wBAAL;AACD;AACF,GAVD;;AAYAa,EAAAA,MAAM,CAACU,kBAAP,GAA4B,SAASA,kBAAT,CAA4BC,CAA5B,EAA+BC,SAA/B,EAA0C;AACpE,SAAKxB,MAAL;AACD,GAFD;;AAIAY,EAAAA,MAAM,CAACa,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,MAAM,GAAG,IAAb;;AAEA,WAAOpD,KAAK,CAACqD,aAAN,CAAoBhD,YAAY,CAACiD,QAAjC,EAA2C,IAA3C,EAAiD,UAAU/B,KAAV,EAAiB;AACvE6B,MAAAA,MAAM,CAAC7B,KAAP,GAAeA,KAAf;AACA,aAAO6B,MAAM,CAACG,UAAP,EAAP;AACD,KAHM,CAAP;AAID,GAPD;;AASAjB,EAAAA,MAAM,CAACiB,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAIC,cAAc,GAAG,KAAKpC,OAA1B;AAAA,QACIQ,MAAM,GAAG4B,cAAc,CAAC5B,MAD5B;AAAA,QAEIC,SAAS,GAAG2B,cAAc,CAAC3B,SAF/B;AAGA,QAAIC,IAAI,GAAGF,MAAM,CAACC,SAAD,CAAjB;AACA,QAAI4B,UAAU,GAAG3B,IAAI,IAAIA,IAAI,CAAC4B,aAAb,IAA8B5B,IAAI,CAAC4B,aAAL,EAA9B,IAAsD;AACrEC,MAAAA,KAAK,EAAE,KAD8D;AAErEC,MAAAA,OAAO,EAAE,KAF4D;AAGrEC,MAAAA,OAAO,EAAE,KAH4D;AAIrEC,MAAAA,OAAO,EAAE,KAJ4D;AAKrEC,MAAAA,QAAQ,EAAE;AAL2D,KAAvE;AAOA,WAAO/D,KAAK,CAACqD,aAAN,CAAoB,KAApB,EAA2B;AAChCW,MAAAA,SAAS,EAAE7D,EAAE,CAACG,QAAQ,CAAC2D,IAAT,CAAc,KAAK1C,KAAnB,CAAD,EAA4BkC,UAAU,CAACK,OAAX,IAAsBxD,QAAQ,CAACwD,OAAT,CAAiB,KAAKvC,KAAtB,CAAlD,EAAgFkC,UAAU,CAACI,OAAX,IAAsBvD,QAAQ,CAACuD,OAAT,CAAiB,KAAKtC,KAAtB,CAAtG,EAAoIkC,UAAU,CAACG,OAAX,IAAsBtD,QAAQ,CAACsD,OAAT,CAAiB,KAAKrC,KAAtB,CAA1J,EAAwLkC,UAAU,CAACE,KAAX,IAAoBrD,QAAQ,CAACqD,KAAT,CAAe,KAAKpC,KAApB,CAA5M,EAAwO,KAAKmB,KAAL,CAAWsB,SAAnP,CADmB;AAEhCE,MAAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWC;AAFc,KAA3B,CAAP;AAID,GAhBD;;AAkBAgB,EAAAA,MAAM,CAACN,SAAP,GAAmB,SAASA,SAAT,CAAmBF,IAAnB,EAAyB;AAC1C,QAAIA,IAAI,YAAY9B,KAAK,CAACmE,SAA1B,EAAqC;AACnCrC,MAAAA,IAAI,GAAG7B,WAAW,CAAC6B,IAAD,CAAlB;AACD;;AAED,QAAIA,IAAI,YAAYsC,WAApB,EAAiC;AAC/B,UAAIC,IAAI,GAAGvC,IAAI,CAACwC,qBAAL,EAAX;;AAEA,UAAI,KAAK5B,KAAL,CAAW6B,QAAf,EAAyB;AACvB,eAAO;AACLC,UAAAA,KAAK,EAAE,CADF;AAELC,UAAAA,IAAI,EAAE3C,IAAI,CAAC4C,UAFN;AAGLC,UAAAA,GAAG,EAAE7C,IAAI,CAAC8C,SAHL;AAILC,UAAAA,MAAM,EAAER,IAAI,CAACS,MAAL,GAAcT,IAAI,CAACM;AAJtB,SAAP;AAMD;;AAED,aAAO;AACLF,QAAAA,IAAI,EAAE3C,IAAI,CAAC4C,UADN;AAELC,QAAAA,GAAG,EAAE7C,IAAI,CAACiD,YAAL,GAAoBjD,IAAI,CAAC8C,SAAzB,GAAqC,CAFrC;AAGLJ,QAAAA,KAAK,EAAEH,IAAI,CAACW,KAAL,GAAaX,IAAI,CAACI;AAHpB,OAAP;AAKD;;AAED,WAAO,EAAP;AACD,GAzBD;;AA2BA,SAAOjE,SAAP;AACD,CAzHD,CAyHER,KAAK,CAACmE,SAzHR,CAFO;AA4HP3D,SAAS,CAACyE,WAAV,GAAwB1E,WAAxB","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport throttle from 'lodash.throttle';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Indicator.styles\";\nimport { TabsContext } from \"../TabsContext\";\nexport var Indicator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Indicator, _React$Component);\n\n  function Indicator() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.context = _this.context;\n    _this.state = {\n      styles: {}\n    };\n    _this.theme = void 0;\n    _this.eventListener = null;\n    _this.removeTabUpdatesListener = null;\n\n    _this.reflow = function () {\n      var _this$context = _this.context,\n          getTab = _this$context.getTab,\n          activeTab = _this$context.activeTab;\n      var node = getTab(activeTab);\n\n      var nodeStyles = _this.getStyles(node);\n\n      var stylesUpdated = ['left', 'top', 'width', 'height'].some(function (prop) {\n        return nodeStyles[prop] !== _this.state.styles[prop];\n      });\n\n      if (stylesUpdated) {\n        _this.setState({\n          styles: nodeStyles\n        });\n      }\n    };\n\n    _this.throttledReflow = throttle(_this.reflow, 100);\n    return _this;\n  }\n\n  var _proto = Indicator.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.eventListener = LayoutEvents.addListener(this.throttledReflow);\n    this.removeTabUpdatesListener = this.props.tabUpdates.on(this.reflow);\n    this.reflow();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.throttledReflow.cancel();\n\n    if (this.eventListener) {\n      this.eventListener.remove();\n    }\n\n    if (this.removeTabUpdatesListener) {\n      this.removeTabUpdatesListener();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    this.reflow();\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this$context2 = this.context,\n        getTab = _this$context2.getTab,\n        activeTab = _this$context2.activeTab;\n    var node = getTab(activeTab);\n    var indicators = node && node.getIndicators && node.getIndicators() || {\n      error: false,\n      warning: false,\n      success: false,\n      primary: false,\n      disabled: false\n    };\n    return React.createElement(\"div\", {\n      className: cn(jsStyles.root(this.theme), indicators.primary && jsStyles.primary(this.theme), indicators.success && jsStyles.success(this.theme), indicators.warning && jsStyles.warning(this.theme), indicators.error && jsStyles.error(this.theme), this.props.className),\n      style: this.state.styles\n    });\n  };\n\n  _proto.getStyles = function getStyles(node) {\n    if (node instanceof React.Component) {\n      node = findDOMNode(node);\n    }\n\n    if (node instanceof HTMLElement) {\n      var rect = node.getBoundingClientRect();\n\n      if (this.props.vertical) {\n        return {\n          width: 3,\n          left: node.offsetLeft,\n          top: node.offsetTop,\n          height: rect.bottom - rect.top\n        };\n      }\n\n      return {\n        left: node.offsetLeft,\n        top: node.offsetHeight + node.offsetTop - 3,\n        width: rect.right - rect.left\n      };\n    }\n\n    return {};\n  };\n\n  return Indicator;\n}(React.Component);\nIndicator.contextType = TabsContext;"]},"metadata":{},"sourceType":"module"}