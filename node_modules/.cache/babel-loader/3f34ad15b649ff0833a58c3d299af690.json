{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { jsStyles } from \"../Toast.styles\";\nimport { ToastView } from \"../ToastView\";\nimport { ToastStatic } from \"../ToastStatic\";\n/**\r\n                                              * Toast manages notifications\r\n                                              * method `push` is sending notification,\r\n                                              * then automatically hides it after 3 or 7 seconds,\r\n                                              * depending on if this notification contains action or not.\r\n                                              *\r\n                                              * Can be used like `Toast.push('message')` or\r\n                                              * `Toast.push('message', {label: 'Cancel', handler: cancelHandler})`\r\n                                              */\n\nexport var Toast = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Toast, _React$Component);\n\n  Toast.push = function push(notification, action) {\n    ToastStatic.push(notification, action);\n  };\n\n  Toast.close = function close() {\n    ToastStatic.close();\n  };\n\n  function Toast(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this._toast = void 0;\n    _this._timeout = null;\n\n    _this.close = function () {\n      safelyCall(_this.props.onClose, _this.state.notification, _this.state.action);\n\n      _this.setState({\n        notification: null,\n        action: null\n      });\n    };\n\n    _this._clearTimer = function () {\n      if (_this._timeout) {\n        clearTimeout(_this._timeout);\n        _this._timeout = null;\n      }\n    };\n\n    _this._setTimer = function () {\n      _this._clearTimer();\n\n      var timeOut = _this.state.action ? 7 : 3;\n      _this._timeout = window.setTimeout(_this.close, timeOut * 1000);\n    };\n\n    _this._refToast = function (element) {\n      _this._toast = element;\n    };\n\n    _this.state = {\n      notification: null,\n      action: null,\n      id: 0\n    };\n    return _this;\n  }\n\n  var _proto = Toast.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._clearTimer();\n  };\n\n  _proto.render = function render() {\n    return React.createElement(RenderContainer, null, React.createElement(TransitionGroup, null, this._renderToast()));\n  }\n  /**\r\n   * Показывает тост с `notification` в качестве сообщения.\r\n   *\r\n   * `action` опциональный параметр формата `{ label: string, handler: function }` добавляет кнопку в виде ссылки при клике на которую вызывается переданный handler\r\n   * @public\r\n   * @param notification\r\n   * @param action\r\n   */\n  ;\n\n  _proto.push = function push(notification, action) {\n    if (this.state.notification) {\n      this.close();\n    }\n\n    safelyCall(this.props.onPush, notification, action);\n    this.setState(function (_ref) {\n      var id = _ref.id;\n      return {\n        notification: notification,\n        action: action,\n        id: id + 1\n      };\n    }, this._setTimer);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto._renderToast = function _renderToast() {\n    var _this$state = this.state,\n        notification = _this$state.notification,\n        action = _this$state.action,\n        id = _this$state.id;\n\n    if (!notification) {\n      return null;\n    }\n\n    var toastProps = {\n      onMouseEnter: this._clearTimer,\n      onMouseLeave: this._setTimer,\n      onClose: this.close,\n      children: notification,\n      action: action\n    };\n    return React.createElement(CSSTransition, {\n      key: id,\n      classNames: {\n        enter: jsStyles.enter(),\n        enterActive: jsStyles.enterActive(),\n        exit: jsStyles.exit(),\n        exitActive: jsStyles.exitActive()\n      },\n      timeout: {\n        enter: 200,\n        exit: 150\n      }\n    }, React.createElement(ToastView, _extends({\n      ref: this._refToast\n    }, toastProps)));\n  };\n\n  return Toast;\n}(React.Component);\nToast.__KONTUR_REACT_UI__ = 'Toast';\n\nfunction safelyCall(fn) {\n  if (fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    fn.apply(void 0, args);\n  }\n}","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/Toast/Toast/Toast.js"],"names":["_extends","_inheritsLoose","React","CSSTransition","TransitionGroup","RenderContainer","jsStyles","ToastView","ToastStatic","Toast","_React$Component","push","notification","action","close","props","_this","call","_toast","_timeout","safelyCall","onClose","state","setState","_clearTimer","clearTimeout","_setTimer","timeOut","window","setTimeout","_refToast","element","id","_proto","prototype","componentWillUnmount","render","createElement","_renderToast","onPush","_ref","_this$state","toastProps","onMouseEnter","onMouseLeave","children","key","classNames","enter","enterActive","exit","exitActive","timeout","ref","Component","__KONTUR_REACT_UI__","fn","_len","arguments","length","args","Array","_key","apply"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { RenderContainer } from \"../../../internal/RenderContainer\";\nimport { jsStyles } from \"../Toast.styles\";\nimport { ToastView } from \"../ToastView\";\nimport { ToastStatic } from \"../ToastStatic\";\n/**\r\n                                              * Toast manages notifications\r\n                                              * method `push` is sending notification,\r\n                                              * then automatically hides it after 3 or 7 seconds,\r\n                                              * depending on if this notification contains action or not.\r\n                                              *\r\n                                              * Can be used like `Toast.push('message')` or\r\n                                              * `Toast.push('message', {label: 'Cancel', handler: cancelHandler})`\r\n                                              */\n\nexport var Toast =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Toast, _React$Component);\n\n  Toast.push = function push(notification, action) {\n    ToastStatic.push(notification, action);\n  };\n\n  Toast.close = function close() {\n    ToastStatic.close();\n  };\n\n  function Toast(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this._toast = void 0;\n    _this._timeout = null;\n\n    _this.close = function () {\n      safelyCall(_this.props.onClose, _this.state.notification, _this.state.action);\n\n      _this.setState({\n        notification: null,\n        action: null\n      });\n    };\n\n    _this._clearTimer = function () {\n      if (_this._timeout) {\n        clearTimeout(_this._timeout);\n        _this._timeout = null;\n      }\n    };\n\n    _this._setTimer = function () {\n      _this._clearTimer();\n\n      var timeOut = _this.state.action ? 7 : 3;\n      _this._timeout = window.setTimeout(_this.close, timeOut * 1000);\n    };\n\n    _this._refToast = function (element) {\n      _this._toast = element;\n    };\n\n    _this.state = {\n      notification: null,\n      action: null,\n      id: 0\n    };\n    return _this;\n  }\n\n  var _proto = Toast.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._clearTimer();\n  };\n\n  _proto.render = function render() {\n    return React.createElement(RenderContainer, null, React.createElement(TransitionGroup, null, this._renderToast()));\n  }\n  /**\r\n   * Показывает тост с `notification` в качестве сообщения.\r\n   *\r\n   * `action` опциональный параметр формата `{ label: string, handler: function }` добавляет кнопку в виде ссылки при клике на которую вызывается переданный handler\r\n   * @public\r\n   * @param notification\r\n   * @param action\r\n   */\n  ;\n\n  _proto.push = function push(notification, action) {\n    if (this.state.notification) {\n      this.close();\n    }\n\n    safelyCall(this.props.onPush, notification, action);\n    this.setState(function (_ref) {\n      var id = _ref.id;\n      return {\n        notification: notification,\n        action: action,\n        id: id + 1\n      };\n    }, this._setTimer);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto._renderToast = function _renderToast() {\n    var _this$state = this.state,\n        notification = _this$state.notification,\n        action = _this$state.action,\n        id = _this$state.id;\n\n    if (!notification) {\n      return null;\n    }\n\n    var toastProps = {\n      onMouseEnter: this._clearTimer,\n      onMouseLeave: this._setTimer,\n      onClose: this.close,\n      children: notification,\n      action: action\n    };\n    return React.createElement(CSSTransition, {\n      key: id,\n      classNames: {\n        enter: jsStyles.enter(),\n        enterActive: jsStyles.enterActive(),\n        exit: jsStyles.exit(),\n        exitActive: jsStyles.exitActive()\n      },\n      timeout: {\n        enter: 200,\n        exit: 150\n      }\n    }, React.createElement(ToastView, _extends({\n      ref: this._refToast\n    }, toastProps)));\n  };\n\n  return Toast;\n}(React.Component);\nToast.__KONTUR_REACT_UI__ = 'Toast';\n\nfunction safelyCall(fn) {\n  if (fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    fn.apply(void 0, args);\n  }\n}"]},"metadata":{},"sourceType":"module"}