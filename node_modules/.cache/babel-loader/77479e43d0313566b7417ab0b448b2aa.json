{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqual from 'shallowequal';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { isFunction } from \"../../../lib/utils\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { jsStyles } from \"../Sticky.styles\";\nvar MAX_REFLOW_RETRIES = 5;\nexport var Sticky = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Sticky, _React$Component);\n\n  function Sticky() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      fixed: false,\n      deltaHeight: 0,\n      stopped: false,\n      relativeTop: 0\n    };\n    _this.wrapper = void 0;\n    _this.inner = void 0;\n    _this.layoutSubscription = {\n      remove: null\n    };\n    _this.reflowCounter = 0;\n\n    _this.refWrapper = function (ref) {\n      return _this.wrapper = ref;\n    };\n\n    _this.refInner = function (ref) {\n      return _this.inner = ref;\n    };\n\n    _this.reflow = function () {\n      var _document = document,\n          documentElement = _document.documentElement;\n\n      if (!documentElement) {\n        throw Error('There is no \"documentElement\" in document');\n      }\n\n      var windowHeight = window.innerHeight || documentElement.clientHeight;\n\n      if (!_this.wrapper || !_this.inner) {\n        return;\n      }\n\n      var _this$wrapper$getBoun = _this.wrapper.getBoundingClientRect(),\n          top = _this$wrapper$getBoun.top,\n          bottom = _this$wrapper$getBoun.bottom,\n          left = _this$wrapper$getBoun.left;\n\n      var _this$inner$getBoundi = _this.inner.getBoundingClientRect(),\n          width = _this$inner$getBoundi.width,\n          height = _this$inner$getBoundi.height;\n\n      var _this$props = _this.props,\n          offset = _this$props.offset,\n          getStop = _this$props.getStop,\n          side = _this$props.side;\n      var _this$state = _this.state,\n          prevFixed = _this$state.fixed,\n          _this$state$height = _this$state.height,\n          prevHeight = _this$state$height === void 0 ? height : _this$state$height;\n      var fixed = side === 'top' ? top < offset : bottom > windowHeight - offset;\n\n      _this.setState({\n        fixed: fixed,\n        left: left\n      });\n\n      if (fixed && !prevFixed) {\n        _this.setState({\n          width: width,\n          height: height\n        });\n      }\n\n      if (fixed) {\n        var stop = getStop && getStop();\n\n        if (stop) {\n          var deltaHeight = prevHeight - height;\n          var stopRect = stop.getBoundingClientRect();\n          var outerHeight = height + offset;\n          var stopped = false;\n          var relativeTop = 0;\n\n          if (side === 'top') {\n            stopped = stopRect.top - outerHeight < 0;\n            relativeTop = stopRect.top - height - top;\n          } else {\n            stopped = stopRect.bottom + outerHeight > windowHeight;\n            relativeTop = stopRect.bottom - top;\n          }\n\n          _this.setState({\n            relativeTop: relativeTop,\n            deltaHeight: deltaHeight,\n            stopped: stopped\n          });\n        }\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = Sticky.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.reflow();\n    this.layoutSubscription = LayoutEvents.addListener(this.reflow);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.layoutSubscription.remove) {\n      this.layoutSubscription.remove();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (!shallowEqual(prevProps, this.props) || !shallowEqual(prevState, this.state)) {\n      if (this.reflowCounter < MAX_REFLOW_RETRIES) {\n        LayoutEvents.emit();\n        this.reflowCounter += 1;\n        return;\n      }\n    }\n\n    this.reflowCounter = 0;\n  };\n\n  _proto.render = function render() {\n    var _cn;\n\n    var children = this.props.children;\n    var _this$props2 = this.props,\n        side = _this$props2.side,\n        offset = _this$props2.offset;\n    var _this$state2 = this.state,\n        fixed = _this$state2.fixed,\n        stopped = _this$state2.stopped,\n        relativeTop = _this$state2.relativeTop,\n        deltaHeight = _this$state2.deltaHeight,\n        width = _this$state2.width,\n        height = _this$state2.height,\n        left = _this$state2.left;\n    var innerStyle = {};\n\n    if (fixed) {\n      if (stopped) {\n        innerStyle.top = relativeTop;\n        innerStyle[side === 'top' ? 'marginTop' : 'marginBottom'] = deltaHeight;\n      } else {\n        innerStyle.width = width;\n        innerStyle[side] = offset;\n        innerStyle.left = left;\n      }\n    }\n\n    if (isFunction(children)) {\n      children = children(fixed);\n    }\n\n    return React.createElement(\"div\", {\n      ref: this.refWrapper\n    }, React.createElement(ZIndex, {\n      priority: \"Sticky\",\n      applyZIndex: fixed,\n      className: cn(jsStyles.inner(), (_cn = {}, _cn[jsStyles.fixed()] = fixed && !stopped, _cn[jsStyles.stopped()] = stopped, _cn)),\n      style: innerStyle,\n      wrapperRef: this.refInner\n    }, React.createElement(\"div\", {\n      className: jsStyles.container()\n    }, children)), fixed && !stopped ? React.createElement(\"div\", {\n      style: {\n        width: width,\n        height: height\n      }\n    }) : null);\n  };\n\n  return Sticky;\n}(React.Component);\nSticky.__KONTUR_REACT_UI__ = 'Sticky';\nSticky.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n  /**\r\n   * Функция, которая возвращает DOM-элемент, который нельзя пересекать.\r\n   */\n  getStop: PropTypes.func,\n\n  /**\r\n   * Отступ от границы в пикселях\r\n   */\n  offset: PropTypes.number,\n  side: PropTypes.oneOf(['top', 'bottom']).isRequired\n};\nSticky.defaultProps = {\n  offset: 0\n};","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/Sticky/Sticky/Sticky.js"],"names":["_inheritsLoose","React","PropTypes","shallowEqual","cn","LayoutEvents","isFunction","ZIndex","jsStyles","MAX_REFLOW_RETRIES","Sticky","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","fixed","deltaHeight","stopped","relativeTop","wrapper","inner","layoutSubscription","remove","reflowCounter","refWrapper","ref","refInner","reflow","_document","document","documentElement","Error","windowHeight","window","innerHeight","clientHeight","_this$wrapper$getBoun","getBoundingClientRect","top","bottom","left","_this$inner$getBoundi","width","height","_this$props","props","offset","getStop","side","_this$state","prevFixed","_this$state$height","prevHeight","setState","stop","stopRect","outerHeight","_proto","prototype","componentDidMount","addListener","componentWillUnmount","componentDidUpdate","prevProps","prevState","emit","render","_cn","children","_this$props2","_this$state2","innerStyle","createElement","priority","applyZIndex","className","style","wrapperRef","container","Component","__KONTUR_REACT_UI__","propTypes","oneOfType","node","func","number","oneOf","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqual from 'shallowequal';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { isFunction } from \"../../../lib/utils\";\nimport { ZIndex } from \"../../../internal/ZIndex\";\nimport { jsStyles } from \"../Sticky.styles\";\nvar MAX_REFLOW_RETRIES = 5;\nexport var Sticky =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Sticky, _React$Component);\n\n  function Sticky() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      fixed: false,\n      deltaHeight: 0,\n      stopped: false,\n      relativeTop: 0\n    };\n    _this.wrapper = void 0;\n    _this.inner = void 0;\n    _this.layoutSubscription = {\n      remove: null\n    };\n    _this.reflowCounter = 0;\n\n    _this.refWrapper = function (ref) {\n      return _this.wrapper = ref;\n    };\n\n    _this.refInner = function (ref) {\n      return _this.inner = ref;\n    };\n\n    _this.reflow = function () {\n      var _document = document,\n          documentElement = _document.documentElement;\n\n      if (!documentElement) {\n        throw Error('There is no \"documentElement\" in document');\n      }\n\n      var windowHeight = window.innerHeight || documentElement.clientHeight;\n\n      if (!_this.wrapper || !_this.inner) {\n        return;\n      }\n\n      var _this$wrapper$getBoun = _this.wrapper.getBoundingClientRect(),\n          top = _this$wrapper$getBoun.top,\n          bottom = _this$wrapper$getBoun.bottom,\n          left = _this$wrapper$getBoun.left;\n\n      var _this$inner$getBoundi = _this.inner.getBoundingClientRect(),\n          width = _this$inner$getBoundi.width,\n          height = _this$inner$getBoundi.height;\n\n      var _this$props = _this.props,\n          offset = _this$props.offset,\n          getStop = _this$props.getStop,\n          side = _this$props.side;\n      var _this$state = _this.state,\n          prevFixed = _this$state.fixed,\n          _this$state$height = _this$state.height,\n          prevHeight = _this$state$height === void 0 ? height : _this$state$height;\n      var fixed = side === 'top' ? top < offset : bottom > windowHeight - offset;\n\n      _this.setState({\n        fixed: fixed,\n        left: left\n      });\n\n      if (fixed && !prevFixed) {\n        _this.setState({\n          width: width,\n          height: height\n        });\n      }\n\n      if (fixed) {\n        var stop = getStop && getStop();\n\n        if (stop) {\n          var deltaHeight = prevHeight - height;\n          var stopRect = stop.getBoundingClientRect();\n          var outerHeight = height + offset;\n          var stopped = false;\n          var relativeTop = 0;\n\n          if (side === 'top') {\n            stopped = stopRect.top - outerHeight < 0;\n            relativeTop = stopRect.top - height - top;\n          } else {\n            stopped = stopRect.bottom + outerHeight > windowHeight;\n            relativeTop = stopRect.bottom - top;\n          }\n\n          _this.setState({\n            relativeTop: relativeTop,\n            deltaHeight: deltaHeight,\n            stopped: stopped\n          });\n        }\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = Sticky.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.reflow();\n    this.layoutSubscription = LayoutEvents.addListener(this.reflow);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.layoutSubscription.remove) {\n      this.layoutSubscription.remove();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (!shallowEqual(prevProps, this.props) || !shallowEqual(prevState, this.state)) {\n      if (this.reflowCounter < MAX_REFLOW_RETRIES) {\n        LayoutEvents.emit();\n        this.reflowCounter += 1;\n        return;\n      }\n    }\n\n    this.reflowCounter = 0;\n  };\n\n  _proto.render = function render() {\n    var _cn;\n\n    var children = this.props.children;\n    var _this$props2 = this.props,\n        side = _this$props2.side,\n        offset = _this$props2.offset;\n    var _this$state2 = this.state,\n        fixed = _this$state2.fixed,\n        stopped = _this$state2.stopped,\n        relativeTop = _this$state2.relativeTop,\n        deltaHeight = _this$state2.deltaHeight,\n        width = _this$state2.width,\n        height = _this$state2.height,\n        left = _this$state2.left;\n    var innerStyle = {};\n\n    if (fixed) {\n      if (stopped) {\n        innerStyle.top = relativeTop;\n        innerStyle[side === 'top' ? 'marginTop' : 'marginBottom'] = deltaHeight;\n      } else {\n        innerStyle.width = width;\n        innerStyle[side] = offset;\n        innerStyle.left = left;\n      }\n    }\n\n    if (isFunction(children)) {\n      children = children(fixed);\n    }\n\n    return React.createElement(\"div\", {\n      ref: this.refWrapper\n    }, React.createElement(ZIndex, {\n      priority: \"Sticky\",\n      applyZIndex: fixed,\n      className: cn(jsStyles.inner(), (_cn = {}, _cn[jsStyles.fixed()] = fixed && !stopped, _cn[jsStyles.stopped()] = stopped, _cn)),\n      style: innerStyle,\n      wrapperRef: this.refInner\n    }, React.createElement(\"div\", {\n      className: jsStyles.container()\n    }, children)), fixed && !stopped ? React.createElement(\"div\", {\n      style: {\n        width: width,\n        height: height\n      }\n    }) : null);\n  };\n\n  return Sticky;\n}(React.Component);\nSticky.__KONTUR_REACT_UI__ = 'Sticky';\nSticky.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n  /**\r\n   * Функция, которая возвращает DOM-элемент, который нельзя пересекать.\r\n   */\n  getStop: PropTypes.func,\n\n  /**\r\n   * Отступ от границы в пикселях\r\n   */\n  offset: PropTypes.number,\n  side: PropTypes.oneOf(['top', 'bottom']).isRequired\n};\nSticky.defaultProps = {\n  offset: 0\n};"]},"metadata":{},"sourceType":"module"}