{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { RenderContainer } from \"../../RenderContainer\";\nimport { ZIndex } from \"../../ZIndex\";\nimport { createPropsGetter } from \"../../../lib/createPropsGetter\";\nexport var DropdownContainer = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DropdownContainer, _React$Component);\n\n  function DropdownContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      position: null,\n      minWidth: 0,\n      isDocumentElementRoot: true\n    };\n    _this.getProps = createPropsGetter(DropdownContainer.defaultProps);\n    _this.dom = null;\n    _this.layoutSub = void 0;\n\n    _this.ref = function (e) {\n      _this.dom = e && findDOMNode(e);\n    };\n\n    _this.isElement = function (node) {\n      return node instanceof Element;\n    };\n\n    _this.position = function () {\n      var target = _this.props.getParent();\n\n      var dom = _this.dom;\n\n      if (_this.isElement(target) && dom) {\n        var targetRect = target.getBoundingClientRect();\n        var _document = document,\n            body = _document.body,\n            docEl = _document.documentElement;\n\n        if (!docEl) {\n          throw Error('There is no \"documentElement\" in \"document\"');\n        }\n\n        var scrollX = window.pageXOffset || docEl.scrollLeft || 0;\n        var scrollY = window.pageYOffset || docEl.scrollTop || 0;\n        var left = null;\n        var right = null;\n\n        if (_this.props.align === 'right') {\n          var docWidth = docEl.offsetWidth || 0;\n          right = docWidth - (targetRect.right + scrollX) + _this.getProps().offsetX;\n        } else {\n          left = targetRect.left + scrollX + _this.getProps().offsetX;\n        }\n\n        var _this$props$offsetY = _this.props.offsetY,\n            offsetY = _this$props$offsetY === void 0 ? 0 : _this$props$offsetY;\n        var bottom = null;\n        var top = targetRect.bottom + scrollY + offsetY;\n        var distanceToBottom = docEl.clientHeight - targetRect.bottom;\n\n        var dropdownHeight = _this.getHeight();\n\n        if (distanceToBottom < dropdownHeight && targetRect.top > dropdownHeight) {\n          var clientHeight = _this.state.isDocumentElementRoot ? docEl.clientHeight : body.scrollHeight;\n          top = null;\n          bottom = clientHeight + offsetY - scrollY - targetRect.top;\n        }\n\n        var position = {\n          top: top,\n          left: left,\n          right: right,\n          bottom: bottom\n        };\n\n        _this.setState({\n          minWidth: _this.getMinWidth(),\n          position: _this.props.disablePortal ? _this.convertToRelativePosition(position) : position\n        });\n      }\n    };\n\n    _this.getHeight = function () {\n      if (!_this.isElement(_this.dom)) {\n        return 0;\n      }\n\n      var child = _this.dom.children.item(0);\n\n      if (!child) {\n        return 0;\n      }\n\n      return child.getBoundingClientRect().height;\n    };\n\n    _this.getMinWidth = function () {\n      var target = _this.props.getParent();\n\n      if (!_this.isElement(target)) {\n        return 0;\n      }\n\n      return target.getBoundingClientRect().width;\n    };\n\n    _this.convertToRelativePosition = function (position) {\n      var target = _this.props.getParent();\n\n      var _this$props = _this.props,\n          _this$props$offsetX = _this$props.offsetX,\n          offsetX = _this$props$offsetX === void 0 ? 0 : _this$props$offsetX,\n          _this$props$offsetY2 = _this$props.offsetY,\n          offsetY = _this$props$offsetY2 === void 0 ? 0 : _this$props$offsetY2;\n      var top = position.top,\n          bottom = position.bottom,\n          left = position.left,\n          right = position.right;\n\n      if (_this.isElement(target)) {\n        var targetHeight = target.getBoundingClientRect().height;\n        return {\n          top: top !== null ? targetHeight + offsetY : null,\n          bottom: bottom !== null ? targetHeight + offsetY : null,\n          left: left !== null ? offsetX : null,\n          right: right !== null ? offsetX : null\n        };\n      }\n\n      return {\n        top: offsetY,\n        bottom: null,\n        left: offsetX,\n        right: null\n      };\n    };\n\n    return _this;\n  }\n\n  var _proto = DropdownContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.position();\n    this.layoutSub = LayoutEvents.addListener(this.position);\n  };\n\n  _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n    var _document2 = document,\n        body = _document2.body,\n        docEl = _document2.documentElement;\n    var htmlPosition = getComputedStyle(docEl).position;\n    var bodyPosition = getComputedStyle(body).position;\n    var hasLimitedHeightRoot = body.scrollHeight > body.clientHeight;\n    var hasStaticRoot = htmlPosition === 'static' && bodyPosition === 'static';\n    this.setState({\n      isDocumentElementRoot: hasLimitedHeightRoot || hasStaticRoot\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.layoutSub) {\n      this.layoutSub.remove();\n    }\n  };\n\n  _proto.render = function render() {\n    var style = {\n      position: 'absolute',\n      top: '0'\n    };\n\n    if (this.state.position) {\n      var _this$state$position = this.state.position,\n          top = _this$state$position.top,\n          bottom = _this$state$position.bottom,\n          left = _this$state$position.left,\n          right = _this$state$position.right;\n      style = _extends({}, style, {\n        top: top !== null ? top : undefined,\n        bottom: bottom !== null ? bottom : undefined,\n        left: left !== null ? left : undefined,\n        right: right !== null ? right : undefined,\n        minWidth: this.state.minWidth\n      });\n    }\n\n    var content = React.createElement(ZIndex, {\n      priority: 'DropdownContainer',\n      ref: this.ref,\n      style: style\n    }, this.props.children);\n    return this.props.disablePortal ? content : React.createElement(RenderContainer, null, content);\n  };\n\n  return DropdownContainer;\n}(React.Component);\nDropdownContainer.__KONTUR_REACT_UI__ = 'DropdownContainer';\nDropdownContainer.defaultProps = {\n  align: 'left',\n  disablePortal: false,\n  offsetX: 0,\n  offsetY: -1\n};","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/internal/DropdownContainer/DropdownContainer/DropdownContainer.js"],"names":["_extends","_inheritsLoose","React","findDOMNode","LayoutEvents","RenderContainer","ZIndex","createPropsGetter","DropdownContainer","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","position","minWidth","isDocumentElementRoot","getProps","defaultProps","dom","layoutSub","ref","e","isElement","node","Element","target","props","getParent","targetRect","getBoundingClientRect","_document","document","body","docEl","documentElement","Error","scrollX","window","pageXOffset","scrollLeft","scrollY","pageYOffset","scrollTop","left","right","align","docWidth","offsetWidth","offsetX","_this$props$offsetY","offsetY","bottom","top","distanceToBottom","clientHeight","dropdownHeight","getHeight","scrollHeight","setState","getMinWidth","disablePortal","convertToRelativePosition","child","children","item","height","width","_this$props","_this$props$offsetX","_this$props$offsetY2","targetHeight","_proto","prototype","componentDidMount","addListener","UNSAFE_componentWillMount","_document2","htmlPosition","getComputedStyle","bodyPosition","hasLimitedHeightRoot","hasStaticRoot","componentWillUnmount","remove","render","style","_this$state$position","undefined","content","createElement","priority","Component","__KONTUR_REACT_UI__"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { RenderContainer } from \"../../RenderContainer\";\nimport { ZIndex } from \"../../ZIndex\";\nimport { createPropsGetter } from \"../../../lib/createPropsGetter\";\nexport var DropdownContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DropdownContainer, _React$Component);\n\n  function DropdownContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      position: null,\n      minWidth: 0,\n      isDocumentElementRoot: true\n    };\n    _this.getProps = createPropsGetter(DropdownContainer.defaultProps);\n    _this.dom = null;\n    _this.layoutSub = void 0;\n\n    _this.ref = function (e) {\n      _this.dom = e && findDOMNode(e);\n    };\n\n    _this.isElement = function (node) {\n      return node instanceof Element;\n    };\n\n    _this.position = function () {\n      var target = _this.props.getParent();\n\n      var dom = _this.dom;\n\n      if (_this.isElement(target) && dom) {\n        var targetRect = target.getBoundingClientRect();\n        var _document = document,\n            body = _document.body,\n            docEl = _document.documentElement;\n\n        if (!docEl) {\n          throw Error('There is no \"documentElement\" in \"document\"');\n        }\n\n        var scrollX = window.pageXOffset || docEl.scrollLeft || 0;\n        var scrollY = window.pageYOffset || docEl.scrollTop || 0;\n        var left = null;\n        var right = null;\n\n        if (_this.props.align === 'right') {\n          var docWidth = docEl.offsetWidth || 0;\n          right = docWidth - (targetRect.right + scrollX) + _this.getProps().offsetX;\n        } else {\n          left = targetRect.left + scrollX + _this.getProps().offsetX;\n        }\n\n        var _this$props$offsetY = _this.props.offsetY,\n            offsetY = _this$props$offsetY === void 0 ? 0 : _this$props$offsetY;\n        var bottom = null;\n        var top = targetRect.bottom + scrollY + offsetY;\n        var distanceToBottom = docEl.clientHeight - targetRect.bottom;\n\n        var dropdownHeight = _this.getHeight();\n\n        if (distanceToBottom < dropdownHeight && targetRect.top > dropdownHeight) {\n          var clientHeight = _this.state.isDocumentElementRoot ? docEl.clientHeight : body.scrollHeight;\n          top = null;\n          bottom = clientHeight + offsetY - scrollY - targetRect.top;\n        }\n\n        var position = {\n          top: top,\n          left: left,\n          right: right,\n          bottom: bottom\n        };\n\n        _this.setState({\n          minWidth: _this.getMinWidth(),\n          position: _this.props.disablePortal ? _this.convertToRelativePosition(position) : position\n        });\n      }\n    };\n\n    _this.getHeight = function () {\n      if (!_this.isElement(_this.dom)) {\n        return 0;\n      }\n\n      var child = _this.dom.children.item(0);\n\n      if (!child) {\n        return 0;\n      }\n\n      return child.getBoundingClientRect().height;\n    };\n\n    _this.getMinWidth = function () {\n      var target = _this.props.getParent();\n\n      if (!_this.isElement(target)) {\n        return 0;\n      }\n\n      return target.getBoundingClientRect().width;\n    };\n\n    _this.convertToRelativePosition = function (position) {\n      var target = _this.props.getParent();\n\n      var _this$props = _this.props,\n          _this$props$offsetX = _this$props.offsetX,\n          offsetX = _this$props$offsetX === void 0 ? 0 : _this$props$offsetX,\n          _this$props$offsetY2 = _this$props.offsetY,\n          offsetY = _this$props$offsetY2 === void 0 ? 0 : _this$props$offsetY2;\n      var top = position.top,\n          bottom = position.bottom,\n          left = position.left,\n          right = position.right;\n\n      if (_this.isElement(target)) {\n        var targetHeight = target.getBoundingClientRect().height;\n        return {\n          top: top !== null ? targetHeight + offsetY : null,\n          bottom: bottom !== null ? targetHeight + offsetY : null,\n          left: left !== null ? offsetX : null,\n          right: right !== null ? offsetX : null\n        };\n      }\n\n      return {\n        top: offsetY,\n        bottom: null,\n        left: offsetX,\n        right: null\n      };\n    };\n\n    return _this;\n  }\n\n  var _proto = DropdownContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.position();\n    this.layoutSub = LayoutEvents.addListener(this.position);\n  };\n\n  _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n    var _document2 = document,\n        body = _document2.body,\n        docEl = _document2.documentElement;\n    var htmlPosition = getComputedStyle(docEl).position;\n    var bodyPosition = getComputedStyle(body).position;\n    var hasLimitedHeightRoot = body.scrollHeight > body.clientHeight;\n    var hasStaticRoot = htmlPosition === 'static' && bodyPosition === 'static';\n    this.setState({\n      isDocumentElementRoot: hasLimitedHeightRoot || hasStaticRoot\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.layoutSub) {\n      this.layoutSub.remove();\n    }\n  };\n\n  _proto.render = function render() {\n    var style = {\n      position: 'absolute',\n      top: '0'\n    };\n\n    if (this.state.position) {\n      var _this$state$position = this.state.position,\n          top = _this$state$position.top,\n          bottom = _this$state$position.bottom,\n          left = _this$state$position.left,\n          right = _this$state$position.right;\n      style = _extends({}, style, {\n        top: top !== null ? top : undefined,\n        bottom: bottom !== null ? bottom : undefined,\n        left: left !== null ? left : undefined,\n        right: right !== null ? right : undefined,\n        minWidth: this.state.minWidth\n      });\n    }\n\n    var content = React.createElement(ZIndex, {\n      priority: 'DropdownContainer',\n      ref: this.ref,\n      style: style\n    }, this.props.children);\n    return this.props.disablePortal ? content : React.createElement(RenderContainer, null, content);\n  };\n\n  return DropdownContainer;\n}(React.Component);\nDropdownContainer.__KONTUR_REACT_UI__ = 'DropdownContainer';\nDropdownContainer.defaultProps = {\n  align: 'left',\n  disablePortal: false,\n  offsetX: 0,\n  offsetY: -1\n};"]},"metadata":{},"sourceType":"module"}