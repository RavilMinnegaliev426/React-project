{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport { ScrollContainer } from \"../../../components/ScrollContainer\";\nimport { isMenuItem } from \"../../../components/MenuItem\";\nimport { isMenuHeader } from \"../../../components/MenuHeader\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Menu.styles\";\nimport { isActiveElement } from \"../isActiveElement\";\nexport var Menu = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Menu, _React$Component);\n\n  function Menu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      highlightedIndex: -1\n    };\n    _this.theme = void 0;\n    _this.scrollContainer = void 0;\n    _this.highlighted = void 0;\n    _this.unmounted = false;\n\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(ReactDOM.findDOMNode(_this.highlighted));\n      }\n    };\n\n    _this.scrollToTop = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToTop();\n      }\n    };\n\n    _this.scrollToBottom = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToBottom();\n      }\n    };\n\n    _this.highlight = function (index) {\n      _this.setState({\n        highlightedIndex: index\n      });\n    };\n\n    _this.unhighlight = function () {\n      _this.setState({\n        highlightedIndex: -1\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = Menu.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounted = true;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.up = function up() {\n    this.move(-1);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.down = function down() {\n    this.move(1);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.enter = function enter(event) {\n    return this.select(this.state.highlightedIndex, true, event);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.setState({\n      highlightedIndex: -1\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.hasHighlightedItem = function hasHighlightedItem() {\n    return this.state.highlightedIndex !== -1;\n  };\n\n  _proto.highlightItem = function highlightItem(index) {\n    this.highlight(index);\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn,\n        _this3 = this;\n\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {\n      return React.isValidElement(x) && x.props.icon;\n    });\n\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: cn((_cn = {}, _cn[jsStyles.root(this.theme)] = true, _cn[jsStyles.shadow(this.theme)] = this.props.hasShadow, _cn)),\n      style: {\n        width: this.props.width,\n        maxHeight: this.props.maxHeight\n      }\n    }, React.createElement(ScrollContainer, {\n      ref: this.refScrollContainer,\n      maxHeight: this.props.maxHeight,\n      preventWindowScroll: this.props.preventWindowScroll\n    }, React.Children.map(this.props.children, function (child, index) {\n      if (!child) {\n        return child;\n      }\n\n      if (typeof child === 'string' || typeof child === 'number') {\n        return child;\n      }\n\n      if (enableIconPadding && (isMenuItem(child) || isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true\n        });\n      }\n\n      if (isActiveElement(child)) {\n        var highlight = _this3.state.highlightedIndex === index;\n        var ref = child.ref;\n\n        if (highlight && typeof child.ref !== 'string') {\n          ref = _this3.refHighlighted.bind(_this3, child.ref);\n        }\n\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this3.select.bind(_this3, index, false),\n          onMouseEnter: _this3.highlight.bind(_this3, index),\n          onMouseLeave: _this3.unhighlight\n        });\n      }\n\n      return child;\n    })));\n  };\n\n  _proto.refHighlighted = function refHighlighted(originalRef, menuItem) {\n    this.highlighted = menuItem;\n\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    }\n  };\n\n  _proto.select = function select(index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n\n    if (isActiveElement(item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else {\n          location.href = item.props.href;\n        }\n      }\n\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n\n      if (this.props.onItemClick) {\n        this.props.onItemClick();\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.move = function move(step) {\n    var _this4 = this;\n\n    if (this.unmounted) {\n      // NOTE workaround, because `ComboBox` call `process.nextTick` in reducer\n      return;\n    }\n\n    var children = childrenToArray(this.props.children);\n    var activeElements = children.filter(isActiveElement);\n\n    if (!activeElements.length) {\n      return;\n    }\n\n    var index = this.state.highlightedIndex;\n\n    var _loop = function _loop() {\n      index += step;\n\n      if (index < 0) {\n        index = children.length - 1;\n      } else if (index > children.length) {\n        index = 0;\n      }\n\n      var child = children[index];\n\n      if (isActiveElement(child)) {\n        _this4.setState({\n          highlightedIndex: index\n        }, function () {\n          switch (activeElements.indexOf(child)) {\n            case 0:\n              _this4.scrollToTop();\n\n              break;\n\n            case activeElements.length - 1:\n              _this4.scrollToBottom();\n\n              break;\n\n            default:\n              _this4.scrollToSelected();\n\n          }\n        });\n\n        return {\n          v: void 0\n        };\n      }\n    };\n\n    do {\n      var _ret = _loop();\n\n      if (typeof _ret === \"object\") return _ret.v;\n    } while (index !== this.state.highlightedIndex);\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n\n  return Menu;\n}(React.Component);\nMenu.__KONTUR_REACT_UI__ = 'Menu';\nMenu.defaultProps = {\n  width: 'auto',\n  maxHeight: 300,\n  hasShadow: true,\n  preventWindowScroll: true\n};\n\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\n\nfunction childrenToArray(children) {\n  var ret = []; // Use forEach instead of map to avoid cloning for key unifying.\n\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/internal/Menu/Menu/Menu.js"],"names":["_inheritsLoose","React","ReactDOM","cn","ScrollContainer","isMenuItem","isMenuHeader","ThemeContext","jsStyles","isActiveElement","Menu","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","highlightedIndex","theme","scrollContainer","highlighted","unmounted","refScrollContainer","scrollToSelected","scrollTo","findDOMNode","scrollToTop","scrollToBottom","highlight","index","setState","unhighlight","_proto","prototype","componentWillUnmount","render","_this2","createElement","Consumer","renderMain","up","move","down","enter","event","select","reset","hasHighlightedItem","highlightItem","_cn","_this3","enableIconPadding","Children","toArray","props","children","some","x","isValidElement","icon","isEmpty","className","root","shadow","hasShadow","style","width","maxHeight","ref","preventWindowScroll","map","child","cloneElement","_enableIconPadding","refHighlighted","bind","onClick","onMouseEnter","onMouseLeave","originalRef","menuItem","shouldHandleHref","item","childrenToArray","href","target","window","open","location","onItemClick","step","_this4","activeElements","filter","_loop","indexOf","v","_ret","isExist","Component","__KONTUR_REACT_UI__","defaultProps","value","undefined","ret","forEach","push"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport { ScrollContainer } from \"../../../components/ScrollContainer\";\nimport { isMenuItem } from \"../../../components/MenuItem\";\nimport { isMenuHeader } from \"../../../components/MenuHeader\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../Menu.styles\";\nimport { isActiveElement } from \"../isActiveElement\";\nexport var Menu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Menu, _React$Component);\n\n  function Menu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      highlightedIndex: -1\n    };\n    _this.theme = void 0;\n    _this.scrollContainer = void 0;\n    _this.highlighted = void 0;\n    _this.unmounted = false;\n\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(ReactDOM.findDOMNode(_this.highlighted));\n      }\n    };\n\n    _this.scrollToTop = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToTop();\n      }\n    };\n\n    _this.scrollToBottom = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToBottom();\n      }\n    };\n\n    _this.highlight = function (index) {\n      _this.setState({\n        highlightedIndex: index\n      });\n    };\n\n    _this.unhighlight = function () {\n      _this.setState({\n        highlightedIndex: -1\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = Menu.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounted = true;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.up = function up() {\n    this.move(-1);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.down = function down() {\n    this.move(1);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.enter = function enter(event) {\n    return this.select(this.state.highlightedIndex, true, event);\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.setState({\n      highlightedIndex: -1\n    });\n  }\n  /**\r\n   * @public\r\n   */\n  ;\n\n  _proto.hasHighlightedItem = function hasHighlightedItem() {\n    return this.state.highlightedIndex !== -1;\n  };\n\n  _proto.highlightItem = function highlightItem(index) {\n    this.highlight(index);\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _cn,\n        _this3 = this;\n\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {\n      return React.isValidElement(x) && x.props.icon;\n    });\n\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: cn((_cn = {}, _cn[jsStyles.root(this.theme)] = true, _cn[jsStyles.shadow(this.theme)] = this.props.hasShadow, _cn)),\n      style: {\n        width: this.props.width,\n        maxHeight: this.props.maxHeight\n      }\n    }, React.createElement(ScrollContainer, {\n      ref: this.refScrollContainer,\n      maxHeight: this.props.maxHeight,\n      preventWindowScroll: this.props.preventWindowScroll\n    }, React.Children.map(this.props.children, function (child, index) {\n      if (!child) {\n        return child;\n      }\n\n      if (typeof child === 'string' || typeof child === 'number') {\n        return child;\n      }\n\n      if (enableIconPadding && (isMenuItem(child) || isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true\n        });\n      }\n\n      if (isActiveElement(child)) {\n        var highlight = _this3.state.highlightedIndex === index;\n        var ref = child.ref;\n\n        if (highlight && typeof child.ref !== 'string') {\n          ref = _this3.refHighlighted.bind(_this3, child.ref);\n        }\n\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this3.select.bind(_this3, index, false),\n          onMouseEnter: _this3.highlight.bind(_this3, index),\n          onMouseLeave: _this3.unhighlight\n        });\n      }\n\n      return child;\n    })));\n  };\n\n  _proto.refHighlighted = function refHighlighted(originalRef, menuItem) {\n    this.highlighted = menuItem;\n\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    }\n  };\n\n  _proto.select = function select(index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n\n    if (isActiveElement(item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else {\n          location.href = item.props.href;\n        }\n      }\n\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n\n      if (this.props.onItemClick) {\n        this.props.onItemClick();\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.move = function move(step) {\n    var _this4 = this;\n\n    if (this.unmounted) {\n      // NOTE workaround, because `ComboBox` call `process.nextTick` in reducer\n      return;\n    }\n\n    var children = childrenToArray(this.props.children);\n    var activeElements = children.filter(isActiveElement);\n\n    if (!activeElements.length) {\n      return;\n    }\n\n    var index = this.state.highlightedIndex;\n\n    var _loop = function _loop() {\n      index += step;\n\n      if (index < 0) {\n        index = children.length - 1;\n      } else if (index > children.length) {\n        index = 0;\n      }\n\n      var child = children[index];\n\n      if (isActiveElement(child)) {\n        _this4.setState({\n          highlightedIndex: index\n        }, function () {\n          switch (activeElements.indexOf(child)) {\n            case 0:\n              _this4.scrollToTop();\n\n              break;\n\n            case activeElements.length - 1:\n              _this4.scrollToBottom();\n\n              break;\n\n            default:\n              _this4.scrollToSelected();\n\n          }\n        });\n\n        return {\n          v: void 0\n        };\n      }\n    };\n\n    do {\n      var _ret = _loop();\n\n      if (typeof _ret === \"object\") return _ret.v;\n    } while (index !== this.state.highlightedIndex);\n  };\n\n  _proto.isEmpty = function isEmpty() {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n\n  return Menu;\n}(React.Component);\nMenu.__KONTUR_REACT_UI__ = 'Menu';\nMenu.defaultProps = {\n  width: 'auto',\n  maxHeight: 300,\n  hasShadow: true,\n  preventWindowScroll: true\n};\n\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\n\nfunction childrenToArray(children) {\n  var ret = []; // Use forEach instead of map to avoid cloning for key unifying.\n\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}"]},"metadata":{},"sourceType":"module"}