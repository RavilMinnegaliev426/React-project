{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../SidePage.styles\";\nimport { SidePageContext } from \"../SidePageContext\";\n/**\r\n                                                      * Футер сайдпейджа.\r\n                                                      *\r\n                                                      * @visibleName SidePage.Footer\r\n                                                      */\n\nexport var SidePageFooter = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(SidePageFooter, _React$Component);\n\n  function SidePageFooter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.context = _this.context;\n    _this.state = {\n      fixed: false\n    };\n    _this.theme = void 0;\n    _this.content = null;\n    _this.wrapper = null;\n    _this.layoutSub = null;\n\n    _this.update = function () {\n      _this.setProperStyles();\n    };\n\n    _this.refContent = function (node) {\n      _this.content = node;\n    };\n\n    _this.refWrapper = function (node) {\n      _this.wrapper = node;\n    };\n\n    _this.setProperStyles = function () {\n      if (_this.wrapper && _this.content) {\n        var wrapperRect = _this.wrapper.getBoundingClientRect();\n\n        var contentRect = _this.content.getBoundingClientRect();\n\n        var _fixed = wrapperRect.top > contentRect.top;\n\n        _this.setState({\n          fixed: _fixed\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePageFooter.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.context.footerRef(this);\n    this.update();\n    this.layoutSub = LayoutEvents.addListener(this.update);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.context.footerRef(null);\n\n    if (this.layoutSub) {\n      this.layoutSub.remove();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this3 = this;\n\n    return React.createElement(\"div\", {\n      style: {\n        height: this.getContentHeight()\n      },\n      ref: this.refWrapper\n    }, React.createElement(SidePageContext.Consumer, null, function (_ref) {\n      var _cn;\n\n      var getWidth = _ref.getWidth;\n      return React.createElement(\"div\", {\n        className: jsStyles.footer(),\n        style: {\n          width: getWidth()\n        }\n      }, React.createElement(\"div\", {\n        className: cn(jsStyles.footerContent(), (_cn = {}, _cn[jsStyles.panel(_this3.theme)] = !!_this3.props.panel, _cn[jsStyles.footerFixed(_this3.theme)] = _this3.state.fixed, _cn)),\n        ref: _this3.refContent\n      }, _this3.props.children));\n    }));\n  };\n\n  _proto.getContentHeight = function getContentHeight() {\n    if (!this.content) {\n      return 'auto';\n    }\n\n    return this.content.getBoundingClientRect().height;\n  };\n\n  return SidePageFooter;\n}(React.Component);\nSidePageFooter.__KONTUR_REACT_UI__ = 'SidePageFooter';\nSidePageFooter.contextType = SidePageContext;","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/components/SidePage/SidePageFooter/SidePageFooter.js"],"names":["_inheritsLoose","React","cn","LayoutEvents","ThemeContext","jsStyles","SidePageContext","SidePageFooter","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","context","state","fixed","theme","content","wrapper","layoutSub","update","setProperStyles","refContent","node","refWrapper","wrapperRect","getBoundingClientRect","contentRect","_fixed","top","setState","_proto","prototype","componentDidMount","footerRef","addListener","componentWillUnmount","remove","render","_this2","createElement","Consumer","renderMain","_this3","style","height","getContentHeight","ref","_ref","_cn","getWidth","className","footer","width","footerContent","panel","props","footerFixed","children","Component","__KONTUR_REACT_UI__","contextType"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,0CAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAO,KAAKC,YAAZ,MAA8B,2BAA9B;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA;;;;;;AAMA,OAAO,IAAIC,cAAc,GACzB,aACA,UAAUC,gBAAV,EAA4B;AAC1BR,EAAAA,cAAc,CAACO,cAAD,EAAiBC,gBAAjB,CAAd;;AAEA,WAASD,cAAT,GAA0B;AACxB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,gBAAgB,CAACQ,IAAjB,CAAsBC,KAAtB,CAA4BT,gBAA5B,EAA8C,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAA9E;AACAJ,IAAAA,KAAK,CAACU,OAAN,GAAgBV,KAAK,CAACU,OAAtB;AACAV,IAAAA,KAAK,CAACW,KAAN,GAAc;AACZC,MAAAA,KAAK,EAAE;AADK,KAAd;AAGAZ,IAAAA,KAAK,CAACa,KAAN,GAAc,KAAK,CAAnB;AACAb,IAAAA,KAAK,CAACc,OAAN,GAAgB,IAAhB;AACAd,IAAAA,KAAK,CAACe,OAAN,GAAgB,IAAhB;AACAf,IAAAA,KAAK,CAACgB,SAAN,GAAkB,IAAlB;;AAEAhB,IAAAA,KAAK,CAACiB,MAAN,GAAe,YAAY;AACzBjB,MAAAA,KAAK,CAACkB,eAAN;AACD,KAFD;;AAIAlB,IAAAA,KAAK,CAACmB,UAAN,GAAmB,UAAUC,IAAV,EAAgB;AACjCpB,MAAAA,KAAK,CAACc,OAAN,GAAgBM,IAAhB;AACD,KAFD;;AAIApB,IAAAA,KAAK,CAACqB,UAAN,GAAmB,UAAUD,IAAV,EAAgB;AACjCpB,MAAAA,KAAK,CAACe,OAAN,GAAgBK,IAAhB;AACD,KAFD;;AAIApB,IAAAA,KAAK,CAACkB,eAAN,GAAwB,YAAY;AAClC,UAAIlB,KAAK,CAACe,OAAN,IAAiBf,KAAK,CAACc,OAA3B,EAAoC;AAClC,YAAIQ,WAAW,GAAGtB,KAAK,CAACe,OAAN,CAAcQ,qBAAd,EAAlB;;AAEA,YAAIC,WAAW,GAAGxB,KAAK,CAACc,OAAN,CAAcS,qBAAd,EAAlB;;AAEA,YAAIE,MAAM,GAAGH,WAAW,CAACI,GAAZ,GAAkBF,WAAW,CAACE,GAA3C;;AAEA1B,QAAAA,KAAK,CAAC2B,QAAN,CAAe;AACbf,UAAAA,KAAK,EAAEa;AADM,SAAf;AAGD;AACF,KAZD;;AAcA,WAAOzB,KAAP;AACD;;AAED,MAAI4B,MAAM,GAAG9B,cAAc,CAAC+B,SAA5B;;AAEAD,EAAAA,MAAM,CAACE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKpB,OAAL,CAAaqB,SAAb,CAAuB,IAAvB;AACA,SAAKd,MAAL;AACA,SAAKD,SAAL,GAAiBtB,YAAY,CAACsC,WAAb,CAAyB,KAAKf,MAA9B,CAAjB;AACD,GAJD;;AAMAW,EAAAA,MAAM,CAACK,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,SAAKvB,OAAL,CAAaqB,SAAb,CAAuB,IAAvB;;AAEA,QAAI,KAAKf,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAekB,MAAf;AACD;AACF,GAND;;AAQAN,EAAAA,MAAM,CAACO,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,MAAM,GAAG,IAAb;;AAEA,WAAO5C,KAAK,CAAC6C,aAAN,CAAoB1C,YAAY,CAAC2C,QAAjC,EAA2C,IAA3C,EAAiD,UAAUzB,KAAV,EAAiB;AACvEuB,MAAAA,MAAM,CAACvB,KAAP,GAAeA,KAAf;AACA,aAAOuB,MAAM,CAACG,UAAP,EAAP;AACD,KAHM,CAAP;AAID,GAPD;;AASAX,EAAAA,MAAM,CAACW,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAIC,MAAM,GAAG,IAAb;;AAEA,WAAOhD,KAAK,CAAC6C,aAAN,CAAoB,KAApB,EAA2B;AAChCI,MAAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE,KAAKC,gBAAL;AADH,OADyB;AAIhCC,MAAAA,GAAG,EAAE,KAAKvB;AAJsB,KAA3B,EAKJ7B,KAAK,CAAC6C,aAAN,CAAoBxC,eAAe,CAACyC,QAApC,EAA8C,IAA9C,EAAoD,UAAUO,IAAV,EAAgB;AACrE,UAAIC,GAAJ;;AAEA,UAAIC,QAAQ,GAAGF,IAAI,CAACE,QAApB;AACA,aAAOvD,KAAK,CAAC6C,aAAN,CAAoB,KAApB,EAA2B;AAChCW,QAAAA,SAAS,EAAEpD,QAAQ,CAACqD,MAAT,EADqB;AAEhCR,QAAAA,KAAK,EAAE;AACLS,UAAAA,KAAK,EAAEH,QAAQ;AADV;AAFyB,OAA3B,EAKJvD,KAAK,CAAC6C,aAAN,CAAoB,KAApB,EAA2B;AAC5BW,QAAAA,SAAS,EAAEvD,EAAE,CAACG,QAAQ,CAACuD,aAAT,EAAD,GAA4BL,GAAG,GAAG,EAAN,EAAUA,GAAG,CAAClD,QAAQ,CAACwD,KAAT,CAAeZ,MAAM,CAAC3B,KAAtB,CAAD,CAAH,GAAoC,CAAC,CAAC2B,MAAM,CAACa,KAAP,CAAaD,KAA7D,EAAoEN,GAAG,CAAClD,QAAQ,CAAC0D,WAAT,CAAqBd,MAAM,CAAC3B,KAA5B,CAAD,CAAH,GAA0C2B,MAAM,CAAC7B,KAAP,CAAaC,KAA3H,EAAkIkC,GAA9J,EADe;AAE5BF,QAAAA,GAAG,EAAEJ,MAAM,CAACrB;AAFgB,OAA3B,EAGAqB,MAAM,CAACa,KAAP,CAAaE,QAHb,CALI,CAAP;AASD,KAbE,CALI,CAAP;AAmBD,GAtBD;;AAwBA3B,EAAAA,MAAM,CAACe,gBAAP,GAA0B,SAASA,gBAAT,GAA4B;AACpD,QAAI,CAAC,KAAK7B,OAAV,EAAmB;AACjB,aAAO,MAAP;AACD;;AAED,WAAO,KAAKA,OAAL,CAAaS,qBAAb,GAAqCmB,MAA5C;AACD,GAND;;AAQA,SAAO5C,cAAP;AACD,CA3GD,CA2GEN,KAAK,CAACgE,SA3GR,CAFO;AA8GP1D,cAAc,CAAC2D,mBAAf,GAAqC,gBAArC;AACA3D,cAAc,CAAC4D,WAAf,GAA6B7D,eAA7B","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport cn from 'classnames';\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { ThemeContext } from \"../../../lib/theming/ThemeContext\";\nimport { jsStyles } from \"../SidePage.styles\";\nimport { SidePageContext } from \"../SidePageContext\";\n/**\r\n                                                      * Футер сайдпейджа.\r\n                                                      *\r\n                                                      * @visibleName SidePage.Footer\r\n                                                      */\n\nexport var SidePageFooter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(SidePageFooter, _React$Component);\n\n  function SidePageFooter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.context = _this.context;\n    _this.state = {\n      fixed: false\n    };\n    _this.theme = void 0;\n    _this.content = null;\n    _this.wrapper = null;\n    _this.layoutSub = null;\n\n    _this.update = function () {\n      _this.setProperStyles();\n    };\n\n    _this.refContent = function (node) {\n      _this.content = node;\n    };\n\n    _this.refWrapper = function (node) {\n      _this.wrapper = node;\n    };\n\n    _this.setProperStyles = function () {\n      if (_this.wrapper && _this.content) {\n        var wrapperRect = _this.wrapper.getBoundingClientRect();\n\n        var contentRect = _this.content.getBoundingClientRect();\n\n        var _fixed = wrapperRect.top > contentRect.top;\n\n        _this.setState({\n          fixed: _fixed\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = SidePageFooter.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.context.footerRef(this);\n    this.update();\n    this.layoutSub = LayoutEvents.addListener(this.update);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.context.footerRef(null);\n\n    if (this.layoutSub) {\n      this.layoutSub.remove();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(ThemeContext.Consumer, null, function (theme) {\n      _this2.theme = theme;\n      return _this2.renderMain();\n    });\n  };\n\n  _proto.renderMain = function renderMain() {\n    var _this3 = this;\n\n    return React.createElement(\"div\", {\n      style: {\n        height: this.getContentHeight()\n      },\n      ref: this.refWrapper\n    }, React.createElement(SidePageContext.Consumer, null, function (_ref) {\n      var _cn;\n\n      var getWidth = _ref.getWidth;\n      return React.createElement(\"div\", {\n        className: jsStyles.footer(),\n        style: {\n          width: getWidth()\n        }\n      }, React.createElement(\"div\", {\n        className: cn(jsStyles.footerContent(), (_cn = {}, _cn[jsStyles.panel(_this3.theme)] = !!_this3.props.panel, _cn[jsStyles.footerFixed(_this3.theme)] = _this3.state.fixed, _cn)),\n        ref: _this3.refContent\n      }, _this3.props.children));\n    }));\n  };\n\n  _proto.getContentHeight = function getContentHeight() {\n    if (!this.content) {\n      return 'auto';\n    }\n\n    return this.content.getBoundingClientRect().height;\n  };\n\n  return SidePageFooter;\n}(React.Component);\nSidePageFooter.__KONTUR_REACT_UI__ = 'SidePageFooter';\nSidePageFooter.contextType = SidePageContext;"]},"metadata":{},"sourceType":"module"}