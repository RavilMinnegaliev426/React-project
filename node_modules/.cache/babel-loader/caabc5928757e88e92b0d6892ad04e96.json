{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport debounce from 'lodash.debounce';\nimport isEqual from 'lodash.isequal';\nimport { isKeyArrowUp, isKeyArrowVertical, isKeyEnter, isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { DefaultState } from \"../CustomComboBox\";\nimport { ComboBoxRequestStatus } from \"../CustomComboBoxTypes\";\nvar DEBOUNCE_DELAY = 300;\n\nvar getValueString = function getValueString(value, valueToString) {\n  return value ? valueToString(value) : '';\n};\n\nexport var Effect = {\n  Search: function Search(query) {\n    return function (dispatch, getState, getProps, getInstance) {\n      getInstance().search(query);\n    };\n  },\n  DebouncedSearch: debounce(function (dispatch, getState, getProps, getInstance) {\n    var searchEffect = Effect.Search(getState().textValue);\n    searchEffect(dispatch, getState, getProps, getInstance);\n  }, DEBOUNCE_DELAY),\n  CancelRequest: function CancelRequest(dispatch, getState, getProps, getInstance) {\n    Effect.DebouncedSearch.cancel();\n    getInstance().cancelSearch();\n  },\n  Blur: function Blur(dispatch, getState, getProps) {\n    var _getProps = getProps(),\n        onBlur = _getProps.onBlur;\n\n    if (onBlur) {\n      onBlur();\n    }\n  },\n  Focus: function Focus(dispatch, getState, getProps) {\n    var _getProps2 = getProps(),\n        onFocus = _getProps2.onFocus;\n\n    if (onFocus) {\n      onFocus();\n    }\n  },\n  ValueChange: function ValueChange(value) {\n    return function (dispatch, getState, getProps) {\n      var _getProps3 = getProps(),\n          onValueChange = _getProps3.onValueChange;\n\n      if (onValueChange) {\n        onValueChange(value);\n      }\n    };\n  },\n  UnexpectedInput: function UnexpectedInput(textValue, items) {\n    return function (dispatch, getState, getProps) {\n      var _getProps4 = getProps(),\n          onUnexpectedInput = _getProps4.onUnexpectedInput,\n          valueToString = _getProps4.valueToString;\n\n      if (Array.isArray(items) && items.length === 1) {\n        var singleItem = items[0];\n        var valueContent = getValueString(singleItem, valueToString);\n\n        if (valueContent === textValue) {\n          dispatch({\n            type: 'ValueChange',\n            value: singleItem,\n            keepFocus: false\n          });\n          return;\n        }\n      }\n\n      if (onUnexpectedInput) {\n        var _value = onUnexpectedInput(textValue);\n\n        if (_value !== undefined) {\n          dispatch({\n            type: 'ValueChange',\n            value: _value,\n            keepFocus: false\n          });\n        }\n      }\n    };\n  },\n  InputChange: function InputChange(dispatch, getState, getProps) {\n    var _getProps5 = getProps(),\n        onInputValueChange = _getProps5.onInputValueChange;\n\n    var _getState = getState(),\n        textValue = _getState.textValue;\n\n    if (onInputValueChange) {\n      var returnedValue = onInputValueChange(textValue);\n\n      if (typeof returnedValue === 'string' && returnedValue !== textValue) {\n        dispatch({\n          type: 'TextChange',\n          value: returnedValue\n        });\n      }\n    }\n  },\n  InputFocus: function InputFocus(dispatch, getState, getProps, getInstance) {\n    var _getInstance = getInstance(),\n        input = _getInstance.input;\n\n    if (!input) {\n      return;\n    }\n\n    input.focus();\n  },\n  HighlightMenuItem: function HighlightMenuItem(dispatch, getState, getProps, getInstance) {\n    var _getProps6 = getProps(),\n        value = _getProps6.value,\n        itemToValue = _getProps6.itemToValue,\n        valueToString = _getProps6.valueToString;\n\n    var _getState2 = getState(),\n        items = _getState2.items,\n        focused = _getState2.focused,\n        textValue = _getState2.textValue,\n        requestStatus = _getState2.requestStatus;\n\n    var _getInstance2 = getInstance(),\n        menu = _getInstance2.menu;\n\n    var valueString = getValueString(value, valueToString);\n\n    if (!menu) {\n      return;\n    }\n\n    if (!focused) {\n      return;\n    }\n\n    var index = -1;\n\n    if (items && items.length && value) {\n      index = items.findIndex(function (x) {\n        return itemToValue(x) === itemToValue(value);\n      });\n    }\n\n    menu.highlightItem(index);\n\n    if (index >= 0) {\n      // FIXME: accessing private props\n      // @ts-ignore\n      process.nextTick(function () {\n        return menu && menu.scrollToSelected();\n      });\n      return;\n    }\n\n    if (textValue !== valueString || requestStatus === ComboBoxRequestStatus.Failed) {\n      process.nextTick(function () {\n        return menu && menu.down();\n      });\n    }\n  },\n  SelectMenuItem: function SelectMenuItem(event) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getInstance3 = getInstance(),\n          menu = _getInstance3.menu;\n\n      if (menu) {\n        menu.enter(event);\n      }\n    };\n  },\n  MoveMenuHighlight: function MoveMenuHighlight(direction) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getInstance4 = getInstance(),\n          menu = _getInstance4.menu;\n\n      if (menu) {\n        menu[direction]();\n      }\n    };\n  },\n  ResetHighlightedMenuItem: function ResetHighlightedMenuItem(dispatch, getState, getProps, getInstance) {\n    var combobox = getInstance();\n\n    if (combobox.menu && combobox.menu.hasHighlightedItem()) {\n      combobox.menu.reset();\n    }\n  },\n  Reflow: function Reflow() {\n    LayoutEvents.emit();\n  },\n  SelectInputText: function SelectInputText(dispatch, getState, getProps, getInstance) {\n    var combobox = getInstance();\n    combobox.selectInputText();\n  },\n  InputKeyDown: function InputKeyDown(event) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getProps7 = getProps(),\n          onInputKeyDown = _getProps7.onInputKeyDown;\n\n      if (onInputKeyDown) {\n        onInputKeyDown(event);\n      }\n    };\n  }\n};\n\nvar never = function never(_) {\n  return null;\n};\n\nexport function reducer(state, props, action) {\n  switch (action.type) {\n    case 'ValueChange':\n      {\n        var _value2 = action.value,\n            keepFocus = action.keepFocus;\n\n        var _textValue = getValueString(_value2, props.valueToString);\n\n        if (keepFocus) {\n          return [{\n            opened: false,\n            inputChanged: false,\n            editing: true,\n            items: null,\n            textValue: _textValue\n          }, [Effect.ValueChange(_value2), Effect.CancelRequest, Effect.InputFocus]];\n        }\n\n        return [{\n          opened: false,\n          inputChanged: false,\n          editing: false,\n          items: null,\n          textValue: _textValue\n        }, [Effect.ValueChange(_value2), Effect.CancelRequest]];\n      }\n\n    case 'TextChange':\n      {\n        var newState = {\n          inputChanged: true,\n          textValue: action.value\n        };\n\n        if (!action.value && !props.searchOnFocus) {\n          return [_extends({}, newState, {\n            opened: false,\n            items: null\n          }), [Effect.InputChange]];\n        }\n\n        return [newState, [Effect.DebouncedSearch, Effect.InputChange]];\n      }\n\n    case 'KeyPress':\n      {\n        var e = action.event;\n        var effects = [];\n        var nextState = state;\n\n        switch (true) {\n          case isKeyEnter(e):\n            e.preventDefault();\n            effects.push(Effect.SelectMenuItem(e));\n            break;\n\n          case isKeyArrowVertical(e):\n            e.preventDefault();\n            effects.push(Effect.MoveMenuHighlight(isKeyArrowUp(e) ? 'up' : 'down'));\n\n            if (!state.opened) {\n              effects.push(Effect.Search(state.textValue));\n            }\n\n            break;\n\n          case isKeyEscape(e):\n            nextState = _extends({}, state, {\n              items: null,\n              opened: false\n            });\n            break;\n        }\n\n        return [nextState, [].concat(effects, [Effect.InputKeyDown(e)])];\n      }\n\n    case 'DidUpdate':\n      {\n        if (isEqual(props.value, action.prevProps.value)) {\n          return state;\n        }\n\n        return {\n          opened: false,\n          textValue: state.editing ? state.textValue : getValueString(props.value, props.valueToString)\n        };\n      }\n\n    case 'Mount':\n      {\n        return {\n          textValue: getValueString(props.value, props.valueToString)\n        };\n      }\n\n    case 'Focus':\n      {\n        var _newState = {\n          focused: true,\n          editing: true\n        };\n\n        if (!props.searchOnFocus) {\n          return [_newState, [Effect.Focus]];\n        }\n\n        if (state.editing) {\n          return [_newState, [Effect.Search(state.textValue), Effect.Focus]];\n        }\n\n        return [_newState, [Effect.Search(''), Effect.Focus, Effect.SelectInputText]];\n      }\n\n    case 'InputClick':\n      {\n        if (!state.opened && props.searchOnFocus) {\n          return [state, [Effect.Search('')]];\n        }\n\n        return state;\n      }\n\n    case 'Blur':\n      {\n        var inputChanged = state.inputChanged,\n            _items = state.items;\n\n        if (!inputChanged) {\n          return [{\n            focused: false,\n            opened: false,\n            items: null,\n            editing: false\n          }, [Effect.Blur, Effect.CancelRequest]];\n        }\n\n        return [{\n          focused: false,\n          opened: false,\n          items: null\n        }, [Effect.Blur, Effect.CancelRequest, Effect.UnexpectedInput(state.textValue, _items)]];\n      }\n\n    case 'Reset':\n      {\n        return DefaultState;\n      }\n\n    case 'Open':\n      {\n        return {\n          opened: true\n        };\n      }\n\n    case 'Close':\n      {\n        return {\n          opened: false,\n          items: null\n        };\n      }\n\n    case 'Search':\n      {\n        return [state, [Effect.Search(action.query)]];\n      }\n\n    case 'RequestItems':\n      {\n        return {\n          loading: true,\n          opened: true,\n          requestStatus: ComboBoxRequestStatus.Pending\n        };\n      }\n\n    case 'ReceiveItems':\n      {\n        var shouldResetMenuHighlight = state.textValue === '';\n        return [{\n          loading: false,\n          opened: true,\n          items: action.items,\n          requestStatus: ComboBoxRequestStatus.Success\n        }, [shouldResetMenuHighlight ? Effect.ResetHighlightedMenuItem : Effect.HighlightMenuItem, Effect.Reflow]];\n      }\n\n    case 'RequestFailure':\n      {\n        return [{\n          loading: false,\n          opened: true,\n          items: null,\n          requestStatus: ComboBoxRequestStatus.Failed,\n          repeatRequest: action.repeatRequest\n        }, [Effect.HighlightMenuItem]];\n      }\n\n    case 'CancelRequest':\n      {\n        return {\n          loading: false,\n          requestStatus: ComboBoxRequestStatus.Unknown\n        };\n      }\n\n    default:\n      {\n        never(action);\n      }\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/ravka/Desktop/react-typescript-task/node_modules/@skbkontur/react-ui/internal/CustomComboBox/CustomComboBoxReducer/CustomComboBoxReducer.js"],"names":["_extends","debounce","isEqual","isKeyArrowUp","isKeyArrowVertical","isKeyEnter","isKeyEscape","LayoutEvents","DefaultState","ComboBoxRequestStatus","DEBOUNCE_DELAY","getValueString","value","valueToString","Effect","Search","query","dispatch","getState","getProps","getInstance","search","DebouncedSearch","searchEffect","textValue","CancelRequest","cancel","cancelSearch","Blur","_getProps","onBlur","Focus","_getProps2","onFocus","ValueChange","_getProps3","onValueChange","UnexpectedInput","items","_getProps4","onUnexpectedInput","Array","isArray","length","singleItem","valueContent","type","keepFocus","_value","undefined","InputChange","_getProps5","onInputValueChange","_getState","returnedValue","InputFocus","_getInstance","input","focus","HighlightMenuItem","_getProps6","itemToValue","_getState2","focused","requestStatus","_getInstance2","menu","valueString","index","findIndex","x","highlightItem","process","nextTick","scrollToSelected","Failed","down","SelectMenuItem","event","_getInstance3","enter","MoveMenuHighlight","direction","_getInstance4","ResetHighlightedMenuItem","combobox","hasHighlightedItem","reset","Reflow","emit","SelectInputText","selectInputText","InputKeyDown","_getProps7","onInputKeyDown","never","_","reducer","state","props","action","_value2","_textValue","opened","inputChanged","editing","newState","searchOnFocus","e","effects","nextState","preventDefault","push","concat","prevProps","_newState","_items","loading","Pending","shouldResetMenuHighlight","Success","repeatRequest","Unknown"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport debounce from 'lodash.debounce';\nimport isEqual from 'lodash.isequal';\nimport { isKeyArrowUp, isKeyArrowVertical, isKeyEnter, isKeyEscape } from \"../../../lib/events/keyboard/identifiers\";\nimport * as LayoutEvents from \"../../../lib/LayoutEvents\";\nimport { DefaultState } from \"../CustomComboBox\";\nimport { ComboBoxRequestStatus } from \"../CustomComboBoxTypes\";\nvar DEBOUNCE_DELAY = 300;\n\nvar getValueString = function getValueString(value, valueToString) {\n  return value ? valueToString(value) : '';\n};\n\nexport var Effect = {\n  Search: function Search(query) {\n    return function (dispatch, getState, getProps, getInstance) {\n      getInstance().search(query);\n    };\n  },\n  DebouncedSearch: debounce(function (dispatch, getState, getProps, getInstance) {\n    var searchEffect = Effect.Search(getState().textValue);\n    searchEffect(dispatch, getState, getProps, getInstance);\n  }, DEBOUNCE_DELAY),\n  CancelRequest: function CancelRequest(dispatch, getState, getProps, getInstance) {\n    Effect.DebouncedSearch.cancel();\n    getInstance().cancelSearch();\n  },\n  Blur: function Blur(dispatch, getState, getProps) {\n    var _getProps = getProps(),\n        onBlur = _getProps.onBlur;\n\n    if (onBlur) {\n      onBlur();\n    }\n  },\n  Focus: function Focus(dispatch, getState, getProps) {\n    var _getProps2 = getProps(),\n        onFocus = _getProps2.onFocus;\n\n    if (onFocus) {\n      onFocus();\n    }\n  },\n  ValueChange: function ValueChange(value) {\n    return function (dispatch, getState, getProps) {\n      var _getProps3 = getProps(),\n          onValueChange = _getProps3.onValueChange;\n\n      if (onValueChange) {\n        onValueChange(value);\n      }\n    };\n  },\n  UnexpectedInput: function UnexpectedInput(textValue, items) {\n    return function (dispatch, getState, getProps) {\n      var _getProps4 = getProps(),\n          onUnexpectedInput = _getProps4.onUnexpectedInput,\n          valueToString = _getProps4.valueToString;\n\n      if (Array.isArray(items) && items.length === 1) {\n        var singleItem = items[0];\n        var valueContent = getValueString(singleItem, valueToString);\n\n        if (valueContent === textValue) {\n          dispatch({\n            type: 'ValueChange',\n            value: singleItem,\n            keepFocus: false\n          });\n          return;\n        }\n      }\n\n      if (onUnexpectedInput) {\n        var _value = onUnexpectedInput(textValue);\n\n        if (_value !== undefined) {\n          dispatch({\n            type: 'ValueChange',\n            value: _value,\n            keepFocus: false\n          });\n        }\n      }\n    };\n  },\n  InputChange: function InputChange(dispatch, getState, getProps) {\n    var _getProps5 = getProps(),\n        onInputValueChange = _getProps5.onInputValueChange;\n\n    var _getState = getState(),\n        textValue = _getState.textValue;\n\n    if (onInputValueChange) {\n      var returnedValue = onInputValueChange(textValue);\n\n      if (typeof returnedValue === 'string' && returnedValue !== textValue) {\n        dispatch({\n          type: 'TextChange',\n          value: returnedValue\n        });\n      }\n    }\n  },\n  InputFocus: function InputFocus(dispatch, getState, getProps, getInstance) {\n    var _getInstance = getInstance(),\n        input = _getInstance.input;\n\n    if (!input) {\n      return;\n    }\n\n    input.focus();\n  },\n  HighlightMenuItem: function HighlightMenuItem(dispatch, getState, getProps, getInstance) {\n    var _getProps6 = getProps(),\n        value = _getProps6.value,\n        itemToValue = _getProps6.itemToValue,\n        valueToString = _getProps6.valueToString;\n\n    var _getState2 = getState(),\n        items = _getState2.items,\n        focused = _getState2.focused,\n        textValue = _getState2.textValue,\n        requestStatus = _getState2.requestStatus;\n\n    var _getInstance2 = getInstance(),\n        menu = _getInstance2.menu;\n\n    var valueString = getValueString(value, valueToString);\n\n    if (!menu) {\n      return;\n    }\n\n    if (!focused) {\n      return;\n    }\n\n    var index = -1;\n\n    if (items && items.length && value) {\n      index = items.findIndex(function (x) {\n        return itemToValue(x) === itemToValue(value);\n      });\n    }\n\n    menu.highlightItem(index);\n\n    if (index >= 0) {\n      // FIXME: accessing private props\n      // @ts-ignore\n      process.nextTick(function () {\n        return menu && menu.scrollToSelected();\n      });\n      return;\n    }\n\n    if (textValue !== valueString || requestStatus === ComboBoxRequestStatus.Failed) {\n      process.nextTick(function () {\n        return menu && menu.down();\n      });\n    }\n  },\n  SelectMenuItem: function SelectMenuItem(event) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getInstance3 = getInstance(),\n          menu = _getInstance3.menu;\n\n      if (menu) {\n        menu.enter(event);\n      }\n    };\n  },\n  MoveMenuHighlight: function MoveMenuHighlight(direction) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getInstance4 = getInstance(),\n          menu = _getInstance4.menu;\n\n      if (menu) {\n        menu[direction]();\n      }\n    };\n  },\n  ResetHighlightedMenuItem: function ResetHighlightedMenuItem(dispatch, getState, getProps, getInstance) {\n    var combobox = getInstance();\n\n    if (combobox.menu && combobox.menu.hasHighlightedItem()) {\n      combobox.menu.reset();\n    }\n  },\n  Reflow: function Reflow() {\n    LayoutEvents.emit();\n  },\n  SelectInputText: function SelectInputText(dispatch, getState, getProps, getInstance) {\n    var combobox = getInstance();\n    combobox.selectInputText();\n  },\n  InputKeyDown: function InputKeyDown(event) {\n    return function (dispatch, getState, getProps, getInstance) {\n      var _getProps7 = getProps(),\n          onInputKeyDown = _getProps7.onInputKeyDown;\n\n      if (onInputKeyDown) {\n        onInputKeyDown(event);\n      }\n    };\n  }\n};\n\nvar never = function never(_) {\n  return null;\n};\n\nexport function reducer(state, props, action) {\n  switch (action.type) {\n    case 'ValueChange':\n      {\n        var _value2 = action.value,\n            keepFocus = action.keepFocus;\n\n        var _textValue = getValueString(_value2, props.valueToString);\n\n        if (keepFocus) {\n          return [{\n            opened: false,\n            inputChanged: false,\n            editing: true,\n            items: null,\n            textValue: _textValue\n          }, [Effect.ValueChange(_value2), Effect.CancelRequest, Effect.InputFocus]];\n        }\n\n        return [{\n          opened: false,\n          inputChanged: false,\n          editing: false,\n          items: null,\n          textValue: _textValue\n        }, [Effect.ValueChange(_value2), Effect.CancelRequest]];\n      }\n\n    case 'TextChange':\n      {\n        var newState = {\n          inputChanged: true,\n          textValue: action.value\n        };\n\n        if (!action.value && !props.searchOnFocus) {\n          return [_extends({}, newState, {\n            opened: false,\n            items: null\n          }), [Effect.InputChange]];\n        }\n\n        return [newState, [Effect.DebouncedSearch, Effect.InputChange]];\n      }\n\n    case 'KeyPress':\n      {\n        var e = action.event;\n        var effects = [];\n        var nextState = state;\n\n        switch (true) {\n          case isKeyEnter(e):\n            e.preventDefault();\n            effects.push(Effect.SelectMenuItem(e));\n            break;\n\n          case isKeyArrowVertical(e):\n            e.preventDefault();\n            effects.push(Effect.MoveMenuHighlight(isKeyArrowUp(e) ? 'up' : 'down'));\n\n            if (!state.opened) {\n              effects.push(Effect.Search(state.textValue));\n            }\n\n            break;\n\n          case isKeyEscape(e):\n            nextState = _extends({}, state, {\n              items: null,\n              opened: false\n            });\n            break;\n        }\n\n        return [nextState, [].concat(effects, [Effect.InputKeyDown(e)])];\n      }\n\n    case 'DidUpdate':\n      {\n        if (isEqual(props.value, action.prevProps.value)) {\n          return state;\n        }\n\n        return {\n          opened: false,\n          textValue: state.editing ? state.textValue : getValueString(props.value, props.valueToString)\n        };\n      }\n\n    case 'Mount':\n      {\n        return {\n          textValue: getValueString(props.value, props.valueToString)\n        };\n      }\n\n    case 'Focus':\n      {\n        var _newState = {\n          focused: true,\n          editing: true\n        };\n\n        if (!props.searchOnFocus) {\n          return [_newState, [Effect.Focus]];\n        }\n\n        if (state.editing) {\n          return [_newState, [Effect.Search(state.textValue), Effect.Focus]];\n        }\n\n        return [_newState, [Effect.Search(''), Effect.Focus, Effect.SelectInputText]];\n      }\n\n    case 'InputClick':\n      {\n        if (!state.opened && props.searchOnFocus) {\n          return [state, [Effect.Search('')]];\n        }\n\n        return state;\n      }\n\n    case 'Blur':\n      {\n        var inputChanged = state.inputChanged,\n            _items = state.items;\n\n        if (!inputChanged) {\n          return [{\n            focused: false,\n            opened: false,\n            items: null,\n            editing: false\n          }, [Effect.Blur, Effect.CancelRequest]];\n        }\n\n        return [{\n          focused: false,\n          opened: false,\n          items: null\n        }, [Effect.Blur, Effect.CancelRequest, Effect.UnexpectedInput(state.textValue, _items)]];\n      }\n\n    case 'Reset':\n      {\n        return DefaultState;\n      }\n\n    case 'Open':\n      {\n        return {\n          opened: true\n        };\n      }\n\n    case 'Close':\n      {\n        return {\n          opened: false,\n          items: null\n        };\n      }\n\n    case 'Search':\n      {\n        return [state, [Effect.Search(action.query)]];\n      }\n\n    case 'RequestItems':\n      {\n        return {\n          loading: true,\n          opened: true,\n          requestStatus: ComboBoxRequestStatus.Pending\n        };\n      }\n\n    case 'ReceiveItems':\n      {\n        var shouldResetMenuHighlight = state.textValue === '';\n        return [{\n          loading: false,\n          opened: true,\n          items: action.items,\n          requestStatus: ComboBoxRequestStatus.Success\n        }, [shouldResetMenuHighlight ? Effect.ResetHighlightedMenuItem : Effect.HighlightMenuItem, Effect.Reflow]];\n      }\n\n    case 'RequestFailure':\n      {\n        return [{\n          loading: false,\n          opened: true,\n          items: null,\n          requestStatus: ComboBoxRequestStatus.Failed,\n          repeatRequest: action.repeatRequest\n        }, [Effect.HighlightMenuItem]];\n      }\n\n    case 'CancelRequest':\n      {\n        return {\n          loading: false,\n          requestStatus: ComboBoxRequestStatus.Unknown\n        };\n      }\n\n    default:\n      {\n        never(action);\n      }\n  }\n\n  return state;\n}"]},"metadata":{},"sourceType":"module"}