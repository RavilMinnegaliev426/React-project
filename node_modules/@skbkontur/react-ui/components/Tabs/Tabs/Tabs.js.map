{"version":3,"sources":["Tabs.tsx"],"names":["React","findDOMNode","PropTypes","cn","Indicator","jsStyles","TabsContext","Tab","Tabs","tabs","tabUpdates","on","cb","index","listeners","push","splice","shiftFocus","fromTab","delta","findIndex","x","id","newIndex","Math","max","min","length","tab","tabNode","getNode","htmlNode","Component","HTMLElement","focus","notifyUpdate","forEach","switchTab","props","onValueChange","value","getTab","find","addTab","concat","removeTab","filter","render","vertical","width","children","indicatorClassName","root","activeTab","__KONTUR_REACT_UI__","propTypes","node","string","isRequired","bool","oneOfType","number","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { Indicator } from './Indicator';\r\nimport { jsStyles } from './Tabs.styles';\r\nimport { TabsContext } from './TabsContext';\r\nimport { Tab } from './Tab';\r\n\r\nexport interface TabsProps {\r\n  /**\r\n   * Tab component should be child of Tabs component\r\n   */\r\n  children?: React.ReactNode;\r\n\r\n  /**\r\n   * Classname of indicator\r\n   */\r\n  indicatorClassName?: string;\r\n\r\n  /**\r\n   * Tabs change event\r\n   */\r\n  onValueChange?: (value: string) => void;\r\n\r\n  /**\r\n   * Active tab identifier\r\n   */\r\n  value: string;\r\n\r\n  /**\r\n   * Vertical indicator\r\n   * @default false\r\n   */\r\n  vertical: boolean;\r\n\r\n  /**\r\n   * Width of tabs container\r\n   */\r\n  width?: number | string;\r\n}\r\n\r\n/**\r\n * Tabs wrapper\r\n *\r\n * contains static property `Tab`\r\n */\r\nexport class Tabs extends React.Component<TabsProps> {\r\n  public static __KONTUR_REACT_UI__ = 'Tabs';\r\n\r\n  public static propTypes = {\r\n    children: PropTypes.node,\r\n    indicatorClassName: PropTypes.string,\r\n    value: PropTypes.string.isRequired,\r\n    vertical: PropTypes.bool,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    onValueChange: PropTypes.func,\r\n  };\r\n  public static defaultProps = {\r\n    vertical: false,\r\n  };\r\n\r\n  public static Tab = Tab;\r\n\r\n  private tabs: Array<{\r\n    getNode: () => Tab | null;\r\n    id: string;\r\n  }> = [];\r\n\r\n  private tabUpdates = {\r\n    on: (cb: () => void) => {\r\n      const index = this.listeners.push(cb);\r\n      return () => {\r\n        this.listeners.splice(index, 1);\r\n      };\r\n    },\r\n  };\r\n\r\n  private listeners: Array<() => void> = [];\r\n\r\n  public render(): JSX.Element {\r\n    const { vertical, value, width, children, indicatorClassName } = this.props;\r\n\r\n    return (\r\n      <div className={cn(jsStyles.root(), vertical && jsStyles.vertical())} style={{ width }}>\r\n        <TabsContext.Provider\r\n          value={{\r\n            vertical,\r\n            activeTab: value,\r\n            getTab: this.getTab,\r\n            addTab: this.addTab,\r\n            removeTab: this.removeTab,\r\n            notifyUpdate: this.notifyUpdate,\r\n            shiftFocus: this.shiftFocus,\r\n            switchTab: this.switchTab,\r\n          }}\r\n        >\r\n          {children}\r\n          <Indicator className={indicatorClassName} tabUpdates={this.tabUpdates} vertical={vertical} />\r\n        </TabsContext.Provider>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private shiftFocus = (fromTab: string, delta: number) => {\r\n    const { tabs } = this;\r\n    const index = tabs.findIndex(x => x.id === fromTab);\r\n    const newIndex = Math.max(0, Math.min(index + delta, tabs.length - 1));\r\n    const tab = tabs[newIndex];\r\n\r\n    const tabNode = tab.getNode();\r\n    let htmlNode = null;\r\n    if (tabNode instanceof React.Component) {\r\n      htmlNode = findDOMNode(tabNode);\r\n    }\r\n\r\n    if (htmlNode && htmlNode instanceof HTMLElement && typeof htmlNode.focus === 'function') {\r\n      htmlNode.focus();\r\n    }\r\n  };\r\n\r\n  private notifyUpdate = () => {\r\n    this.listeners.forEach(cb => cb());\r\n  };\r\n\r\n  private switchTab = (id: string) => {\r\n    const { onValueChange, value } = this.props;\r\n    if (id !== value && onValueChange) {\r\n      onValueChange(id);\r\n    }\r\n  };\r\n\r\n  private getTab = (id: string): Tab | null => {\r\n    const { getNode = null } = this.tabs.find(x => x.id === id) || {};\r\n    return getNode && getNode();\r\n  };\r\n\r\n  private addTab = (id: string, getNode: () => any) => {\r\n    this.tabs = this.tabs.concat({ id, getNode });\r\n  };\r\n\r\n  private removeTab = (id: string) => {\r\n    this.tabs = this.tabs.filter(tab => tab.id !== id);\r\n  };\r\n}\r\n"]}