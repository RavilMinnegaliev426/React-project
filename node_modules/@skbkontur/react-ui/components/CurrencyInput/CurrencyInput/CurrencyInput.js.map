{"version":3,"sources":["CurrencyInput.tsx"],"names":["React","PropTypes","warning","Input","MAX_SAFE_DIGITS","SelectionHelper","CurrencyHelper","CurrencyInputHelper","CURRENCY_INPUT_ACTIONS","extractAction","CurrencyInput","state","getState","props","value","fractionDigits","hideTrailingZeros","focused","input","tempSelectionForOnChange","fromPosition","focus","blur","handleMouseUp","event","selection","getInputSelection","target","normilized","normalizeSelection","formatted","setState","handleKeyDown","getSelection","onKeyDown","defaultPrevented","action","Ignore","Unknown","preventDefault","Submit","onSubmit","Backspace","inputValue","moveCursor","end","Delete","start","MoveCursorLeft","MoveCursorRight","Home","End","length","ExtendSelectionLeft","extendSelection","ExtendSelectionRight","FullSelection","forward","ExtendSelectionToStart","backward","ExtendSelectionToEnd","inputEnd","direction","step","position","extended","result","safeInsert","integerDigits","unsigned","signed","parsedValue","parse","onValueChange","blink","getOnChangeDelta","oldValue","substring","substr","handleValueChange","delta","handlePaste","data","clipboardData","getData","handleCopy","formatForClipboard","setData","handleCut","handleFocus","selectionStart","selectionEnd","selectionDirection","valueLenght","onFocus","handleBlur","onBlur","refInput","element","componentDidMount","maxLength","undefined","UNSAFE_componentWillReceiveProps","nextProps","componentDidUpdate","setSelectionRange","render","rest","placeholder","format","onMouseEnter","onMouseLeave","onMouseOver","Component","__KONTUR_REACT_UI__","propTypes","align","oneOf","autoFocus","bool","borderless","disabled","error","number","leftIcon","string","size","width","oneOfType","func","isRequired","defaultProps","HTMLInputElement","Error"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\n\r\nimport { Input, InputProps } from '../Input';\r\nimport { Nullable, Override } from '../../typings/utility-types';\r\n\r\nimport { MAX_SAFE_DIGITS } from './constants';\r\nimport { Selection, SelectionDirection, SelectionHelper } from './SelectionHelper';\r\nimport { CurrencyHelper } from './CurrencyHelper';\r\nimport { CurrencyInputHelper } from './CurrencyInputHelper';\r\nimport { CURRENCY_INPUT_ACTIONS, extractAction } from './CurrencyInputKeyboardActions';\r\n\r\nexport type CurrencyInputProps = Override<\r\n  InputProps,\r\n  {\r\n    /** Значение */\r\n    value: Nullable<number>;\r\n    /** Убрать лишние нули после запятой */\r\n    hideTrailingZeros: boolean;\r\n    /** Кол-во цифр после зяпятой */\r\n    fractionDigits?: Nullable<number>;\r\n    /** Отрицательные значения */\r\n    signed?: boolean;\r\n    /**\r\n     * Допустимое кол-во цифр целой части.\r\n     * Если передан **0**, или `fractionDigits=15`, то и в целой части допускается только **0**.\r\n     */\r\n    integerDigits?: Nullable<number>;\r\n    /** Вызывается при изменении `value` */\r\n    onValueChange: (value: Nullable<number>) => void;\r\n    /** onSubmit */\r\n    onSubmit?: () => void;\r\n  }\r\n>;\r\n\r\nexport interface CurrencyInputState {\r\n  formatted: string;\r\n  selection: Selection;\r\n  focused: boolean;\r\n}\r\n\r\n/**\r\n * Поле для денежных сумм (и других числовых значений).\r\n * Принимает любые свойства `Input`.\r\n *\r\n * Максимальная длина числа - **15 цифр** (с десятичным разделителем в любом месте).\r\n * <br/>\r\n * Если `fractionDigits=15`, то в целой части допускается **0**.\r\n */\r\nexport class CurrencyInput extends React.Component<CurrencyInputProps, CurrencyInputState> {\r\n  public static __KONTUR_REACT_UI__ = 'CurrencyInput';\r\n\r\n  public static propTypes = {\r\n    align: PropTypes.oneOf(['left', 'center', 'right']),\r\n    autoFocus: PropTypes.bool,\r\n    borderless: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    fractionDigits: PropTypes.number,\r\n    hideTrailingZeros: PropTypes.bool,\r\n    leftIcon: PropTypes.element,\r\n    placeholder: PropTypes.string,\r\n    signed: PropTypes.bool,\r\n    size: PropTypes.oneOf(['small', 'medium', 'large']),\r\n    value: PropTypes.number,\r\n    warning: PropTypes.bool,\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    onBlur: PropTypes.func,\r\n    onValueChange: PropTypes.func.isRequired,\r\n    onFocus: PropTypes.func,\r\n    onMouseEnter: PropTypes.func,\r\n    onMouseLeave: PropTypes.func,\r\n    onMouseOver: PropTypes.func,\r\n    onSubmit: PropTypes.func,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    align: 'right',\r\n    fractionDigits: 2,\r\n    hideTrailingZeros: false,\r\n    value: null,\r\n  };\r\n\r\n  public state: CurrencyInputState = {\r\n    ...this.getState(this.props.value, this.props.fractionDigits, this.props.hideTrailingZeros),\r\n    focused: false,\r\n  };\r\n\r\n  private input: Nullable<Input>;\r\n  private tempSelectionForOnChange: Selection = SelectionHelper.fromPosition(0);\r\n\r\n  public componentDidMount(): void {\r\n    const { maxLength, integerDigits, fractionDigits } = this.props;\r\n    warning(\r\n      maxLength === undefined,\r\n      `[CurrencyInput]: Prop 'maxLength' has been deprecated. See 'integerDigits' and 'fractionDigits'`,\r\n    );\r\n    warning(\r\n      (integerDigits || 0) + (fractionDigits || 0) <= MAX_SAFE_DIGITS,\r\n      `[CurrencyInput]: Sum of 'integerDigits' and 'fractionDigits' exceeds ${MAX_SAFE_DIGITS}.` +\r\n        `\\nSee https://tech.skbkontur.ru/react-ui/#/CurrencyInput?id=why15`,\r\n    );\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: CurrencyInputProps) {\r\n    const { value, fractionDigits, hideTrailingZeros } = nextProps;\r\n    if (value !== CurrencyHelper.parse(this.state.formatted) || fractionDigits !== this.props.fractionDigits) {\r\n      const state = this.getState(value, fractionDigits, hideTrailingZeros);\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    if (this.state.focused && this.input) {\r\n      const { start, end } = this.state.selection;\r\n\r\n      this.input.setSelectionRange(start, end);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { fractionDigits, signed, onSubmit, integerDigits, hideTrailingZeros, ...rest } = this.props;\r\n    const placeholder =\r\n      this.props.placeholder == null\r\n        ? CurrencyHelper.format(0, {fractionDigits, hideTrailingZeros})\r\n        : this.props.placeholder;\r\n\r\n    return (\r\n      <Input\r\n        {...rest}\r\n        value={this.state.formatted}\r\n        onBlur={this.handleBlur}\r\n        onFocus={this.handleFocus}\r\n        onMouseUp={this.handleMouseUp}\r\n        onKeyDown={this.handleKeyDown}\r\n        onValueChange={this.handleValueChange}\r\n        onPaste={this.handlePaste}\r\n        onCopy={this.handleCopy}\r\n        onCut={this.handleCut}\r\n        onMouseEnter={this.props.onMouseEnter}\r\n        onMouseLeave={this.props.onMouseLeave}\r\n        onMouseOver={this.props.onMouseOver}\r\n        ref={this.refInput}\r\n        placeholder={this.state.focused ? '' : placeholder}\r\n      />\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus = () => {\r\n    if (this.input) {\r\n      this.input.focus();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur = () => {\r\n    if (this.input) {\r\n      this.input.blur();\r\n    }\r\n  };\r\n\r\n  private getState(value: Nullable<number>, fractionDigits: Nullable<number>, hideTrailingZeros: boolean) {\r\n    return {\r\n      formatted: CurrencyHelper.format(value, { fractionDigits, hideTrailingZeros }),\r\n      selection: SelectionHelper.fromPosition(0),\r\n    };\r\n  }\r\n\r\n  private handleMouseUp = (event: React.MouseEvent<HTMLInputElement>) => {\r\n    const selection = getInputSelection(event.target);\r\n    const normilized = CurrencyInputHelper.normalizeSelection(this.state.formatted, selection);\r\n    this.setState({ selection: normilized });\r\n  };\r\n\r\n  private handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    const selection = this.getSelection(event.target);\r\n    this.tempSelectionForOnChange = selection;\r\n\r\n    if (this.props.onKeyDown) {\r\n      this.props.onKeyDown(event);\r\n      if (event.defaultPrevented) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const action = extractAction(event);\r\n\r\n    if (action === CURRENCY_INPUT_ACTIONS.Ignore) {\r\n      return;\r\n    }\r\n\r\n    if (action !== CURRENCY_INPUT_ACTIONS.Unknown) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    switch (action) {\r\n      case CURRENCY_INPUT_ACTIONS.Submit: {\r\n        if (this.props.onSubmit) {\r\n          this.props.onSubmit();\r\n        }\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.Backspace: {\r\n        this.inputValue(CurrencyInputHelper.moveCursor(this.state.formatted, selection, -1), selection.end, '');\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.Delete: {\r\n        this.inputValue(selection.start, CurrencyInputHelper.moveCursor(this.state.formatted, selection, +1), '');\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.MoveCursorLeft: {\r\n        this.moveCursor(selection, -1);\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.MoveCursorRight: {\r\n        this.moveCursor(selection, +1);\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.Home: {\r\n        this.setState({ selection: SelectionHelper.fromPosition(0) });\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.End: {\r\n        const end = this.state.formatted.length;\r\n        this.setState({ selection: SelectionHelper.fromPosition(end) });\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.ExtendSelectionLeft: {\r\n        this.extendSelection(selection, -1);\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.ExtendSelectionRight: {\r\n        this.extendSelection(selection, +1);\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.FullSelection: {\r\n        this.setState({\r\n          selection: SelectionHelper.forward(0, this.state.formatted.length),\r\n        });\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.ExtendSelectionToStart: {\r\n        this.setState({\r\n          selection: SelectionHelper.backward(0, selection.start),\r\n        });\r\n        return;\r\n      }\r\n      case CURRENCY_INPUT_ACTIONS.ExtendSelectionToEnd: {\r\n        const inputEnd = this.state.formatted.length;\r\n        this.setState({\r\n          selection: SelectionHelper.forward(selection.start, inputEnd),\r\n        });\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  private getSelection = (input: EventTarget): Selection => {\r\n    const selection = getInputSelection(input);\r\n    return {\r\n      start: selection.start,\r\n      end: selection.end,\r\n      direction: this.state.selection.direction,\r\n    };\r\n  };\r\n\r\n  private moveCursor = (selection: Selection, step: number) => {\r\n    const position = CurrencyInputHelper.moveCursor(this.state.formatted, selection, step);\r\n    this.setState({ selection: SelectionHelper.fromPosition(position) });\r\n  };\r\n\r\n  private extendSelection = (selection: Selection, step: number) => {\r\n    const extended = CurrencyInputHelper.extendSelection(this.state.formatted, selection, step);\r\n    this.setState({ selection: extended });\r\n  };\r\n\r\n  private inputValue = (start: number, end: number, value: string) => {\r\n    const result = CurrencyInputHelper.safeInsert(this.state.formatted, start, end, value, {\r\n      integerDigits: this.props.integerDigits,\r\n      fractionDigits: this.props.fractionDigits,\r\n      unsigned: !this.props.signed,\r\n    });\r\n    if (result) {\r\n      const formatted = result.value;\r\n      const selection = SelectionHelper.fromPosition(result.position);\r\n      this.setState({ formatted, selection }, () => {\r\n        const parsedValue = CurrencyHelper.parse(formatted);\r\n        if (this.props.value !== parsedValue) {\r\n          this.props.onValueChange(parsedValue);\r\n        }\r\n      });\r\n      return true;\r\n    }\r\n\r\n    if (this.input) {\r\n      this.input.blink();\r\n    }\r\n    return false;\r\n  };\r\n\r\n  private getOnChangeDelta = (value: string) => {\r\n    const selection = this.tempSelectionForOnChange;\r\n    const oldValue = this.state.formatted;\r\n    if (selection.start !== selection.end) {\r\n      return value.substring(selection.start, value.length - (oldValue.length - selection.end));\r\n    } else if (value.length > oldValue.length) {\r\n      return value.substr(selection.start, value.length - oldValue.length);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  private handleValueChange = (value: string): void => {\r\n    const selection = this.tempSelectionForOnChange;\r\n    const delta = this.getOnChangeDelta(value);\r\n    if (delta != null && !this.inputValue(selection.start, selection.end, delta)) {\r\n      this.setState({ selection });\r\n    }\r\n  };\r\n\r\n  private handlePaste = (event: React.ClipboardEvent<HTMLInputElement>) => {\r\n    const data = event.clipboardData.getData('text');\r\n    const selection = this.getSelection(event.target);\r\n    this.inputValue(selection.start, selection.end, data);\r\n    event.preventDefault();\r\n  };\r\n\r\n  private handleCopy = (event: React.ClipboardEvent<HTMLInputElement>) => {\r\n    const selection = this.getSelection(event.target);\r\n    if (selection.start !== selection.end) {\r\n      const substring = this.state.formatted.substring(selection.start, selection.end);\r\n      const data = CurrencyHelper.formatForClipboard(substring);\r\n      event.clipboardData.setData('text', data);\r\n    }\r\n    event.preventDefault();\r\n  };\r\n\r\n  private handleCut = (event: React.ClipboardEvent<HTMLInputElement>) => {\r\n    const selection = this.getSelection(event.target);\r\n    if (selection.start !== selection.end) {\r\n      const substring = this.state.formatted.substring(selection.start, selection.end);\r\n      const data = CurrencyHelper.formatForClipboard(substring);\r\n      event.clipboardData.setData('text', data);\r\n      this.inputValue(selection.start, selection.end, '');\r\n    }\r\n    event.preventDefault();\r\n  };\r\n\r\n  private handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    const { selectionStart, selectionEnd, selectionDirection } = event.target;\r\n    const valueLenght = event.target.value.length;\r\n\r\n    const selection = {\r\n      start: selectionStart !== selectionEnd ? selectionStart || 0 : selectionStart || valueLenght,\r\n      end: selectionEnd !== selectionStart ? selectionEnd || 0 : selectionEnd || valueLenght,\r\n      direction: (selectionDirection as SelectionDirection) || 'none',\r\n    };\r\n\r\n    this.setState({\r\n      focused: true,\r\n      selection,\r\n    });\r\n\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event);\r\n    }\r\n  };\r\n\r\n  private handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    const value = CurrencyHelper.parse(this.state.formatted);\r\n\r\n    this.setState({\r\n      ...this.getState(value, this.props.fractionDigits, this.props.hideTrailingZeros),\r\n      focused: false,\r\n    });\r\n\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event);\r\n    }\r\n  };\r\n\r\n  private refInput = (element: Nullable<Input>) => {\r\n    this.input = element;\r\n  };\r\n}\r\n\r\nfunction getInputSelection(input: EventTarget): Selection {\r\n  if (!(input instanceof HTMLInputElement)) {\r\n    throw new Error('input is not HTMLInputElement');\r\n  }\r\n  return {\r\n    start: input.selectionStart!,\r\n    end: input.selectionEnd!,\r\n    direction: input.selectionDirection as SelectionDirection,\r\n  };\r\n}\r\n"]}