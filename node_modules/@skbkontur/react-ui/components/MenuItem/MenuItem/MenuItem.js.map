{"version":3,"sources":["MenuItem.tsx"],"names":["React","PropTypes","warning","cn","isFunction","ThemeContext","jsStyles","MenuItem","theme","mouseEntered","handleMouseEnterFix","e","props","onMouseEnter","handleMouseLeave","onMouseLeave","getComponent","disabled","component","href","render","renderMain","alkoLink","link","comment","icon","loose","state","children","_enableIconPadding","rest","undefined","hover","iconElement","className","root","selected","withIcon","Boolean","content","Component","commentHover","__KONTUR_REACT_UI__","__MENU_ITEM__","propTypes","bool","node","string","oneOfType","target","onClick","func","isMenuItem","child","isValidElement","Object","prototype","hasOwnProperty","call","type"],"mappings":"oOAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,EAAP,MAAe,YAAf;;AAEA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,YAAT,QAA6B,gCAA7B;;;AAGA,SAASC,QAAT,QAAyB,mBAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;;AAGA,WAAaC,QAAb;;;;;;;;;;;;;;;;;;;;;;;;AAwBUC,IAAAA,KAxBV;AAyBUC,IAAAA,YAzBV,GAyByB,KAzBzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GUC,IAAAA,mBA3GV,GA2GgC,UAACC,CAAD,EAAsC;AAClE,UAAI,CAAC,MAAKF,YAAN,IAAsB,MAAKG,KAAL,CAAWC,YAArC,EAAmD;AACjD,cAAKJ,YAAL,GAAoB,IAApB;AACA,cAAKG,KAAL,CAAWC,YAAX,CAAwBF,CAAxB;AACD;AACF,KAhHH;;AAkHUG,IAAAA,gBAlHV,GAkH6B,UAACH,CAAD,EAAsC;AAC/D,YAAKF,YAAL,GAAoB,KAApB;AACA,UAAI,MAAKG,KAAL,CAAWG,YAAf,EAA6B;AAC3B,cAAKH,KAAL,CAAWG,YAAX,CAAwBJ,CAAxB;AACD;AACF,KAvHH;;AAyHUK,IAAAA,YAzHV,GAyHyB,YAAM;AACW,YAAKJ,KADhB,CACnBK,QADmB,eACnBA,QADmB,CACTC,SADS,eACTA,SADS,CACEC,IADF,eACEA,IADF;;AAG3B,UAAIF,QAAJ,EAAc;AACZ,eAAO,QAAP;AACD;;AAED,UAAIC,SAAJ,EAAe;AACb,eAAOA,SAAP;AACD;;AAED,UAAIC,IAAJ,EAAU;AACR,eAAO,GAAP;AACD;;AAED,aAAO,QAAP;AACD,KAzIH,sDA2BSC,MA3BT,GA2BE,kBAAgB,mBACd,OACE,oBAAC,YAAD,CAAc,QAAd,QACG,UAAAZ,KAAK,EAAI,CACR,MAAI,CAACA,KAAL,GAAaA,KAAb,CACA,OAAO,MAAI,CAACa,UAAL,EAAP,CACD,CAJH,CADF,CAQD,CApCH,QAsCUA,UAtCV,GAsCE,sBAAqB,kCAcf,KAAKT,KAdU,CAEjBU,QAFiB,gBAEjBA,QAFiB,CAGjBC,IAHiB,gBAGjBA,IAHiB,CAIjBC,OAJiB,gBAIjBA,OAJiB,CAKjBC,IALiB,gBAKjBA,IALiB,CAMjBC,KANiB,gBAMjBA,KANiB,CAOjBC,KAPiB,gBAOjBA,KAPiB,CAQjBC,QARiB,gBAQjBA,QARiB,CASjBC,kBATiB,gBASjBA,kBATiB,CAUjBX,SAViB,gBAUjBA,SAViB,CAWjBL,YAXiB,gBAWjBA,YAXiB,CAYjBE,YAZiB,gBAYjBA,YAZiB,CAade,IAbc,yLAgBnB5B,OAAO,CAACoB,QAAQ,KAAKS,SAAd,EAAyB,sEAAzB,CAAP,CAEA,IAAMC,KAAK,GAAGL,KAAK,KAAK,OAAV,IAAqB,CAAC,KAAKf,KAAL,CAAWK,QAA/C,CAEA,IAAIgB,WAAW,GAAG,IAAlB,CACA,IAAIR,IAAJ,EAAU,CACRQ,WAAW,GAAG,6BAAK,SAAS,EAAE3B,QAAQ,CAACmB,IAAT,EAAhB,IAAkCA,IAAlC,CAAd,CACD,CAED,IAAMS,SAAS,GAAG/B,EAAE,gBACjBG,QAAQ,CAAC6B,IAAT,EADiB,IACC,IADD,MAEjB7B,QAAQ,CAACoB,KAAT,EAFiB,IAEE,CAAC,CAACA,KAFJ,MAGjBpB,QAAQ,CAAC0B,KAAT,CAAe,KAAKxB,KAApB,CAHiB,IAGYwB,KAHZ,MAIjB1B,QAAQ,CAAC8B,QAAT,CAAkB,KAAK5B,KAAvB,CAJiB,IAIemB,KAAK,KAAK,UAJzB,MAKjBrB,QAAQ,CAACiB,IAAT,CAAc,KAAKf,KAAnB,CALiB,IAKW,CAAC,CAACe,IAAF,IAAU,CAAC,CAACD,QALvB,MAMjBhB,QAAQ,CAAC+B,QAAT,CAAkB,KAAK7B,KAAvB,CANiB,IAMe8B,OAAO,CAACL,WAAD,CAAP,IAAwB,CAAC,CAACJ,kBANzC,MAOjBvB,QAAQ,CAACW,QAAT,CAAkB,KAAKT,KAAvB,CAPiB,IAOe,CAAC,CAAC,KAAKI,KAAL,CAAWK,QAP5B,OAApB,CAUA,IAAIsB,OAAO,GAAGX,QAAd,CACA,IAAIxB,UAAU,CAACwB,QAAD,CAAd,EAA0B,CACxBW,OAAO,GAAGX,QAAQ,CAAC,KAAKhB,KAAL,CAAWe,KAAZ,CAAlB,CACD,CAED,IAAMa,SAAS,GAAG,KAAKxB,YAAL,EAAlB,CAEA,OACE,oBAAC,SAAD,eACMc,IADN,IAEE,WAAW,EAAE,KAAKpB,mBAFpB,EAGE,YAAY,EAAE,KAAKI,gBAHrB,EAIE,SAAS,EAAEoB,SAJb,EAKE,QAAQ,EAAE,CAAC,CALb,KAOGD,WAPH,EAQGM,OARH,EASG,KAAK3B,KAAL,CAAWY,OAAX,IACC,6BACE,YAAS,mBADX,EAEE,SAAS,EAAErB,EAAE,kBACVG,QAAQ,CAACkB,OAAT,EADU,IACW,IADX,OAEVlB,QAAQ,CAACmC,YAAT,EAFU,IAEgBT,KAFhB,QAFf,IAOGR,OAPH,CAVJ,CADF,CAuBD,CAvGH,CAyGE;AACA;AA1GF,qBAA8BxB,KAAK,CAACwC,SAApC,EAAajC,Q,CACGmC,mB,GAAsB,U,CADzBnC,Q,CAEGoC,a,GAAgB,I,CAFnBpC,Q,CAIGqC,S,GAAY,EACxBtB,QAAQ,EAAErB,SAAS,CAAC4C,IADI,EAGxBrB,OAAO,EAAEvB,SAAS,CAAC6C,IAHK,EAKxB7B,QAAQ,EAAEhB,SAAS,CAAC4C,IALI,EAOxB1B,IAAI,EAAElB,SAAS,CAAC8C,MAPQ,EASxBtB,IAAI,EAAExB,SAAS,CAAC+C,SAAV,CAAoB,CAAC/C,SAAS,CAAC8C,MAAX,EAAmB9C,SAAS,CAAC6C,IAA7B,CAApB,CATkB,EAWxBpB,KAAK,EAAEzB,SAAS,CAAC4C,IAXO,EAaxBlB,KAAK,EAAE1B,SAAS,CAAC8C,MAbO,EAexBE,MAAM,EAAEhD,SAAS,CAAC8C,MAfM,EAiBxBG,OAAO,EAAEjD,SAAS,CAACkD,IAjBK,E;AAwI5B,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAwE;AAChG,SAAOrD,KAAK,CAACsD,cAAN,CAAoCD,KAApC;AACHE,EAAAA,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,KAAK,CAACM,IAA3C,EAAiD,eAAjD,CADG;AAEH,OAFJ;AAGD,CAJM","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\nimport cn from 'classnames';\r\n\r\nimport { isFunction } from '../../lib/utils';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './MenuItem.styles';\r\n\r\nexport type MenuItemState = null | 'hover' | 'selected' | void;\r\n\r\nexport interface MenuItemProps {\r\n  /** @ignore */\r\n  _enableIconPadding?: boolean;\r\n\r\n  /** @deprecated @ignore */\r\n  alkoLink?: boolean;\r\n  comment?: React.ReactNode;\r\n  disabled?: boolean;\r\n  icon?: React.ReactElement<any>;\r\n  link?: boolean;\r\n\r\n  /** @ignore */\r\n  loose?: boolean;\r\n\r\n  /** @ignore */\r\n  state?: MenuItemState;\r\n  onClick?: (event: React.SyntheticEvent<HTMLElement>) => void;\r\n  children?: React.ReactNode | ((state: MenuItemState) => React.ReactNode);\r\n  target?: React.AnchorHTMLAttributes<HTMLAnchorElement>['target'];\r\n  title?: React.AnchorHTMLAttributes<HTMLAnchorElement>['title'];\r\n  href?: React.AnchorHTMLAttributes<HTMLAnchorElement>['href'];\r\n  onMouseEnter?: React.MouseEventHandler;\r\n  onMouseLeave?: React.MouseEventHandler;\r\n\r\n  component?: React.ComponentType<any>;\r\n}\r\n\r\n/**\r\n * Элемент меню.\r\n */\r\nexport class MenuItem extends React.Component<MenuItemProps> {\r\n  public static __KONTUR_REACT_UI__ = 'MenuItem';\r\n  public static __MENU_ITEM__ = true;\r\n\r\n  public static propTypes = {\r\n    alkoLink: PropTypes.bool,\r\n\r\n    comment: PropTypes.node,\r\n\r\n    disabled: PropTypes.bool,\r\n\r\n    href: PropTypes.string,\r\n\r\n    icon: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n\r\n    loose: PropTypes.bool,\r\n\r\n    state: PropTypes.string,\r\n\r\n    target: PropTypes.string,\r\n\r\n    onClick: PropTypes.func,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private mouseEntered = false;\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const {\r\n      alkoLink,\r\n      link,\r\n      comment,\r\n      icon,\r\n      loose,\r\n      state,\r\n      children,\r\n      _enableIconPadding,\r\n      component,\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    warning(alkoLink === undefined, \"[MenuItem]: Prop 'alkoLink' was deprecated please use 'link' instead\");\r\n\r\n    const hover = state === 'hover' && !this.props.disabled;\r\n\r\n    let iconElement = null;\r\n    if (icon) {\r\n      iconElement = <div className={jsStyles.icon()}>{icon}</div>;\r\n    }\r\n\r\n    const className = cn({\r\n      [jsStyles.root()]: true,\r\n      [jsStyles.loose()]: !!loose,\r\n      [jsStyles.hover(this.theme)]: hover,\r\n      [jsStyles.selected(this.theme)]: state === 'selected',\r\n      [jsStyles.link(this.theme)]: !!link || !!alkoLink,\r\n      [jsStyles.withIcon(this.theme)]: Boolean(iconElement) || !!_enableIconPadding,\r\n      [jsStyles.disabled(this.theme)]: !!this.props.disabled,\r\n    });\r\n\r\n    let content = children;\r\n    if (isFunction(children)) {\r\n      content = children(this.props.state);\r\n    }\r\n\r\n    const Component = this.getComponent();\r\n\r\n    return (\r\n      <Component\r\n        {...rest}\r\n        onMouseOver={this.handleMouseEnterFix}\r\n        onMouseLeave={this.handleMouseLeave}\r\n        className={className}\r\n        tabIndex={-1}\r\n      >\r\n        {iconElement}\r\n        {content}\r\n        {this.props.comment && (\r\n          <div\r\n            data-tid=\"MenuItem__comment\"\r\n            className={cn({\r\n              [jsStyles.comment()]: true,\r\n              [jsStyles.commentHover()]: hover,\r\n            })}\r\n          >\r\n            {comment}\r\n          </div>\r\n        )}\r\n      </Component>\r\n    );\r\n  }\r\n\r\n  // https://github.com/facebook/react/issues/10109\r\n  // Mouseenter event not triggered when cursor moves from disabled button\r\n  private handleMouseEnterFix = (e: React.MouseEvent<HTMLElement>) => {\r\n    if (!this.mouseEntered && this.props.onMouseEnter) {\r\n      this.mouseEntered = true;\r\n      this.props.onMouseEnter(e);\r\n    }\r\n  };\r\n\r\n  private handleMouseLeave = (e: React.MouseEvent<HTMLElement>) => {\r\n    this.mouseEntered = false;\r\n    if (this.props.onMouseLeave) {\r\n      this.props.onMouseLeave(e);\r\n    }\r\n  };\r\n\r\n  private getComponent = () => {\r\n    const { disabled, component, href } = this.props;\r\n\r\n    if (disabled) {\r\n      return 'button';\r\n    }\r\n\r\n    if (component) {\r\n      return component;\r\n    }\r\n\r\n    if (href) {\r\n      return 'a';\r\n    }\r\n\r\n    return 'button';\r\n  };\r\n}\r\n\r\nexport const isMenuItem = (child: React.ReactNode): child is React.ReactElement<MenuItemProps> => {\r\n  return React.isValidElement<MenuItemProps>(child)\r\n    ? Object.prototype.hasOwnProperty.call(child.type, '__MENU_ITEM__')\r\n    : false;\r\n};\r\n"]}