{"version":3,"sources":["Spinner.tsx"],"names":["React","PropTypes","warning","cn","locale","ThemeContext","hasSvgAnimationSupport","SpinnerIcon","SpinnerOld","jsStyles","SpinnerFallback","types","SpinnerLocaleHelper","Spinner","props","theme","renderSpinner","type","dimmed","circleClassName","circleDimmed","circle","renderCaption","caption","captionColor","cloud","render","renderMain","renderSpinnerOld","loading","spinner","inner","Component","__KONTUR_REACT_UI__","propTypes","node","bool","oneOf","Object","keys","defaultProps","Types"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\nimport cn from 'classnames';\r\n\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { hasSvgAnimationSupport } from '../../lib/utils';\r\nimport { SpinnerIcon } from '../../internal/icons/SpinnerIcon';\r\nimport { SpinnerOld } from '../../internal/SpinnerOld';\r\n\r\nimport { jsStyles } from './Spinner.styles';\r\nimport { SpinnerFallback, types } from './SpinnerFallback';\r\nimport { SpinnerLocale, SpinnerLocaleHelper } from './locale';\r\n\r\nexport type SpinnerType = 'mini' | 'normal' | 'big';\r\n\r\nexport interface SpinnerProps {\r\n  caption?: React.ReactNode;\r\n  dimmed?: boolean;\r\n  /**\r\n   * Тип спиннера\r\n   * @default normal\r\n   */\r\n  type: SpinnerType;\r\n  /**\r\n   * @deprecated Старое поведение спиннера - облачко при среднем и большом размере - исчезнет в 3.0 поведение пересено в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n   *\r\n   * @default false\r\n   */\r\n  cloud?: boolean;\r\n}\r\n\r\n/**\r\n * DRAFT - инлайн-лоадер\r\n */\r\n\r\n@locale('Spinner', SpinnerLocaleHelper)\r\nexport class Spinner extends React.Component<SpinnerProps> {\r\n  public static __KONTUR_REACT_UI__ = 'Spinner';\r\n\r\n  public static propTypes = {\r\n    /**\r\n     * Текст рядом с мини-лоадером.\r\n     *\r\n     * 'Загрузка' - значение по-умолчанию\r\n     */\r\n    caption: PropTypes.node,\r\n\r\n    dimmed: PropTypes.bool,\r\n\r\n    /**\r\n     * Тип спиннера: mini, normal, big\r\n     *\r\n     * Значение по-умолчанию - normal\r\n     *\r\n     * Spinner.types - все доступные типы\r\n     */\r\n    type: PropTypes.oneOf(Object.keys(types)),\r\n    /**\r\n     * @deprecated Старое поведение спиннера - облачко при среднем и большом размере\r\n     *\r\n     * @default false - исчезнет в 3.0\r\n     */\r\n    cloud: PropTypes.bool,\r\n  };\r\n\r\n  public static defaultProps: SpinnerProps = {\r\n    type: 'normal',\r\n  };\r\n\r\n  public static Types: typeof types = types;\r\n  private theme!: Theme;\r\n  private readonly locale!: SpinnerLocale;\r\n\r\n  constructor(props: SpinnerProps) {\r\n    super(props);\r\n    warning(!this.props.cloud, 'cloud is deprecated, will removed in 3.0. ');\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return !this.props.cloud ? this.renderMain() : this.renderSpinnerOld();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderSpinnerOld() {\r\n    return <SpinnerOld {...this.props} />;\r\n  }\r\n\r\n  private renderMain() {\r\n    const { type, caption = this.locale.loading, dimmed } = this.props;\r\n\r\n    return (\r\n      <div className={jsStyles.spinner()}>\r\n        <span className={jsStyles.inner()}>\r\n          {hasSvgAnimationSupport && this.renderSpinner(type, dimmed)}\r\n          {!hasSvgAnimationSupport && <SpinnerFallback type={type} dimmed={dimmed} />}\r\n        </span>\r\n        {caption && this.renderCaption(type, caption)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderSpinner = (type: SpinnerType, dimmed?: boolean) => {\r\n    const circleClassName = dimmed ? jsStyles.circleDimmed(this.theme) : jsStyles.circle(this.theme);\r\n\r\n    return <SpinnerIcon size={type} className={circleClassName} />;\r\n  };\r\n\r\n  private renderCaption = (type: SpinnerType, caption: React.ReactNode) => (\r\n    <span className={cn(jsStyles[type](), jsStyles.captionColor(this.theme))}>{caption}</span>\r\n  );\r\n}\r\n"]}