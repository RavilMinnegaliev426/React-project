{"version":3,"sources":["Modal.tsx"],"names":["React","FocusLock","cn","isKeyEscape","LayoutEvents","RenderContainer","ZIndex","stopPropagation","HideBodyVerticalScroll","ModalStack","ResizeDetector","ThemeContext","isIE11","ModalContext","ModalFooter","ModalHeader","isBody","isFooter","isHeader","ModalBody","ModalClose","jsStyles","mountedModalsCount","Modal","state","stackPosition","horizontalScroll","theme","stackSubscription","containerNode","mouseDownTarget","mouseUpTarget","requestClose","props","disableClose","onClose","refContainer","center","handleStackChange","stack","setState","indexOf","handleContainerMouseDown","event","target","handleContainerMouseUp","handleContainerClick","ignoreBackgroundClick","currentTarget","handleKeyDown","e","checkHorizontalScrollAppearance","hasScroll","containerClientWidth","clientWidth","containerScrollWidth","scrollWidth","handleResize","emit","componentDidMount","add","window","addEventListener","componentWillUnmount","removeEventListener","remove","render","renderMain","hasHeader","hasFooter","hasPanel","Children","toArray","children","forEach","child","panel","modalContextProps","noClose","close","additionalPadding","style","containerStyle","width","root","bg","container","centerContainer","alignTop","Boolean","disableFocusLock","closeWrapper","Component","__KONTUR_REACT_UI__","Header","Body","Footer","propTypes","propName","componentName","some","Error","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport FocusLock from 'react-focus-lock';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyEscape } from '../../lib/events/keyboard/identifiers';\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { RenderContainer } from '../../internal/RenderContainer';\r\nimport { ZIndex } from '../../internal/ZIndex';\r\nimport { stopPropagation } from '../../lib/events/stopPropagation';\r\nimport { HideBodyVerticalScroll } from '../../internal/HideBodyVerticalScroll';\r\nimport { ModalStack, ModalStackSubscription } from '../../lib/ModalStack';\r\nimport { ResizeDetector } from '../../internal/ResizeDetector';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { isIE11 } from '../../lib/utils';\r\n\r\nimport { ModalContext, ModalContextProps } from './ModalContext';\r\nimport { ModalFooter } from './ModalFooter';\r\nimport { ModalHeader } from './ModalHeader';\r\nimport { isBody, isFooter, isHeader } from './helpers';\r\nimport { ModalBody } from './ModalBody';\r\nimport { ModalClose } from './ModalClose';\r\nimport { jsStyles } from './Modal.styles';\r\n\r\nlet mountedModalsCount = 0;\r\n\r\nexport interface ModalProps {\r\n  /**\r\n   * Отключает событие onClose, также дизейблит кнопку закрытия модалки\r\n   */\r\n  disableClose?: boolean;\r\n\r\n  /**\r\n   * Выравнивание окна по верху страницы.\r\n   */\r\n  alignTop?: boolean;\r\n\r\n  /**\r\n   * Не закрывать окно при клике на фон.\r\n   */\r\n  ignoreBackgroundClick?: boolean;\r\n\r\n  /**\r\n   * Не показывать крестик для закрытия окна.\r\n   */\r\n  noClose?: boolean;\r\n  width?: number | string;\r\n\r\n  /**\r\n   * Вызывается, когда пользователь запросил закрытие окна (нажал на фон, на\r\n   * Escape или на крестик).\r\n   */\r\n  onClose?: () => void;\r\n\r\n  /**\r\n   * Не использовать фокус-лок внутри модалки.\r\n   * По умолчанию true для IE11.\r\n   */\r\n  disableFocusLock?: boolean;\r\n}\r\n\r\nexport interface ModalState {\r\n  stackPosition: number;\r\n  horizontalScroll: boolean;\r\n}\r\n\r\n/**\r\n * Модальное окно\r\n *\r\n * Содержит в себе три компоненты: **Modal.Header**,\r\n * **Modal.Body** и **Modal.Footer**\r\n *\r\n * Для отображения серой плашки в футере в компонент\r\n * **Footer** необходимо передать пропс **panel**\r\n *\r\n * Для отключения прилипания шапки и футера\r\n * в соответствующий компонет нужно передать\r\n * проп **sticky** со значением **false**\r\n * (по-умолчанию прилипание включено)\r\n */\r\nexport class Modal extends React.Component<ModalProps, ModalState> {\r\n  public static __KONTUR_REACT_UI__ = 'Modal';\r\n\r\n  public static Header = ModalHeader;\r\n  public static Body = ModalBody;\r\n  public static Footer = ModalFooter;\r\n\r\n  public static propTypes = {\r\n    children(props: ModalProps, propName: keyof ModalProps, componentName: string) {\r\n      if (\r\n        React.Children.toArray(props[propName]).some(child => !isHeader(child) && !isBody(child) && !isFooter(child))\r\n      ) {\r\n        return new Error(\r\n          `Only 'Header/Body/Footer' components are allowed for '${propName}' prop of '${componentName}' component`,\r\n        );\r\n      }\r\n    },\r\n  };\r\n\r\n  public static defaultProps = { \r\n    // NOTE: в ie нормально не работает\r\n    disableFocusLock: isIE11 \r\n  };\r\n\r\n  public state: ModalState = {\r\n    stackPosition: 0,\r\n    horizontalScroll: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private stackSubscription: ModalStackSubscription | null = null;\r\n  private containerNode: HTMLDivElement | null = null;\r\n  private mouseDownTarget: EventTarget | null = null;\r\n  private mouseUpTarget: EventTarget | null = null;\r\n\r\n  public componentDidMount() {\r\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\r\n\r\n    if (mountedModalsCount === 0) {\r\n      window.addEventListener('resize', this.checkHorizontalScrollAppearance);\r\n    }\r\n\r\n    mountedModalsCount++;\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n    this.checkHorizontalScrollAppearance();\r\n\r\n    if (this.containerNode) {\r\n      this.containerNode.addEventListener('scroll', LayoutEvents.emit);\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (--mountedModalsCount === 0) {\r\n      window.removeEventListener('resize', this.checkHorizontalScrollAppearance);\r\n      LayoutEvents.emit();\r\n    }\r\n\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n    if (this.stackSubscription != null) {\r\n      this.stackSubscription.remove();\r\n    }\r\n    ModalStack.remove(this);\r\n\r\n    if (this.containerNode) {\r\n      this.containerNode.removeEventListener('scroll', LayoutEvents.emit);\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    let hasHeader = false;\r\n    let hasFooter = false;\r\n    let hasPanel = false;\r\n\r\n    React.Children.toArray(this.props.children).forEach(child => {\r\n      if (isHeader(child)) {\r\n        hasHeader = true;\r\n      }\r\n      if (isFooter(child)) {\r\n        hasFooter = true;\r\n        if (child.props.panel) {\r\n          hasPanel = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const modalContextProps: ModalContextProps = {\r\n      hasHeader,\r\n      horizontalScroll: this.state.horizontalScroll,\r\n    };\r\n    if (hasHeader && !this.props.noClose) {\r\n      modalContextProps.close = {\r\n        disableClose: this.props.disableClose,\r\n        requestClose: this.requestClose,\r\n      };\r\n    }\r\n    if (!hasFooter) {\r\n      modalContextProps.additionalPadding = true;\r\n    }\r\n    if (hasFooter && hasPanel) {\r\n      modalContextProps.additionalPadding = true;\r\n    }\r\n\r\n    const style: { width?: number | string } = {};\r\n    const containerStyle: { width?: number | string } = {};\r\n\r\n    if (this.props.width) {\r\n      style.width = this.props.width;\r\n    } else {\r\n      containerStyle.width = 'auto';\r\n    }\r\n\r\n    return (\r\n      <RenderContainer>\r\n        <ZIndex priority={'Modal'} className={jsStyles.root()}>\r\n          <HideBodyVerticalScroll />\r\n          {this.state.stackPosition === 0 && <div className={jsStyles.bg(this.theme)} />}\r\n          <div\r\n            ref={this.refContainer}\r\n            className={jsStyles.container()}\r\n            onMouseDown={this.handleContainerMouseDown}\r\n            onMouseUp={this.handleContainerMouseUp}\r\n            onClick={this.handleContainerClick}\r\n            data-tid=\"modal-container\"\r\n          >\r\n            <div\r\n              className={cn({\r\n                [jsStyles.centerContainer(this.theme)]: true,\r\n                [jsStyles.alignTop(this.theme)]: Boolean(this.props.alignTop),\r\n              })}\r\n              style={containerStyle}\r\n              data-tid=\"modal-content\"\r\n            >\r\n              <div className={jsStyles.window(this.theme)} style={style}>\r\n                <ResizeDetector onResize={this.handleResize}>\r\n                  <FocusLock disabled={this.props.disableFocusLock} autoFocus={false}>\r\n                    {!hasHeader && !this.props.noClose ? (\r\n                      <ZIndex priority={'ModalCross'} className={jsStyles.closeWrapper()}>\r\n                        <ModalClose requestClose={this.requestClose} disableClose={this.props.disableClose} />\r\n                      </ZIndex>\r\n                    ) : null}\r\n                    <ModalContext.Provider value={modalContextProps}>{this.props.children}</ModalContext.Provider>\r\n                  </FocusLock>\r\n                </ResizeDetector>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ZIndex>\r\n      </RenderContainer>\r\n    );\r\n  }\r\n\r\n  private requestClose = () => {\r\n    if (this.props.disableClose) {\r\n      return;\r\n    }\r\n    if (this.props.onClose) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  private refContainer = (center: HTMLDivElement | null) => {\r\n    this.containerNode = center;\r\n  };\r\n\r\n  private handleStackChange = (stack: ReadonlyArray<React.Component>) => {\r\n    this.setState({ stackPosition: stack.indexOf(this) });\r\n  };\r\n\r\n  private handleContainerMouseDown = (event: React.MouseEvent) => {\r\n    this.mouseDownTarget = event.target;\r\n  };\r\n\r\n  private handleContainerMouseUp = (event: React.MouseEvent) => {\r\n    this.mouseUpTarget = event.target;\r\n  };\r\n\r\n  private handleContainerClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!this.props.ignoreBackgroundClick) {\r\n      const { target, currentTarget } = event;\r\n      if (target === currentTarget && this.mouseDownTarget === currentTarget && this.mouseUpTarget === currentTarget) {\r\n        this.requestClose();\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleKeyDown = (e: KeyboardEvent) => {\r\n    if (this.state.stackPosition !== 0) {\r\n      return;\r\n    }\r\n    if (isKeyEscape(e)) {\r\n      stopPropagation(e);\r\n      this.requestClose();\r\n    }\r\n  };\r\n\r\n  private checkHorizontalScrollAppearance = () => {\r\n    let hasScroll = false;\r\n\r\n    if (this.containerNode) {\r\n      const containerClientWidth = this.containerNode.clientWidth;\r\n      const containerScrollWidth = this.containerNode.scrollWidth;\r\n      hasScroll = containerClientWidth < containerScrollWidth;\r\n    }\r\n    if (hasScroll && !this.state.horizontalScroll) {\r\n      this.setState({ horizontalScroll: true });\r\n    } else if (this.state.horizontalScroll) {\r\n      this.setState({ horizontalScroll: false });\r\n    }\r\n  };\r\n\r\n  private handleResize = (event: UIEvent) => {\r\n    LayoutEvents.emit();\r\n  };\r\n}\r\n"]}