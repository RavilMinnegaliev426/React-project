{"version":3,"sources":["FiasData.ts"],"names":["FiasData","data","isAddressObject","name","isStead","number","isHouse","structureNumber","buildingNumber","isRoom","flatNumber","abbreviation","code","fiasId","parentFiasId","postalCode","estateStatus","structureStatus","Object","prototype","hasOwnProperty","call"],"mappings":"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","sourcesContent":["import {\r\n  FiasAddressObject,\r\n  FiasEstateStatuses,\r\n  FiasId,\r\n  FiasObject,\r\n  FiasHouse,\r\n  FiasStead,\r\n  FiasRoom,\r\n  FiasStructureStatuses,\r\n} from '../types';\r\n\r\nexport class FiasData {\r\n  public static isAddressObject = (data: FiasObject): data is FiasAddressObject => {\r\n    return (\r\n      data &&\r\n      Object.prototype.hasOwnProperty.call(data, 'name') &&\r\n      Object.prototype.hasOwnProperty.call(data, 'abbreviation')\r\n    );\r\n  };\r\n\r\n  public static isStead = (data: FiasObject): data is FiasStead => {\r\n    return (\r\n      data &&\r\n      Object.prototype.hasOwnProperty.call(data, 'number') &&\r\n      Object.prototype.hasOwnProperty.call(data, 'liveStatus') &&\r\n      !Object.prototype.hasOwnProperty.call(data, 'estateStatus')\r\n    );\r\n  };\r\n\r\n  public static isHouse = (data: FiasObject): data is FiasHouse => {\r\n    return (\r\n      data &&\r\n      Object.prototype.hasOwnProperty.call(data, 'structureStatus') &&\r\n      (Object.prototype.hasOwnProperty.call(data, 'number') ||\r\n        Object.prototype.hasOwnProperty.call(data, 'structureNumber'))\r\n    );\r\n  };\r\n\r\n  public static isRoom = (data: FiasObject): data is FiasRoom => {\r\n    return (\r\n      data &&\r\n      Object.prototype.hasOwnProperty.call(data, 'flatType') &&\r\n      Object.prototype.hasOwnProperty.call(data, 'flatNumber') &&\r\n      Object.prototype.hasOwnProperty.call(data, 'liveStatus')\r\n    );\r\n  };\r\n\r\n  constructor(public data: FiasObject) {}\r\n\r\n  public get name(): string {\r\n    const { data } = this;\r\n    if (FiasData.isAddressObject(data)) {\r\n      return data.name;\r\n    } else if (FiasData.isStead(data)) {\r\n      return data.number;\r\n    } else if (FiasData.isHouse(data)) {\r\n      return data.number || data.structureNumber || data.buildingNumber || '';\r\n    } else if (FiasData.isRoom(data)) {\r\n      return data.flatNumber;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  public get abbreviation(): string {\r\n    return FiasData.isAddressObject(this.data) ? this.data.abbreviation : '';\r\n  }\r\n\r\n  public get code(): string {\r\n    return (FiasData.isAddressObject(this.data) && this.data.code) || '';\r\n  }\r\n\r\n  public get number(): string {\r\n    return (FiasData.isStead(this.data) || FiasData.isHouse(this.data)) && this.data.number ? this.data.number : '';\r\n  }\r\n\r\n  public get structureNumber(): string {\r\n    return FiasData.isHouse(this.data) && this.data.structureNumber ? this.data.structureNumber : '';\r\n  }\r\n\r\n  public get buildingNumber(): string {\r\n    return FiasData.isHouse(this.data) && this.data.buildingNumber ? this.data.buildingNumber : '';\r\n  }\r\n\r\n  public get fiasId(): FiasId {\r\n    return this.data.fiasId;\r\n  }\r\n\r\n  public get parentFiasId(): FiasId {\r\n    return (this.data && this.data.parentFiasId) || '';\r\n  }\r\n\r\n  public get postalCode(): string {\r\n    return (this.data && this.data.postalCode) || '';\r\n  }\r\n\r\n  public get estateStatus(): FiasEstateStatuses | undefined {\r\n    if (FiasData.isHouse(this.data)) {\r\n      return this.data.estateStatus;\r\n    }\r\n  }\r\n\r\n  public get structureStatus(): FiasStructureStatuses | undefined {\r\n    if (FiasData.isHouse(this.data)) {\r\n      return this.data.structureStatus;\r\n    }\r\n  }\r\n}\r\n"]}