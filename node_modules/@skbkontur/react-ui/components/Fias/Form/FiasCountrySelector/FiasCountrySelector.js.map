{"version":3,"sources":["FiasCountrySelector.tsx"],"names":["React","FiasLocaleHelper","FiasAddress","locale","FiasComboBox","FiasCountrySelector","createItemsSource","prefix","props","api","limit","searchCountry","then","result","success","data","error","Promise","resolve","map","country","reject","renderItem","address","fullName","renderValue","renderNotFound","searchNotFound","valueToString","handleValueChange","value","onValueChange","onUnexpectedInput","query","render","countryPlaceholder","Component"],"mappings":"uOAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,SAAqBC,gBAArB,QAA6C,WAA7C;AACA,SAASC,WAAT,QAA4B,uBAA5B;;AAEA,SAASC,MAAT,QAAuB,gCAAvB;;AAEA,SAASC,YAAT,QAA6B,gBAA7B;;;;;;;;;;AAUA,WAAaC,mBAAb,WADCF,MAAM,CAAC,MAAD,EAASF,gBAAT,CACP;AACmBE,IAAAA,MADnB;;;;;;;;;;;;;;;;;;;;;;;;AAyBUG,IAAAA,iBAzBV,iGAyB8B,iBAAOC,MAAP;AACH,sBAAKC,KADF,EAClBC,GADkB,eAClBA,GADkB,EACbC,KADa,eACbA,KADa;AAEnBD,gBAAAA,GAAG,CAACE,aAAJ,CAAkB,EAAEJ,MAAM,EAANA,MAAF,EAAUG,KAAK,EAALA,KAAV,EAAlB,EAAqCE,IAArC,CAA0C,UAAAC,MAAM,EAAI;AACjDC,kBAAAA,OADiD,GACxBD,MADwB,CACjDC,OADiD,CACxCC,IADwC,GACxBF,MADwB,CACxCE,IADwC,CAClCC,KADkC,GACxBH,MADwB,CAClCG,KADkC;AAEzD,yBAAOF,OAAO,IAAIC,IAAX;AACHE,kBAAAA,OAAO,CAACC,OAAR;AACEH,kBAAAA,IAAI,CAACI,GAAL,CAAS,UAACC,OAAD,EAA0B;AACjC,2BAAO,IAAIlB,WAAJ,CAAgB,EAAEkB,OAAO,EAAPA,OAAF,EAAhB,CAAP;AACD,mBAFD,CADF,CADG;;AAMHH,kBAAAA,OAAO,CAACI,MAAR,CAAeL,KAAf,CANJ;AAOD,iBATM,CAFmB,0DAzB9B;;;AAuCUM,IAAAA,UAvCV,GAuCuB,UAACC,OAAD,EAAkC;AAC7CH,MAAAA,OAD6C,GACjCG,OADiC,CAC7CH,OAD6C;AAErD,aAAQA,OAAO,IAAIA,OAAO,CAACI,QAApB,IAAiC,EAAxC;AACD,KA1CH;;AA4CUC,IAAAA,WA5CV,GA4CwB,UAACF,OAAD,EAAkC;AAC9CH,MAAAA,OAD8C,GAClCG,OADkC,CAC9CH,OAD8C;AAEtD,aAAQA,OAAO,IAAIA,OAAO,CAACI,QAApB,IAAiC,EAAxC;AACD,KA/CH;;AAiDUE,IAAAA,cAjDV,GAiD2B,YAAuB;AAC9C,aAAO,MAAKvB,MAAL,CAAYwB,cAAnB;AACD,KAnDH;;AAqDUC,IAAAA,aArDV,GAqD0B,UAACL,OAAD,EAAkC;AAChDH,MAAAA,OADgD,GACpCG,OADoC,CAChDH,OADgD;AAExD,aAAQA,OAAO,IAAIA,OAAO,CAACI,QAApB,IAAiC,EAAxC;AACD,KAxDH;;AA0DUK,IAAAA,iBA1DV,GA0D8B,UAACC,KAAD,EAAwB;AAC1CC,MAAAA,aAD0C,GACxB,MAAKvB,KADmB,CAC1CuB,aAD0C;AAElD,UAAIA,aAAJ,EAAmB;AACjBA,QAAAA,aAAa,CAACD,KAAK,CAACV,OAAP,CAAb;AACD;AACF,KA/DH;;AAiEUY,IAAAA,iBAjEV,GAiE8B,UAACC,KAAD,EAAmB;AAC7C,UAAI,CAACA,KAAL,EAAY;AACV,eAAO,IAAI/B,WAAJ,EAAP;AACD;AACF,KArEH,iEAGSgC,MAHT,GAGE,kBAAgB,oBACa,KAAK1B,KADlB,CACNY,OADM,gBACNA,OADM,CACGV,KADH,gBACGA,KADH,CAEd,IAAMa,OAAO,GAAG,IAAIrB,WAAJ,CAAgB,EAAEkB,OAAO,EAAPA,OAAF,EAAhB,CAAhB,CACA,OACE,oBAAC,YAAD,IACE,QAAQ,EAAE,KAAKd,iBADjB,EAEE,KAAK,EAAEiB,OAFT,EAGE,UAAU,EAAE,KAAKD,UAHnB,EAIE,WAAW,EAAE,KAAKG,WAJpB,EAKE,aAAa,EAAE,KAAKG,aALtB,EAME,aAAa,EAAE,KAAKC,iBANtB,EAOE,iBAAiB,EAAE,KAAKG,iBAP1B,EAQE,cAAc,EAAE,KAAKN,cARvB,EASE,WAAW,EAAE,KAAKvB,MAAL,CAAYgC,kBAT3B,EAUE,KAAK,EAAE,MAVT,EAWE,SAAS,EAAE,KAXb,EAYE,aAAa,EAAE,KAZjB,EAaE,KAAK,EAAEzB,KAbT,GADF,CAiBD,CAvBH,8BAAyCV,KAAK,CAACoC,SAA/C","sourcesContent":["import React from 'react';\r\n\r\nimport { FiasLocale, FiasLocaleHelper } from '../locale';\r\nimport { FiasAddress } from '../models/FiasAddress';\r\nimport { FiasCountry, FiasAPIProvider } from '../types';\r\nimport { locale } from '../../../lib/locale/decorators';\r\n\r\nimport { FiasComboBox } from './FiasComboBox';\r\n\r\nexport interface FiasCountrySelectorProps {\r\n  api: FiasAPIProvider;\r\n  country?: FiasCountry;\r\n  onValueChange?: (value?: FiasCountry) => void;\r\n  limit?: number;\r\n}\r\n\r\n@locale('Fias', FiasLocaleHelper)\r\nexport class FiasCountrySelector extends React.Component<FiasCountrySelectorProps> {\r\n  private readonly locale!: FiasLocale;\r\n\r\n  public render() {\r\n    const { country, limit } = this.props;\r\n    const address = new FiasAddress({ country });\r\n    return (\r\n      <FiasComboBox\r\n        getItems={this.createItemsSource}\r\n        value={address}\r\n        renderItem={this.renderItem}\r\n        renderValue={this.renderValue}\r\n        valueToString={this.valueToString}\r\n        onValueChange={this.handleValueChange}\r\n        onUnexpectedInput={this.onUnexpectedInput}\r\n        renderNotFound={this.renderNotFound}\r\n        placeholder={this.locale.countryPlaceholder}\r\n        width={'100%'}\r\n        drawArrow={false}\r\n        searchOnFocus={false}\r\n        limit={limit}\r\n      />\r\n    );\r\n  }\r\n\r\n  private createItemsSource = async (prefix: string) => {\r\n    const { api, limit } = this.props;\r\n    return api.searchCountry({ prefix, limit }).then(result => {\r\n      const { success, data, error } = result;\r\n      return success && data\r\n        ? Promise.resolve(\r\n            data.map((country: FiasCountry) => {\r\n              return new FiasAddress({ country });\r\n            }),\r\n          )\r\n        : Promise.reject(error);\r\n    });\r\n  };\r\n\r\n  private renderItem = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private renderValue = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private renderNotFound = (): React.ReactNode => {\r\n    return this.locale.searchNotFound;\r\n  };\r\n\r\n  private valueToString = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private handleValueChange = (value: FiasAddress) => {\r\n    const { onValueChange } = this.props;\r\n    if (onValueChange) {\r\n      onValueChange(value.country);\r\n    }\r\n  };\r\n\r\n  private onUnexpectedInput = (query: string) => {\r\n    if (!query) {\r\n      return new FiasAddress();\r\n    }\r\n  };\r\n}\r\n"]}