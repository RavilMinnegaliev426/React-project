{"version":3,"sources":["TopBar.tsx"],"names":["React","PropTypes","warning","cn","Logotype","ThemeContext","TopBarButtonItem","TopBarDivider","TopBarItem","TopBarOrganizations","TopBarDropdown","TopBarUser","TopBarEnd","TopBarStart","TopBarLogout","jsStyles","TopBar","props","theme","render","renderMain","children","leftItems","cabinetUrl","maxWidth","noShadow","noMargin","userName","onLogout","rightItems","defaultProps","_rightItems","push","logoProps","suffix","color","href","logoHref","logoComponent","withWidget","noWidget","root","center","containerWrap","container","startItems","_renderItems","endItems","items","map","item","i","key","cloneElement","Component","__KONTUR_REACT_UI__","Divider","Item","Dropdown","OrganizationsDropdown","Start","End","ItemStatic","User","Logout","propTypes","string","node","arrayOf","element","any","oneOfType","number","bool","func"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\nimport cn from 'classnames';\r\n\r\nimport { Logotype } from '../Logotype';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { TopBarButtonItem } from './TopBarButtonItem';\r\nimport { TopBarDivider } from './TopBarDivider';\r\nimport { TopBarItem } from './TopBarItem';\r\nimport { TopBarOrganizations } from './TopBarOrganizations';\r\nimport { TopBarDropdown } from './TopBarDropdown';\r\nimport { TopBarUser } from './TopBarUser';\r\nimport { TopBarEnd } from './TopBarEnd';\r\nimport { TopBarStart } from './TopBarStart';\r\nimport { TopBarLogout } from './TopBarLogout';\r\nimport { jsStyles } from './TopBar.styles';\r\n\r\nexport interface TopBarProps {\r\n  children?: React.ReactNode;\r\n  color?: string;\r\n  cabinetUrl?: string;\r\n  leftItems?: Array<React.ReactElement<any>>;\r\n  logoComponent?: React.ComponentType<any> | string;\r\n  logoHref?: string;\r\n  maxWidth?: string | number;\r\n  noMargin?: boolean;\r\n  noShadow?: boolean;\r\n  noWidget?: boolean;\r\n  onLogout?: () => void;\r\n  rightItems?: Array<React.ReactElement<any>>;\r\n  suffix?: string;\r\n  userName?: string;\r\n}\r\n\r\nexport interface TopBarDefaultProps {\r\n  maxWidth: string | number;\r\n  rightItems: Array<React.ReactElement<any>>;\r\n}\r\n\r\n/**\r\n * __DRAFT__\r\n *\r\n * Шапка\r\n *\r\n * `Item({children: node, iconOnly: bool, onClick: func})` – кликабельный элемент шапки\r\n *\r\n * `Divider()` – разделитель\r\n *\r\n * `TopBarStart({children: node})` – контейнер для элементов в начале шапки\r\n *\r\n * `TopBarEnd({children: node})` – контейнер для элементов в конце шапки\r\n *\r\n * `Logout({children?: node})` – обёртка над `Item`. По умолчанию выводит локализованный текст\r\n *\r\n */\r\n\r\n/**\r\n * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n */\r\nexport class TopBar extends React.Component<TopBarProps> {\r\n  public static __KONTUR_REACT_UI__ = 'TopBar';\r\n\r\n  public static Divider = TopBarDivider;\r\n  public static Item = TopBarButtonItem;\r\n  public static Dropdown = TopBarDropdown;\r\n  public static OrganizationsDropdown = TopBarOrganizations;\r\n  public static Start = TopBarStart;\r\n  public static End = TopBarEnd;\r\n  public static ItemStatic = TopBarItem;\r\n  public static User = TopBarUser;\r\n  public static Logout = TopBarLogout;\r\n\r\n  public static defaultProps: TopBarDefaultProps = {\r\n    maxWidth: 1166,\r\n    rightItems: [],\r\n  };\r\n\r\n  public static propTypes = {\r\n    /**\r\n     * URL для кастомизации ссылок в меню пользователя\r\n     */\r\n    cabinetUrl: PropTypes.string,\r\n\r\n    children: PropTypes.node,\r\n\r\n    /**\r\n     * Цвет логотипа\r\n     */\r\n    color: PropTypes.string,\r\n\r\n    leftItems: PropTypes.arrayOf(PropTypes.element),\r\n\r\n    /**\r\n     * Компонент используемый для рендеринга ссылки.\r\n     * Нужно переопределить если вы хотите подставить ссылку для роутера\r\n     */\r\n    logoComponent: PropTypes.any,\r\n\r\n    logoHref: PropTypes.string,\r\n\r\n    /**\r\n     * Максимальная ширина контейнера в шапке\r\n     */\r\n    maxWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\r\n    /**\r\n     * Отключает отступ снизу\r\n     */\r\n    noMargin: PropTypes.bool,\r\n\r\n    /**\r\n     * Отключает тень\r\n     */\r\n    noShadow: PropTypes.bool,\r\n\r\n    /**\r\n     * Отключает виджет\r\n     */\r\n    noWidget: PropTypes.bool,\r\n\r\n    rightItems: PropTypes.arrayOf(PropTypes.element),\r\n\r\n    /**\r\n     * Суффикс логотипа\r\n     */\r\n    suffix: PropTypes.string,\r\n\r\n    /**\r\n     * Имя пользователя\r\n     */\r\n    userName: PropTypes.node,\r\n\r\n    /**\r\n     * Функция выхода\r\n     */\r\n    onLogout: PropTypes.func,\r\n  };\r\n\r\n  private theme!: Theme;\r\n\r\n  public constructor(props: TopBarProps) {\r\n    super(props);\r\n    warning(\r\n      false,\r\n      `TopBar has been deprecated, use TopBar from @skbkontur/react-ui-addons instead, see [migration](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)`,\r\n    );\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const {\r\n      children,\r\n      leftItems,\r\n      cabinetUrl,\r\n      maxWidth,\r\n      noShadow,\r\n      noMargin,\r\n      userName,\r\n      onLogout,\r\n      rightItems = TopBar.defaultProps.rightItems,\r\n    } = this.props;\r\n\r\n    const _rightItems: Array<React.ReactElement<any>> = [...rightItems];\r\n\r\n    if (userName) {\r\n      _rightItems.push(<TopBarUser userName={userName} cabinetUrl={cabinetUrl} />, <TopBarDivider />);\r\n    }\r\n\r\n    if (onLogout) {\r\n      _rightItems.push(<TopBarLogout onClick={onLogout} />);\r\n    }\r\n\r\n    const logoProps = {\r\n      suffix: this.props.suffix,\r\n      color: this.props.color,\r\n      href: this.props.logoHref,\r\n      logoComponent: this.props.logoComponent,\r\n      withWidget: !this.props.noWidget,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className={cn({\r\n          [jsStyles.root(this.theme)]: true,\r\n          [jsStyles.noShadow()]: !!noShadow,\r\n          [jsStyles.noMargin()]: !!noMargin,\r\n        })}\r\n      >\r\n        <div className={jsStyles.center()} style={{ maxWidth }}>\r\n          <div className={jsStyles.containerWrap()}>\r\n            {children ? (\r\n              <div className={jsStyles.container()}>{children}</div>\r\n            ) : (\r\n              <div className={jsStyles.container()}>\r\n                <div className={jsStyles.startItems()}>\r\n                  <TopBarItem>\r\n                    <Logotype {...logoProps} />\r\n                  </TopBarItem>\r\n                  {this._renderItems(leftItems)}\r\n                </div>\r\n                <div className={jsStyles.endItems()}>{this._renderItems(_rightItems)}</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _renderItems(items?: Array<React.ReactElement<any>>) {\r\n    if (!items) {\r\n      return null;\r\n    }\r\n\r\n    return items.map((item, i) => {\r\n      if (item && !item.key) {\r\n        return React.cloneElement(item, {\r\n          key: '$topbar_' + i,\r\n        });\r\n      }\r\n      return item;\r\n    });\r\n  }\r\n}\r\n"]}