{"version":3,"sources":["TopBarDropdown.tsx"],"names":["React","isKeyArrowVertical","isKeyEnter","isKeySpace","someKeys","DropdownMenu","TopBarButtonItem","TopBarDropdown","dropdownMenu","open","close","refDropdownMenu","ref","renderButton","captionProps","handleKeyDown","event","openMenu","opened","props","icon","minWidth","undefined","use","toggleMenu","label","e","preventDefault","render","children","Component","__KONTUR_REACT_UI__","defaultProps"],"mappings":"gIAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,SAASC,kBAAT,EAA6BC,UAA7B,EAAyCC,UAAzC,EAAqDC,QAArD,QAAqE,uCAArE;;;AAGA,SAASC,YAAT,QAAgD,iBAAhD;;;AAGA,SAASC,gBAAT,QAAiC,oBAAjC;;;;;;;;;;;AAWA;;;;;;AAMA,WAAaC,cAAb;;;;;;;AAOUC,IAAAA,YAPV,GAOiD,IAPjD;;;;;;;;;;AAiBSC,IAAAA,IAjBT,GAiBgB,YAAY;AACxB,UAAI,MAAKD,YAAT,EAAuB;AACrB,cAAKA,YAAL,CAAkBC,IAAlB;AACD;AACF,KArBH;;AAuBSC,IAAAA,KAvBT,GAuBiB,YAAY;AACzB,UAAI,MAAKF,YAAT,EAAuB;AACrB,cAAKA,YAAL,CAAkBE,KAAlB;AACD;AACF,KA3BH;;AA6BUC,IAAAA,eA7BV,GA6B4B,UAACC,GAAD,UAAkC,MAAKJ,YAAL,GAAoBI,GAAtD,EA7B5B;;AA+BUC,IAAAA,YA/BV,GA+ByB,UAACC,YAAD,EAAyC;AAC9D,UAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAA6C;AACjE,cAAKD,aAAL,CAAmBC,KAAnB,EAA0BF,YAAY,CAACG,QAAvC;AACD,OAFD;;AAIA;AACE,4BAAC,gBAAD;AACE,UAAA,MAAM,EAAEH,YAAY,CAACI,MADvB;AAEE,UAAA,IAAI,EAAE,MAAKC,KAAL,CAAWC,IAFnB;AAGE,UAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWE,QAAX,GAAsB,MAAKF,KAAL,CAAWE,QAAjC,GAA4CC,SAHxD;AAIE,UAAA,QAAQ,EAAE,CAJZ;AAKE,UAAA,GAAG,EAAE,MAAKH,KAAL,CAAWI,GALlB;AAME,UAAA,OAAO,EAAET,YAAY,CAACU,UANxB;AAOE,UAAA,SAAS,EAAET,aAPb;;AASG,cAAKI,KAAL,CAAWM,KATd,CADF;;;AAaD,KAjDH;;AAmDUV,IAAAA,aAnDV,GAmD0B,UAACW,CAAD,EAAsCT,QAAtC,EAAsF;AAC5G,UAAIb,QAAQ,CAACF,UAAD,EAAaC,UAAb,EAAyBF,kBAAzB,CAAR,CAAqDyB,CAArD,CAAJ,EAA6D;AAC3DA,QAAAA,CAAC,CAACC,cAAF;AACAV,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,KAxDH,4DASSW,MATT,GASE,kBAAgB,CACd,OACE,oBAAC,YAAD,eAAkB,KAAKT,KAAvB,IAA8B,GAAG,EAAE,KAAKR,eAAxC,EAAyD,OAAO,EAAE,KAAKE,YAAvE,KACG,KAAKM,KAAL,CAAWU,QADd,CADF,CAKD,CAfH,yBAAoC7B,KAAK,CAAC8B,SAA1C,EAAavB,c,CACGwB,mB,GAAsB,gB,CADzBxB,c,CAGGyB,Y,GAAe,EAC3BT,GAAG,EAAE,SADsB,E","sourcesContent":["import React from 'react';\r\n\r\nimport { isKeyArrowVertical, isKeyEnter, isKeySpace, someKeys } from '../../lib/events/keyboard/identifiers';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { IconProps } from '../../internal/icons/20px';\r\nimport { DropdownMenu, DropdownMenuProps } from '../DropdownMenu';\r\nimport { PopupMenuCaptionProps } from '../../internal/PopupMenu';\r\n\r\nimport { TopBarButtonItem } from './TopBarButtonItem';\r\n\r\nexport interface TopBarDropdownProps extends Omit<DropdownMenuProps, 'caption' | 'disableAnimations'> {\r\n  icon?: IconProps['name'];\r\n  minWidth?: string | number | null;\r\n  use: 'danger' | 'pay' | 'default';\r\n  label: React.ReactNode;\r\n  onOpen?: () => void;\r\n  onClose?: () => void;\r\n}\r\n\r\n/**\r\n * Дропдаун в топбаре\r\n *\r\n * @visibleName TopBar.Dropdown\r\n */\r\n\r\nexport class TopBarDropdown extends React.Component<TopBarDropdownProps> {\r\n  public static __KONTUR_REACT_UI__ = 'TopBarDropdown';\r\n\r\n  public static defaultProps = {\r\n    use: 'default',\r\n  };\r\n\r\n  private dropdownMenu: Nullable<DropdownMenu> = null;\r\n\r\n  public render() {\r\n    return (\r\n      <DropdownMenu {...this.props} ref={this.refDropdownMenu} caption={this.renderButton}>\r\n        {this.props.children}\r\n      </DropdownMenu>\r\n    );\r\n  }\r\n\r\n  public open = (): void => {\r\n    if (this.dropdownMenu) {\r\n      this.dropdownMenu.open();\r\n    }\r\n  };\r\n\r\n  public close = (): void => {\r\n    if (this.dropdownMenu) {\r\n      this.dropdownMenu.close();\r\n    }\r\n  };\r\n\r\n  private refDropdownMenu = (ref: Nullable<DropdownMenu>) => (this.dropdownMenu = ref);\r\n\r\n  private renderButton = (captionProps: PopupMenuCaptionProps) => {\r\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\r\n      this.handleKeyDown(event, captionProps.openMenu);\r\n    };\r\n\r\n    return (\r\n      <TopBarButtonItem\r\n        active={captionProps.opened}\r\n        icon={this.props.icon}\r\n        minWidth={this.props.minWidth ? this.props.minWidth : undefined}\r\n        tabIndex={0}\r\n        use={this.props.use}\r\n        onClick={captionProps.toggleMenu}\r\n        onKeyDown={handleKeyDown}\r\n      >\r\n        {this.props.label}\r\n      </TopBarButtonItem>\r\n    );\r\n  };\r\n\r\n  private handleKeyDown = (e: React.KeyboardEvent<HTMLElement>, openMenu: PopupMenuCaptionProps['openMenu']) => {\r\n    if (someKeys(isKeyEnter, isKeySpace, isKeyArrowVertical)(e)) {\r\n      e.preventDefault();\r\n      openMenu(true);\r\n    }\r\n  };\r\n}\r\n"]}