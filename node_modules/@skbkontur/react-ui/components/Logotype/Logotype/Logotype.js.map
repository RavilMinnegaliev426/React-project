{"version":3,"sources":["Logotype.tsx"],"names":["React","PropTypes","cn","warning","stopPropagation","locale","ThemeContext","CloudIcon","ArrowChevronDownIcon","jsStyles","ProductWidget","LogotypeLocaleHelper","INITIAL_WIDTH","INITIAL_HEIGHT","INITIAL_VERTICAL_ALIGN","INITIAL_FONT_SIZE","Logotype","props","theme","logoWrapper","isWidgetInited","refLogoWrapper","el","removeEventListener","handleNativeLogoClick","addEventListener","event","initWidget","init","componentDidMount","withWidget","componentDidUpdate","render","renderMain","color","textColor","Component","component","suffix","size","href","propLocale","onArrowClick","dropdownClassName","dropdown","inline","cloudStyle","width","height","verticalAlign","widgetWrapper","root","fontSize","prefix","cloud","divider","button","__KONTUR_REACT_UI__","propTypes","string","number","bool","shape","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\nimport warning from 'warning';\r\n\r\nimport { stopPropagation } from '../../lib/events/stopPropagation';\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { CloudIcon } from '../../internal/icons/CloudIcon';\r\nimport { ArrowChevronDownIcon } from '../../internal/icons/16px';\r\n\r\nimport { jsStyles } from './Logotype.styles';\r\nimport { ProductWidget } from './ProductWidget';\r\nimport { LogotypeLocale, LogotypeLocaleHelper } from './locale';\r\n\r\nconst INITIAL_WIDTH = 25;\r\nconst INITIAL_HEIGHT = 18;\r\nconst INITIAL_VERTICAL_ALIGN = -1;\r\nconst INITIAL_FONT_SIZE = 22;\r\n\r\ninterface LogotypePropLocale {\r\n  suffix: string;\r\n  prefix: string;\r\n}\r\n\r\nexport interface LogotypeProps {\r\n  /**\r\n   * Цвет логотипа в rgb, rgba, hex\r\n   */\r\n  color: string;\r\n  component: React.ComponentType<any> | string;\r\n  /**\r\n   * Адрес ссылки\r\n   */\r\n  href: string;\r\n  /**\r\n   * Суффикс сервиса\r\n   */\r\n  suffix?: string;\r\n  /**\r\n   * Размер шрифта логотипа в пикселях.\r\n   * @default 22\r\n   */\r\n  size: number;\r\n  /**\r\n   * Цвет логотипа Контура в rgb, rgba, hex\r\n   */\r\n  textColor: string;\r\n  /**\r\n   * Наличие виджета с продуктами\r\n   */\r\n  withWidget?: boolean;\r\n  /**\r\n   * нажатие по кнопке открытия виджета\r\n   */\r\n  onArrowClick?: React.MouseEventHandler<HTMLButtonElement>;\r\n  /**\r\n   * Словарь текстовых констант\r\n   * @deprecated\r\n   * @default { prefix: 'к', suffix: 'нтур' }\r\n   */\r\n  locale?: LogotypePropLocale;\r\n}\r\n\r\n/**\r\n * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n */\r\n@locale('Logotype', LogotypeLocaleHelper)\r\nexport class Logotype extends React.Component<LogotypeProps> {\r\n  public static __KONTUR_REACT_UI__ = 'Logotype';\r\n\r\n  public static propTypes = {\r\n    color: PropTypes.string,\r\n    href: PropTypes.string,\r\n    suffix: PropTypes.string,\r\n    size: PropTypes.number,\r\n    textColor: PropTypes.string,\r\n    withWidget: PropTypes.bool,\r\n    locale: PropTypes.shape({\r\n      prefix: PropTypes.string,\r\n      suffix: PropTypes.string,\r\n    }),\r\n  };\r\n\r\n  public static defaultProps = {\r\n    color: '#D92932',\r\n    size: INITIAL_FONT_SIZE,\r\n    textColor: '#333333',\r\n    component: 'a',\r\n    href: '/',\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private readonly locale!: LogotypeLocale;\r\n  private logoWrapper: Nullable<HTMLElement> = null;\r\n  private isWidgetInited = false;\r\n\r\n  public constructor(props: LogotypeProps) {\r\n    super(props);\r\n    warning(\r\n      false,\r\n      `Logotype has been deprecated, use Logotype from @skbkontur/react-ui-addons instead, see [migration](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)`,\r\n    );\r\n  }\r\n\r\n  public componentDidMount() {\r\n    if (this.props.withWidget) {\r\n      this.initWidget();\r\n    }\r\n\r\n    warning(!this.props.locale, 'locale props is deprecated, use LocaleProvider instead');\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    if (this.props.withWidget) {\r\n      this.initWidget();\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const {\r\n      color,\r\n      textColor,\r\n      component: Component,\r\n      suffix,\r\n      size,\r\n      href,\r\n      withWidget,\r\n      locale: propLocale = this.locale,\r\n      onArrowClick,\r\n    } = this.props;\r\n    const dropdownClassName = cn({\r\n      [jsStyles.dropdown()]: true,\r\n      [jsStyles.inline()]: !withWidget,\r\n    });\r\n\r\n    const cloudStyle = {\r\n      color,\r\n      width: size * (INITIAL_WIDTH / INITIAL_FONT_SIZE),\r\n      height: size * (INITIAL_HEIGHT / INITIAL_FONT_SIZE),\r\n      verticalAlign: size * (INITIAL_VERTICAL_ALIGN / INITIAL_FONT_SIZE),\r\n    };\r\n\r\n    return (\r\n      <div id=\"spwDropdown\" className={dropdownClassName}>\r\n        <span ref={this.refLogoWrapper} className={jsStyles.widgetWrapper()}>\r\n          <Component href={href} tabIndex=\"-1\" className={jsStyles.root(this.theme)} style={{ fontSize: `${size}px` }}>\r\n            <span style={{ color: textColor }}>{propLocale.prefix}</span>\r\n            <span className={jsStyles.cloud()} style={cloudStyle}>\r\n              <CloudIcon />\r\n            </span>\r\n            <span style={{ color: textColor }}>\r\n              {propLocale.suffix}\r\n              {suffix && '.'}\r\n            </span>\r\n            {suffix && <span style={{ color }}>{suffix}</span>}\r\n          </Component>\r\n          {withWidget && <span className={jsStyles.divider(this.theme)} />}\r\n        </span>\r\n        {withWidget && (\r\n          <button className={jsStyles.button()} onClick={onArrowClick}>\r\n            <ArrowChevronDownIcon color=\"#aaa\" size={20} />\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private refLogoWrapper = (el: Nullable<HTMLElement>) => {\r\n    if (this.logoWrapper) {\r\n      this.logoWrapper.removeEventListener('click', this.handleNativeLogoClick);\r\n    }\r\n\r\n    if (el) {\r\n      el.addEventListener('click', this.handleNativeLogoClick);\r\n    }\r\n\r\n    this.logoWrapper = el;\r\n  };\r\n\r\n  private handleNativeLogoClick = (event: Event) => {\r\n    stopPropagation(event);\r\n  };\r\n\r\n  private initWidget = () => {\r\n    if (!this.isWidgetInited) {\r\n      ProductWidget.init();\r\n      this.isWidgetInited = true;\r\n    }\r\n  };\r\n}\r\n"]}