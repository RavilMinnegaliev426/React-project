{"version":3,"sources":["Toggle.tsx"],"names":["React","PropTypes","cn","tabListener","ThemeContext","jsStyles","Toggle","props","theme","input","focus","isTabPressed","inputRef","element","handleChange","event","onValueChange","target","checked","isUncontrolled","setState","onChange","handleFocus","onFocus","focusByTab","handleBlur","onBlur","state","defaultChecked","componentDidMount","autoFocus","render","renderMain","warning","error","loading","color","disabled","containerClassNames","container","focused","isLoading","isWarning","isError","wrapper","wrapperDisabled","backgroundColor","borderColor","boxShadow","undefined","activeBackground","handle","Component","__KONTUR_REACT_UI__","propTypes","bool","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { tabListener } from '../../lib/events/tabListener';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './Toggle.styles';\r\n\r\nexport interface ToggleProps {\r\n  checked?: boolean;\r\n  defaultChecked?: boolean;\r\n  disabled?: boolean;\r\n  onValueChange?: (value: boolean) => void;\r\n  onChange?: React.ChangeEventHandler<HTMLInputElement>;\r\n  warning?: boolean;\r\n  error?: boolean;\r\n  loading?: boolean;\r\n  autoFocus?: boolean;\r\n  onFocus?: React.FocusEventHandler<HTMLInputElement>;\r\n  onBlur?: React.FocusEventHandler<HTMLInputElement>;\r\n  color?: React.CSSProperties['color'];\r\n}\r\n\r\nexport interface ToggleState {\r\n  checked?: boolean;\r\n  focusByTab?: boolean;\r\n}\r\n\r\nexport class Toggle extends React.Component<ToggleProps, ToggleState> {\r\n  public static __KONTUR_REACT_UI__ = 'Toggle';\r\n\r\n  public static propTypes = {\r\n    checked: PropTypes.bool,\r\n    defaultChecked: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    loading: PropTypes.bool,\r\n    warning: PropTypes.bool,\r\n    onValueChange: PropTypes.func,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    disabled: false,\r\n    loading: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private input: HTMLInputElement | null = null;\r\n\r\n  constructor(props: ToggleProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      focusByTab: false,\r\n      checked: props.defaultChecked,\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    if (this.props.autoFocus) {\r\n      tabListener.isTabPressed = true;\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus = () => {\r\n    if (this.input) {\r\n      tabListener.isTabPressed = true;\r\n      this.input.focus();\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const { warning, error, loading, color } = this.props;\r\n    const disabled = this.props.disabled || loading;\r\n    const checked = this.isUncontrolled() ? this.state.checked : this.props.checked;\r\n\r\n    const containerClassNames = cn(jsStyles.container(this.theme), {\r\n      [jsStyles.focused(this.theme)]: !disabled && !!this.state.focusByTab,\r\n      [jsStyles.isLoading(this.theme)]: !!loading,\r\n      [jsStyles.isWarning(this.theme)]: !color && !!warning,\r\n      [jsStyles.isError(this.theme)]: !color && !!error,\r\n    });\r\n\r\n    return (\r\n      <label\r\n        className={cn(jsStyles.wrapper(this.theme), {\r\n          [jsStyles.wrapperDisabled(this.theme)]: !!disabled,\r\n        })}\r\n      >\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={checked}\r\n          onChange={this.handleChange}\r\n          className={jsStyles.input(this.theme)}\r\n          onFocus={this.handleFocus}\r\n          onBlur={this.handleBlur}\r\n          ref={this.inputRef}\r\n          disabled={disabled}\r\n        />\r\n        <div\r\n          className={containerClassNames}\r\n          style={\r\n            checked && color\r\n              ? {\r\n                  backgroundColor: color,\r\n                  borderColor: color,\r\n                  boxShadow: `inset 0 0 0 1px ${color}`,\r\n                }\r\n              : undefined\r\n          }\r\n        >\r\n          <div\r\n            className={jsStyles.activeBackground()}\r\n            style={checked && color ? { backgroundColor: color } : undefined}\r\n          />\r\n        </div>\r\n        <div className={jsStyles.handle(this.theme)} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private inputRef = (element: HTMLInputElement) => {\r\n    this.input = element;\r\n  };\r\n\r\n  private handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (this.props.onValueChange) {\r\n      this.props.onValueChange(event.target.checked);\r\n    }\r\n\r\n    if (this.isUncontrolled()) {\r\n      this.setState({\r\n        checked: event.target.checked,\r\n      });\r\n    }\r\n\r\n    if (this.props.onChange) {\r\n      this.props.onChange(event);\r\n    }\r\n  };\r\n\r\n  private handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event);\r\n    }\r\n\r\n    if (tabListener.isTabPressed) {\r\n      this.setState({ focusByTab: true });\r\n    }\r\n  };\r\n\r\n  private handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event);\r\n    }\r\n    this.setState({\r\n      focusByTab: false,\r\n    });\r\n  };\r\n\r\n  private isUncontrolled() {\r\n    return this.props.checked === undefined;\r\n  }\r\n}\r\n"]}