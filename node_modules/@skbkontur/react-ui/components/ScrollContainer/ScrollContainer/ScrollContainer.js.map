{"version":3,"sources":["ScrollContainer.tsx"],"names":["React","PropTypes","cn","LayoutEvents","getScrollWidth","isChrome","isOpera","isSafari","jsStyles","PADDING_RIGHT","MIN_SCROLL_SIZE","SCROLL_HIDDEN","ScrollContainer","state","scrollActive","scrollSize","scrollPos","hover","scrolling","scrollState","inner","scroll","refInner","element","props","preventWindowScroll","addEventListener","handleInnerScrollWheel","passive","removeEventListener","refScroll","handleScrollWheel","handleNativeScroll","event","reflow","preventDefault","emit","containerHeight","offsetHeight","contentHeight","scrollHeight","scrollTop","updatedScrollState","getImmediateScrollState","scrollParamsToUpdate","onScrollStateChange","setState","handleScrollMouseDown","target","window","document","initialY","clientY","initialScrollTop","mouseMove","mouseMoveEvent","ratio","deltaY","Object","prototype","hasOwnProperty","call","returnValue","mouseUp","WheelEvent","handleMouseMove","right","currentTarget","getBoundingClientRect","pageX","setHover","handleMouseLeave","componentDidMount","componentDidUpdate","prevProps","render","scrollClass","scrollInvert","Boolean","invert","scrollHover","scrollStyle","top","height","innerStyle","marginRight","getMarginRight","maxHeight","paddingRight","scrollBehavior","scrollBehaviour","root","children","scrollTo","maxScroll","offsetTop","minScroll","scrollToTop","scrollToBottom","Component","__KONTUR_REACT_UI__","propTypes","bool","oneOfType","string","number","oneOf","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { getScrollWidth } from '../../lib/dom/getScrollWidth';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { isChrome, isOpera, isSafari } from '../../lib/utils';\r\n\r\nimport { jsStyles } from './ScrollContainer.styles';\r\n\r\nconst PADDING_RIGHT = 30;\r\nconst MIN_SCROLL_SIZE = 20;\r\nconst SCROLL_HIDDEN = isChrome || isOpera || isSafari;\r\n\r\nexport type ScrollContainerScrollState = 'top' | 'scroll' | 'bottom';\r\n\r\nexport type ScrollBehaviour = 'auto' | 'smooth';\r\n\r\nexport interface ScrollContainerProps {\r\n  invert?: boolean;\r\n  maxHeight?: React.CSSProperties['maxHeight'];\r\n  preventWindowScroll?: boolean;\r\n  /**\r\n   * Поведение скролла (https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior)\r\n   * @default 'auto'\r\n   */\r\n  scrollBehaviour?: ScrollBehaviour;\r\n  onScrollStateChange?: (scrollState: ScrollContainerScrollState) => void;\r\n}\r\n\r\nexport interface ScrollContainerState {\r\n  scrollActive: boolean;\r\n  hover: boolean;\r\n  scrolling: boolean;\r\n  scrollSize: number;\r\n  scrollPos: number;\r\n  scrollState: string;\r\n}\r\n\r\nexport class ScrollContainer extends React.Component<ScrollContainerProps, ScrollContainerState> {\r\n  public static __KONTUR_REACT_UI__ = 'ScrollContainer';\r\n\r\n  public static propTypes = {\r\n    invert: PropTypes.bool,\r\n    maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    scrollBehaviour: PropTypes.oneOf(['auto', 'smooth']),\r\n    preventWindowScroll: PropTypes.bool,\r\n    onScrollStateChange: PropTypes.func,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    scrollBehaviour: 'auto',\r\n  };\r\n\r\n  public state: ScrollContainerState = {\r\n    scrollActive: false,\r\n    scrollSize: 0,\r\n    scrollPos: 0,\r\n\r\n    // Mouse is moving where big scrollbar can be located.\r\n    hover: false,\r\n    // True when scroll is following mouse (mouse down on scroll).\r\n    scrolling: false,\r\n    scrollState: 'top',\r\n  };\r\n\r\n  private inner: Nullable<HTMLElement>;\r\n  private scroll: Nullable<HTMLElement>;\r\n\r\n  public componentDidMount() {\r\n    this.reflow();\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: ScrollContainerProps) {\r\n    if (this.inner) {\r\n      if (prevProps.preventWindowScroll && !this.props.preventWindowScroll) {\r\n        this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\r\n      }\r\n      if (!prevProps.preventWindowScroll && this.props.preventWindowScroll) {\r\n        this.inner.addEventListener('wheel', this.handleInnerScrollWheel, { passive: false });\r\n      }\r\n    }\r\n    this.reflow();\r\n  }\r\n\r\n  public render() {\r\n    const state = this.state;\r\n    const props = this.props;\r\n    let scroll = null;\r\n\r\n    if (state.scrollActive) {\r\n      const scrollClass = cn({\r\n        [jsStyles.scroll()]: true,\r\n        [jsStyles.scrollInvert()]: Boolean(props.invert),\r\n        [jsStyles.scrollHover()]: state.hover || state.scrolling,\r\n      });\r\n      const scrollStyle = {\r\n        top: state.scrollPos,\r\n        height: state.scrollSize,\r\n      };\r\n      scroll = (\r\n        <div\r\n          ref={this.refScroll}\r\n          className={scrollClass}\r\n          style={scrollStyle}\r\n          onMouseDown={this.handleScrollMouseDown}\r\n        />\r\n      );\r\n    }\r\n\r\n    const innerStyle: React.CSSProperties = {\r\n      marginRight: this.getMarginRight(),\r\n      maxHeight: props.maxHeight,\r\n      paddingRight: PADDING_RIGHT,\r\n      scrollBehavior: props.scrollBehaviour,\r\n    };\r\n\r\n    return (\r\n      <div className={jsStyles.root()} onMouseMove={this.handleMouseMove} onMouseLeave={this.handleMouseLeave}>\r\n        {scroll}\r\n        <div\r\n          data-tid=\"ScrollContainer__inner\"\r\n          className={jsStyles.inner()}\r\n          style={innerStyle}\r\n          ref={this.refInner}\r\n          onScroll={this.handleNativeScroll}\r\n        >\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public scrollTo(element: HTMLElement) {\r\n    if (!element || !this.inner) {\r\n      return;\r\n    }\r\n    const maxScroll = element.offsetTop;\r\n    if (this.inner.scrollTop > maxScroll) {\r\n      this.inner.scrollTop = maxScroll;\r\n      return;\r\n    }\r\n\r\n    const minScroll = element.offsetTop + element.scrollHeight - this.inner.offsetHeight;\r\n    if (this.inner.scrollTop < minScroll) {\r\n      this.inner.scrollTop = minScroll;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public scrollToTop() {\r\n    if (!this.inner) {\r\n      return;\r\n    }\r\n    this.inner.scrollTop = 0;\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public scrollToBottom() {\r\n    if (!this.inner) {\r\n      return;\r\n    }\r\n    this.inner.scrollTop = this.inner.scrollHeight - this.inner.offsetHeight;\r\n  }\r\n\r\n  private refInner = (element: HTMLElement | null) => {\r\n    if (!this.inner && element && this.props.preventWindowScroll) {\r\n      element.addEventListener('wheel', this.handleInnerScrollWheel, { passive: false });\r\n    }\r\n    if (this.inner && !element) {\r\n      this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\r\n    }\r\n    this.inner = element;\r\n  };\r\n\r\n  private refScroll = (element: HTMLElement | null) => {\r\n    if (!this.scroll && element) {\r\n      element.addEventListener('wheel', this.handleScrollWheel, { passive: false });\r\n    }\r\n    if (this.scroll && !element) {\r\n      this.scroll.removeEventListener('wheel', this.handleScrollWheel);\r\n    }\r\n    this.scroll = element;\r\n  };\r\n\r\n  private handleNativeScroll = (event: React.UIEvent<HTMLDivElement>) => {\r\n    this.reflow();\r\n    if (this.props.preventWindowScroll) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n    LayoutEvents.emit();\r\n  };\r\n\r\n  private reflow = () => {\r\n    if (!this.inner) {\r\n      return;\r\n    }\r\n\r\n    const containerHeight = this.inner.offsetHeight;\r\n    const contentHeight = this.inner.scrollHeight;\r\n    const scrollTop = this.inner.scrollTop;\r\n\r\n    const scrollActive = containerHeight < contentHeight;\r\n\r\n    if (!scrollActive && !this.state.scrollActive) {\r\n      return;\r\n    }\r\n\r\n    if (scrollActive) {\r\n      let scrollSize = (containerHeight / contentHeight) * containerHeight;\r\n\r\n      if (scrollSize < MIN_SCROLL_SIZE) {\r\n        scrollSize = MIN_SCROLL_SIZE;\r\n      }\r\n\r\n      const scrollPos = (scrollTop / (contentHeight - containerHeight)) * (containerHeight - scrollSize);\r\n\r\n      if (this.state.scrollSize !== scrollSize || this.state.scrollPos !== scrollPos) {\r\n        const { scrollState } = this.state;\r\n        const updatedScrollState = this.getImmediateScrollState();\r\n        const scrollParamsToUpdate = {\r\n          scrollActive: true,\r\n          scrollSize,\r\n          scrollPos,\r\n          scrollState,\r\n        };\r\n\r\n        if (updatedScrollState !== this.state.scrollState) {\r\n          scrollParamsToUpdate.scrollState = updatedScrollState;\r\n\r\n          if (this.props.onScrollStateChange) {\r\n            this.props.onScrollStateChange(updatedScrollState);\r\n          }\r\n        }\r\n\r\n        this.setState(scrollParamsToUpdate);\r\n      }\r\n    } else {\r\n      this.setState({\r\n        scrollActive: false,\r\n        scrollSize: 0,\r\n        scrollPos: 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  private handleScrollMouseDown = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!this.inner) {\r\n      return;\r\n    }\r\n\r\n    const target: Document = window.document;\r\n    const initialY = event.clientY;\r\n    const initialScrollTop = this.inner.scrollTop;\r\n\r\n    const mouseMove = (mouseMoveEvent: MouseEvent) => {\r\n      if (!this.inner) {\r\n        return;\r\n      }\r\n\r\n      const ratio =\r\n        (this.inner.scrollHeight - this.inner.offsetHeight) / (this.inner.offsetHeight - this.state.scrollSize);\r\n      const deltaY = (mouseMoveEvent.clientY - initialY) * ratio;\r\n\r\n      this.inner.scrollTop = initialScrollTop + deltaY;\r\n\r\n      if (mouseMoveEvent.preventDefault) {\r\n        mouseMoveEvent.preventDefault();\r\n      }\r\n\r\n      if (Object.prototype.hasOwnProperty.call(mouseMoveEvent, 'returnValue')) {\r\n        (mouseMoveEvent as MouseEvent & {\r\n          returnValue: boolean;\r\n        }).returnValue = false;\r\n      }\r\n    };\r\n\r\n    const mouseUp = () => {\r\n      target.removeEventListener('mousemove', mouseMove);\r\n      target.removeEventListener('mouseup', mouseUp);\r\n      this.setState({ scrolling: false });\r\n    };\r\n\r\n    target.addEventListener('mousemove', mouseMove);\r\n    target.addEventListener('mouseup', mouseUp);\r\n    this.setState({ scrolling: true });\r\n\r\n    event.preventDefault();\r\n  };\r\n\r\n  private handleScrollWheel = (event: Event) => {\r\n    if (!this.inner || !(event instanceof WheelEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (event.deltaY > 0 && this.inner.scrollHeight <= this.inner.scrollTop + this.inner.offsetHeight) {\r\n      return;\r\n    }\r\n    if (event.deltaY < 0 && this.inner.scrollTop <= 0) {\r\n      return;\r\n    }\r\n\r\n    this.inner.scrollTop += event.deltaY;\r\n    event.preventDefault();\r\n  };\r\n\r\n  private handleInnerScrollWheel = (event: Event) => {\r\n    if (!this.inner || !(event instanceof WheelEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (event.deltaY > 0 && this.inner.scrollHeight <= this.inner.scrollTop + this.inner.offsetHeight) {\r\n      event.preventDefault();\r\n      return false;\r\n    }\r\n    if (event.deltaY < 0 && this.inner.scrollTop <= 0) {\r\n      event.preventDefault();\r\n      return false;\r\n    }\r\n  };\r\n\r\n  private handleMouseMove = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    const right = event.currentTarget.getBoundingClientRect().right - event.pageX;\r\n    this.setHover(right <= 12);\r\n  };\r\n\r\n  private handleMouseLeave = () => {\r\n    this.setHover(false);\r\n  };\r\n\r\n  private setHover(hover: boolean) {\r\n    if (this.state.hover !== hover) {\r\n      this.setState({ hover });\r\n    }\r\n  }\r\n\r\n  private getImmediateScrollState(): ScrollContainerScrollState {\r\n    if (!this.inner || this.inner.scrollTop === 0) {\r\n      return 'top';\r\n    } else if (this.inner.scrollTop === this.inner.scrollHeight - this.inner.offsetHeight) {\r\n      return 'bottom';\r\n    } else {\r\n      return 'scroll';\r\n    }\r\n  }\r\n\r\n  private getMarginRight(): number {\r\n    return -1 * (PADDING_RIGHT + (SCROLL_HIDDEN ? 0 : getScrollWidth()));\r\n  }\r\n}\r\n"]}