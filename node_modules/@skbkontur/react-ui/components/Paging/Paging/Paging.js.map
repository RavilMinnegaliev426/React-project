{"version":3,"sources":["Paging.tsx"],"names":["React","func","number","cn","isKeyArrowLeft","isKeyArrowRight","isKeyEnter","locale","tabListener","emptyHandler","isIE11","ThemeContext","ArrowChevronRightIcon","jsStyles","NavigationHelper","getItems","PagingLocaleHelper","IGNORE_EVENT_TAGS","Paging","state","focusedByTab","focusedItem","keyboardControl","props","useGlobalListener","theme","addedGlobalListener","container","renderItem","item","index","focused","getFocusedItem","key","renderDots","disabled","isItemDisabled","renderForwardLink","active","activePage","renderPageLink","dots","classes","forwardLink","forwardLinkFocused","Component","component","caption","forward","goForward","forwardIcon","pageNumber","pageLink","pageLinkFocused","handleClick","goToPage","pageLinkWrapper","handleMouseDownPageLink","renderNavigationHint","withoutNavigationHint","canGoBackward","canGoForward","pageLinkHint","transparent","getKeyName","pageLinkHintPlaceHolder","handleMouseDown","setState","setTimeout","focus","handleKeyDown","e","shiftKey","target","isArrowLeft","isArrowRight","Element","includes","tagName","toLowerCase","isContentEditable","checkKeyPressed","goBackward","moveFocusLeft","moveFocusRight","executeItemAction","handleFocus","process","nextTick","isTabPressed","handleBlur","pagesCount","concat","isItemFocusable","moveFocus","step","items","findIndex","x","length","onPageChange","addGlobalListener","document","addEventListener","removeGlobalListener","removeEventListener","refContainer","element","isForward","componentDidMount","UNSAFE_componentWillReceiveProps","nextProps","componentDidUpdate","prevProps","componentWillUnmount","render","renderMain","paging","undefined","map","__KONTUR_REACT_UI__","defaultProps","className","onClick","children","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { func, number } from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyArrowLeft, isKeyArrowRight, isKeyEnter } from '../../lib/events/keyboard/identifiers';\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { tabListener } from '../../lib/events/tabListener';\r\nimport { emptyHandler, isIE11 } from '../../lib/utils';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ArrowChevronRightIcon } from '../../internal/icons/16px';\r\n\r\nimport { jsStyles } from './Paging.styles';\r\nimport * as NavigationHelper from './NavigationHelper';\r\nimport { getItems } from './PagingHelper';\r\nimport { PagingLocale, PagingLocaleHelper } from './locale';\r\n\r\nconst IGNORE_EVENT_TAGS = ['input', 'textarea'];\r\n\r\ninterface ItemComponentProps {\r\n  active: boolean;\r\n  children?: React.ReactNode;\r\n  className: string;\r\n  onClick: () => void;\r\n  pageNumber: number | 'forward';\r\n  tabIndex: number;\r\n}\r\n\r\nexport interface PagingProps {\r\n  activePage: number;\r\n  /**\r\n   * Компонент обертки по умолчанию\r\n   * @default <span />\r\n   */\r\n  component: React.ComponentType<ItemComponentProps>;\r\n  onPageChange: (pageNumber: number) => void;\r\n  pagesCount: number;\r\n  disabled?: boolean;\r\n  /**\r\n   * Отключает навигационные подсказки.\r\n   * По-умолчанию подсказки появляются, когда доступно управление с клавиатуры\r\n   * (либо элемент в фокусе, либо globalListeners === true)\r\n   */\r\n  withoutNavigationHint?: boolean;\r\n  caption?: string;\r\n  /**\r\n   * Глобальный слушатель **keyDown**, для навигации клавишами без фокуса на компоненте.\r\n   * Если на странице используется несколько элементов\r\n   * **Paging** с useGlobalListener === true, то обработчик keyDown будет вызываться\r\n   * на каждом из них. Такие случаи лучше обрабатывать отдельно.\r\n   */\r\n  useGlobalListener: boolean;\r\n}\r\n\r\nexport interface PagingState {\r\n  focusedByTab: boolean;\r\n  focusedItem: Nullable<ItemType>;\r\n  keyboardControl: boolean;\r\n}\r\n\r\nexport type ItemType = number | '.' | 'forward';\r\n\r\n@locale('Paging', PagingLocaleHelper)\r\nexport class Paging extends React.Component<PagingProps, PagingState> {\r\n  public static __KONTUR_REACT_UI__ = 'Paging';\r\n\r\n  public static defaultProps = {\r\n    component: ({ className, onClick, children }: any) => (\r\n      <span className={className} onClick={onClick}>\r\n        {children}\r\n      </span>\r\n    ),\r\n    useGlobalListener: false,\r\n  };\r\n\r\n  public static propTypes = {};\r\n\r\n  public static isForward(pageNumber: number | 'forward'): boolean /* %checks */ {\r\n    return pageNumber === 'forward';\r\n  }\r\n\r\n  public state: PagingState = {\r\n    focusedByTab: false,\r\n    focusedItem: null,\r\n    keyboardControl: this.props.useGlobalListener,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private readonly locale!: PagingLocale;\r\n  private addedGlobalListener = false;\r\n  private container: HTMLSpanElement | null = null;\r\n\r\n  public componentDidMount() {\r\n    const { useGlobalListener } = this.props;\r\n    if (useGlobalListener) {\r\n      this.addGlobalListener();\r\n    }\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: PagingProps) {\r\n    if (this.props.useGlobalListener !== nextProps.useGlobalListener) {\r\n      this.setState({\r\n        keyboardControl: nextProps.useGlobalListener,\r\n      });\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: PagingProps) {\r\n    if (!prevProps.useGlobalListener && this.props.useGlobalListener) {\r\n      this.addGlobalListener();\r\n    }\r\n\r\n    if (prevProps.useGlobalListener && !this.props.useGlobalListener) {\r\n      this.removeGlobalListener();\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.removeGlobalListener();\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    return (\r\n      <span\r\n        tabIndex={0}\r\n        data-tid=\"Paging__root\"\r\n        className={jsStyles.paging()}\r\n        onKeyDown={this.props.useGlobalListener ? undefined : this.handleKeyDown}\r\n        onFocus={this.handleFocus}\r\n        onBlur={this.handleBlur}\r\n        onMouseDown={this.handleMouseDown}\r\n        ref={this.refContainer}\r\n      >\r\n        {this.getItems().map(this.renderItem)}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private renderItem = (item: ItemType, index: number) => {\r\n    const focused = this.getFocusedItem() === item;\r\n    switch (item) {\r\n      case '.': {\r\n        const key = `dots${index < 5 ? 'Left' : 'Right'}`;\r\n        return this.renderDots(key);\r\n      }\r\n      case 'forward': {\r\n        const disabled = this.isItemDisabled(item);\r\n        return this.renderForwardLink(disabled, focused);\r\n      }\r\n      default: {\r\n        const active = this.props.activePage === item;\r\n        return this.renderPageLink(item, active, focused);\r\n      }\r\n    }\r\n  };\r\n\r\n  private renderDots = (key: string) => {\r\n    return (\r\n      <span data-tid=\"Paging__dots\" key={key} className={jsStyles.dots(this.theme)}>\r\n        {'...'}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  private renderForwardLink = (disabled: boolean, focused: boolean): JSX.Element => {\r\n    const classes = cn({\r\n      [jsStyles.forwardLink(this.theme)]: true,\r\n      [jsStyles.forwardLinkFocused()]: focused,\r\n      [jsStyles.disabled(this.theme)]: disabled,\r\n    });\r\n    const { component: Component, caption } = this.props;\r\n    const { forward } = this.locale;\r\n\r\n    return (\r\n      <Component\r\n        key={'forward'}\r\n        data-tid=\"Paging__forwardLink\"\r\n        active={false}\r\n        className={classes}\r\n        onClick={disabled ? emptyHandler : this.goForward}\r\n        tabIndex={-1}\r\n        pageNumber={'forward' as 'forward'}\r\n      >\r\n        {caption || forward}\r\n        <span className={jsStyles.forwardIcon()}>\r\n          <ArrowChevronRightIcon size=\"18px\" />\r\n        </span>\r\n      </Component>\r\n    );\r\n  };\r\n\r\n  private renderPageLink = (pageNumber: number, active: boolean, focused: boolean): JSX.Element => {\r\n    const classes = cn({\r\n      [jsStyles.pageLink(this.theme)]: true,\r\n      [jsStyles.pageLinkFocused(this.theme)]: focused,\r\n      [jsStyles.active()]: active,\r\n    });\r\n    const Component = this.props.component;\r\n    const handleClick = () => this.goToPage(pageNumber);\r\n\r\n    return (\r\n      <span\r\n        data-tid=\"Paging__pageLinkWrapper\"\r\n        key={pageNumber}\r\n        className={jsStyles.pageLinkWrapper()}\r\n        onMouseDown={this.handleMouseDownPageLink}\r\n      >\r\n        <Component\r\n          data-tid=\"Paging__pageLink\"\r\n          active={active}\r\n          className={classes}\r\n          onClick={handleClick}\r\n          tabIndex={-1}\r\n          pageNumber={pageNumber}\r\n        >\r\n          {pageNumber}\r\n        </Component>\r\n        {active && this.renderNavigationHint()}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  private renderNavigationHint = () => {\r\n    if (this.props.withoutNavigationHint) {\r\n      return null;\r\n    }\r\n\r\n    const { keyboardControl } = this.state;\r\n    const canGoBackward = this.canGoBackward();\r\n    const canGoForward = this.canGoForward();\r\n\r\n    if (keyboardControl && (canGoBackward || canGoForward)) {\r\n      return (\r\n        <span className={jsStyles.pageLinkHint(this.theme)}>\r\n          <span className={canGoBackward ? '' : jsStyles.transparent()}>{'←'}</span>\r\n          <span>{NavigationHelper.getKeyName()}</span>\r\n          <span className={canGoForward ? '' : jsStyles.transparent()}>{'→'}</span>\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return <div className={jsStyles.pageLinkHintPlaceHolder()} />;\r\n  };\r\n\r\n  private handleMouseDown = () => {\r\n    this.setState({ focusedByTab: false, focusedItem: null });\r\n  };\r\n\r\n  private handleMouseDownPageLink = () => {\r\n    if (isIE11) {\r\n      // Клик по span внутри контейнера с tabindex=\"0\" переносит фокус именно на этот span.\r\n      // Поэтому горячие клавиши работают пока span существует на странице.\r\n      setTimeout(() => this.container && this.container.focus(), 0);\r\n    }\r\n  };\r\n\r\n  private handleKeyDown = (e: KeyboardEvent | React.KeyboardEvent<HTMLElement>) => {\r\n    if (e.shiftKey) {\r\n      return;\r\n    }\r\n\r\n    const target = e.target;\r\n\r\n    const isArrowLeft = isKeyArrowLeft(e);\r\n    const isArrowRight = isKeyArrowRight(e);\r\n\r\n    if (\r\n      target instanceof Element &&\r\n      (IGNORE_EVENT_TAGS.includes(target.tagName.toLowerCase()) || (target as HTMLElement).isContentEditable)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (NavigationHelper.checkKeyPressed(e) && isArrowLeft) {\r\n      this.setState({ focusedItem: null }, this.goBackward);\r\n      return;\r\n    }\r\n    if (NavigationHelper.checkKeyPressed(e) && isArrowRight) {\r\n      this.setState({ focusedItem: null }, this.goForward);\r\n      return;\r\n    }\r\n\r\n    if (this.container && this.container === e.target) {\r\n      if (isArrowLeft) {\r\n        this.setState({ focusedByTab: true }, this.moveFocusLeft);\r\n        return;\r\n      }\r\n      if (isArrowRight) {\r\n        this.setState({ focusedByTab: true }, this.moveFocusRight);\r\n        return;\r\n      }\r\n      if (isKeyEnter(e)) {\r\n        this.executeItemAction(this.getFocusedItem());\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleFocus = (e: React.FocusEvent<HTMLElement>) => {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ keyboardControl: true });\r\n\r\n    // focus event fires before keyDown eventlistener\r\n    // so we should check tabPressed in async way\r\n    process.nextTick(() => {\r\n      if (tabListener.isTabPressed) {\r\n        this.setState({ focusedByTab: true });\r\n      }\r\n    });\r\n  };\r\n\r\n  private handleBlur = () => {\r\n    this.setState({\r\n      focusedByTab: false,\r\n      keyboardControl: this.props.useGlobalListener || false,\r\n    });\r\n  };\r\n\r\n  private getItems = (): ItemType[] => {\r\n    return getItems(this.props.activePage, this.props.pagesCount).concat('forward');\r\n  };\r\n\r\n  private getFocusedItem = (): Nullable<ItemType> => {\r\n    if (!this.state.focusedByTab) {\r\n      return null;\r\n    }\r\n\r\n    const { focusedItem } = this.state;\r\n    if (focusedItem && this.getItems().includes(focusedItem) && this.isItemFocusable(focusedItem)) {\r\n      return focusedItem;\r\n    }\r\n\r\n    return this.props.activePage;\r\n  };\r\n\r\n  private isItemFocusable = (item: ItemType) => {\r\n    return !this.isItemDisabled(item);\r\n  };\r\n\r\n  private isItemDisabled = (item: ItemType) => {\r\n    switch (item) {\r\n      case '.':\r\n        return true;\r\n      case 'forward':\r\n        return !this.canGoForward();\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  private executeItemAction = (item: Nullable<ItemType>) => {\r\n    if (item === 'forward') {\r\n      this.goForward();\r\n    }\r\n    if (typeof item === 'number') {\r\n      this.goToPage(item);\r\n    }\r\n  };\r\n\r\n  private moveFocusLeft = () => {\r\n    this.moveFocus(-1);\r\n  };\r\n\r\n  private moveFocusRight = () => {\r\n    this.moveFocus(1);\r\n  };\r\n\r\n  private moveFocus = (step: number) => {\r\n    const focusedItem = this.getFocusedItem();\r\n    const items = this.getItems();\r\n    let index = items.findIndex(x => x === focusedItem);\r\n    do {\r\n      index = (index + step + items.length) % items.length;\r\n    } while (!this.isItemFocusable(items[index]));\r\n    this.setState({ focusedItem: items[index] });\r\n  };\r\n\r\n  private canGoBackward = (): boolean => {\r\n    return this.props.activePage > 1;\r\n  };\r\n\r\n  private canGoForward = (): boolean => {\r\n    return this.props.activePage < this.props.pagesCount;\r\n  };\r\n\r\n  private goBackward = () => {\r\n    this.goToPage(this.props.activePage - 1);\r\n  };\r\n\r\n  private goForward = () => {\r\n    this.goToPage(this.props.activePage + 1);\r\n  };\r\n\r\n  private goToPage = (pageNumber: number) => {\r\n    if (1 <= pageNumber && pageNumber !== this.props.activePage && pageNumber <= this.props.pagesCount) {\r\n      this.props.onPageChange(pageNumber);\r\n    }\r\n  };\r\n\r\n  private addGlobalListener = () => {\r\n    if (this.addedGlobalListener) {\r\n      return;\r\n    }\r\n\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n    this.addedGlobalListener = true;\r\n  };\r\n\r\n  private removeGlobalListener = () => {\r\n    if (this.addedGlobalListener) {\r\n      document.removeEventListener('keydown', this.handleKeyDown);\r\n\r\n      this.addedGlobalListener = false;\r\n    }\r\n  };\r\n\r\n  private refContainer = (element: HTMLSpanElement | null) => {\r\n    this.container = element;\r\n  };\r\n}\r\n\r\nPaging.propTypes = {\r\n  /**\r\n   * Current active page\r\n   */\r\n  activePage: number.isRequired,\r\n\r\n  /**\r\n   * React component that would be used for rendering items\r\n   *\r\n   * Usefull for router integration\r\n   */\r\n  component: func,\r\n\r\n  /**\r\n   * Total page count\r\n   */\r\n  pagesCount: number.isRequired,\r\n\r\n  /**\r\n   * Calls when page has been changed\r\n   */\r\n  onPageChange: func.isRequired,\r\n};\r\n"]}