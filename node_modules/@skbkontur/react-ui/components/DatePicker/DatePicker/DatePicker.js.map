{"version":3,"sources":["DatePicker.tsx"],"names":["PropTypes","React","findDOMNode","InternalDate","InternalDateTransformer","MAX_FULLDATE","MIN_FULLDATE","InternalDateOrder","InternalDateSeparator","InternalDateValidateCheck","DateInput","DropdownContainer","filterProps","Picker","jsStyles","INPUT_PASS_PROPS","autoFocus","disabled","warning","error","size","onKeyDown","DatePicker","state","opened","input","focused","internalDate","parseValueToDate","props","value","minDate","maxDate","getInputRef","ref","handleFocus","setState","onFocus","handleBlur","close","onBlur","handlePick","dateShape","handleSelect","blur","date","month","year","dateToInternalString","onValueChange","isHoliday","isWeekend","dateString","componentDidMount","focus","UNSAFE_componentWillReceiveProps","nextProps","render","picker","toNativeFormat","menuAlign","undefined","enableTodayLink","root","width","onMouseEnter","onMouseLeave","onMouseOver","validate","checks","NotNull","Native","Component","__KONTUR_REACT_UI__","propTypes","bool","string","isRequired","oneOf","oneOfType","number","func","defaultProps","_day","range","order","DMY","separator","Dot","setRangeStart","setRangeEnd","parseValue","Number","Limits","Range"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\n\r\nimport { InternalDate } from '../../lib/date/InternalDate';\r\nimport { InternalDateTransformer } from '../../lib/date/InternalDateTransformer';\r\nimport { MAX_FULLDATE, MIN_FULLDATE } from '../../lib/date/constants';\r\nimport { InternalDateOrder, InternalDateSeparator, InternalDateValidateCheck } from '../../lib/date/types';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { CalendarDateShape } from '../../internal/Calendar';\r\nimport { DateInput } from '../DateInput';\r\nimport { DropdownContainer } from '../../internal/DropdownContainer';\r\nimport { filterProps } from '../../lib/filterProps';\r\n\r\nimport { Picker } from './Picker';\r\nimport { jsStyles } from './DatePicker.styles';\r\n\r\nconst INPUT_PASS_PROPS = {\r\n  autoFocus: true,\r\n  disabled: true,\r\n  warning: true,\r\n  error: true,\r\n  size: true,\r\n  onKeyDown: true,\r\n};\r\n\r\nexport interface DatePickerProps<T> {\r\n  autoFocus?: boolean;\r\n  disabled?: boolean;\r\n  enableTodayLink?: boolean;\r\n  error?: boolean;\r\n  minDate: T;\r\n  maxDate: T;\r\n  menuAlign?: 'left' | 'right';\r\n  size?: 'small' | 'medium' | 'large';\r\n  value?: T | null;\r\n  warning?: boolean;\r\n  width: number | string;\r\n  onBlur?: () => void;\r\n  /**\r\n   * Вызывается при изменении `value`\r\n   *\r\n   * @param value - строка в формате `dd.mm.yyyy`.\r\n   */\r\n  onValueChange: (value: T) => void;\r\n  onFocus?: () => void;\r\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\r\n  onMouseEnter?: (e: React.MouseEvent<any>) => void;\r\n  onMouseLeave?: (e: React.MouseEvent<any>) => void;\r\n  onMouseOver?: (e: React.MouseEvent<any>) => void;\r\n\r\n  /**\r\n   * Функция для определения праздничных дней\r\n   * @default (_day, isWeekend) => isWeekend\r\n   * @param {T} day - строка в формате `dd.mm.yyyy`\r\n   * @param {boolean} isWeekend - флаг выходного (суббота или воскресенье)\r\n   *\r\n   * @returns {boolean} `true` для выходного или `false` для рабочего дня\r\n   */\r\n  isHoliday: (day: T, isWeekend: boolean) => boolean;\r\n}\r\n\r\nexport interface DatePickerState {\r\n  opened: boolean;\r\n}\r\n\r\ntype DatePickerValue = string;\r\n\r\nexport class DatePicker extends React.Component<DatePickerProps<DatePickerValue>, DatePickerState> {\r\n  public static __KONTUR_REACT_UI__ = 'DatePicker';\r\n\r\n  public static propTypes = {\r\n    autoFocus: PropTypes.bool,\r\n\r\n    disabled: PropTypes.bool,\r\n\r\n    /**\r\n     * Включает кнопку сегодня в календаре\r\n     */\r\n    enableTodayLink: PropTypes.bool,\r\n\r\n    error: PropTypes.bool,\r\n\r\n    /**\r\n     * Максимальная дата в календаре.\r\n     */\r\n    maxDate: PropTypes.string.isRequired,\r\n\r\n    menuAlign: PropTypes.oneOf(['left', 'right'] as Array<'left' | 'right'>),\r\n\r\n    /**\r\n     * Минимальная дата в календаре.\r\n     */\r\n    minDate: PropTypes.string.isRequired,\r\n\r\n    /**\r\n     * Строка формата `dd.mm.yyyy`\r\n     */\r\n    value: PropTypes.string,\r\n\r\n    warning: PropTypes.bool,\r\n\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n\r\n    onBlur: PropTypes.func,\r\n\r\n    onValueChange: PropTypes.func.isRequired,\r\n\r\n    onFocus: PropTypes.func,\r\n\r\n    onKeyDown: PropTypes.func,\r\n\r\n    onMouseEnter: PropTypes.func,\r\n\r\n    onMouseLeave: PropTypes.func,\r\n\r\n    onMouseOver: PropTypes.func,\r\n\r\n    isHoliday: PropTypes.func.isRequired,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    width: 120,\r\n    minDate: MIN_FULLDATE,\r\n    maxDate: MAX_FULLDATE,\r\n    isHoliday: (_day: DatePickerValue, isWeekend: boolean) => isWeekend,\r\n  };\r\n\r\n  public static validate = (value: Nullable<string>, range: { minDate?: string; maxDate?: string } = {}) => {\r\n    if (!value) {\r\n      return false;\r\n    }\r\n\r\n    const { minDate = MIN_FULLDATE, maxDate = MAX_FULLDATE } = range;\r\n    const internalDate = new InternalDate({\r\n      order: InternalDateOrder.DMY,\r\n      separator: InternalDateSeparator.Dot,\r\n    })\r\n      .setRangeStart(new InternalDate({ value: minDate }))\r\n      .setRangeEnd(new InternalDate({ value: maxDate }))\r\n      .parseValue(value);\r\n\r\n    return internalDate.validate({\r\n      checks: [\r\n        InternalDateValidateCheck.NotNull,\r\n        InternalDateValidateCheck.Number,\r\n        InternalDateValidateCheck.Native,\r\n        InternalDateValidateCheck.Limits,\r\n        InternalDateValidateCheck.Range,\r\n      ],\r\n    });\r\n  };\r\n\r\n  public state: DatePickerState = { opened: false };\r\n\r\n  private input: DateInput | null = null;\r\n  private focused = false;\r\n  private internalDate?: InternalDate = this.parseValueToDate(this.props.value);\r\n  private minDate?: InternalDate = this.parseValueToDate(this.props.minDate);\r\n  private maxDate?: InternalDate = this.parseValueToDate(this.props.maxDate);\r\n\r\n  public componentDidMount() {\r\n    if (this.props.autoFocus) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: DatePickerProps<DatePickerValue>) {\r\n    const { disabled } = nextProps;\r\n    const { opened } = this.state;\r\n    if (disabled && opened) {\r\n      this.close();\r\n    }\r\n    this.internalDate = this.parseValueToDate(nextProps.value);\r\n    this.minDate = this.parseValueToDate(nextProps.minDate);\r\n    this.maxDate = this.parseValueToDate(nextProps.maxDate);\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur() {\r\n    if (this.input) {\r\n      this.input.blur();\r\n    }\r\n    this.handleBlur();\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus() {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n    if (this.input) {\r\n      this.input.focus();\r\n    }\r\n    this.handleFocus();\r\n  }\r\n\r\n  /**\r\n   * Закрывает выпадашку выбора дня\r\n   * @public\r\n   */\r\n  public close() {\r\n    this.setState({ opened: false });\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    let picker = null;\r\n    const date = this.internalDate ? this.internalDate.toNativeFormat() : null;\r\n    if (this.state.opened) {\r\n      picker = (\r\n        <DropdownContainer getParent={() => findDOMNode(this)} offsetY={2} align={this.props.menuAlign}>\r\n          <Picker\r\n            value={date}\r\n            minDate={(this.minDate && this.minDate.toNativeFormat()) || undefined}\r\n            maxDate={(this.maxDate && this.maxDate.toNativeFormat()) || undefined}\r\n            onPick={this.handlePick}\r\n            onSelect={this.handleSelect}\r\n            enableTodayLink={this.props.enableTodayLink}\r\n            isHoliday={this.isHoliday}\r\n          />\r\n        </DropdownContainer>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <label\r\n        className={jsStyles.root()}\r\n        style={{ width: this.props.width }}\r\n        onMouseEnter={this.props.onMouseEnter}\r\n        onMouseLeave={this.props.onMouseLeave}\r\n        onMouseOver={this.props.onMouseOver}\r\n      >\r\n        <DateInput\r\n          {...filterProps(this.props, INPUT_PASS_PROPS)}\r\n          ref={this.getInputRef}\r\n          value={this.props.value || ''}\r\n          width=\"100%\"\r\n          withIcon\r\n          minDate={this.props.minDate}\r\n          maxDate={this.props.maxDate}\r\n          onBlur={this.handleBlur}\r\n          onFocus={this.handleFocus}\r\n          onValueChange={this.props.onValueChange}\r\n        />\r\n        {picker}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private getInputRef = (ref: DateInput | null) => {\r\n    this.input = ref;\r\n  };\r\n\r\n  private parseValueToDate(value?: Nullable<string>): InternalDate | undefined {\r\n    if (value === undefined || value === null) {\r\n      return undefined;\r\n    }\r\n    const date = new InternalDate({ value });\r\n    if (date.validate({ checks: [InternalDateValidateCheck.NotNull, InternalDateValidateCheck.Native] })) {\r\n      return date;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  private handleFocus = () => {\r\n    if (this.focused) {\r\n      return;\r\n    }\r\n\r\n    this.focused = true;\r\n\r\n    this.setState({ opened: true });\r\n\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus();\r\n    }\r\n  };\r\n\r\n  private handleBlur = () => {\r\n    if (!this.focused) {\r\n      return;\r\n    }\r\n\r\n    this.focused = false;\r\n    this.close();\r\n\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur();\r\n    }\r\n  };\r\n\r\n  private handlePick = (dateShape: CalendarDateShape) => {\r\n    this.handleSelect(dateShape);\r\n    this.blur();\r\n  };\r\n\r\n  private handleSelect = ({ date, month, year }: CalendarDateShape) => {\r\n    const value = InternalDateTransformer.dateToInternalString({ date, month: month + 1, year });\r\n    if (this.props.onValueChange) {\r\n      this.props.onValueChange(value);\r\n    }\r\n  };\r\n\r\n  private isHoliday = ({ date, month, year, isWeekend }: CalendarDateShape & { isWeekend: boolean }) => {\r\n    const dateString = InternalDateTransformer.dateToInternalString({ date, month: month + 1, year });\r\n    return this.props.isHoliday(dateString, isWeekend);\r\n  };\r\n}\r\n"]}