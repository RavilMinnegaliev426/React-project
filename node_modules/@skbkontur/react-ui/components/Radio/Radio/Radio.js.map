{"version":3,"sources":["Radio.tsx"],"names":["React","PropTypes","cn","ThemeContext","jsStyles","Radio","theme","inputEl","createRef","_isInRadioGroup","Boolean","context","name","handleChange","e","props","onValueChange","value","onSelect","onChange","handleMouseOver","onMouseOver","handleMouseEnter","onMouseEnter","handleMouseLeave","onMouseLeave","render","renderMain","focus","current","blur","active","children","disabled","warning","error","focused","pressed","hovered","className","style","rest","radioClassNames","radio","checked","inputProps","type","input","tabIndex","ref","labelProps","root","activeItem","placeholder","renderLabel","labelClassNames","label","labelDisabled","Component","__KONTUR_REACT_UI__","contextTypes","any","func","string","bool","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { Override } from '../../typings/utility-types';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './Radio.styles';\r\n\r\nexport type RadioProps<T> = Override<\r\n  React.InputHTMLAttributes<HTMLInputElement>,\r\n  {\r\n    /** Состояние ошибки */\r\n    error?: boolean;\r\n    /** Состояние Предупреждения */\r\n    warning?: boolean;\r\n    /** Состояние фокуса */\r\n    focused?: boolean;\r\n    /** Состояние нажатия */\r\n    pressed?: boolean;\r\n    /** Состояние hover */\r\n    hovered?: boolean;\r\n    /** Состояние active */\r\n    active?: boolean;\r\n    /** Вызывается при изменении `value` */\r\n    onValueChange?: (value: T) => void;\r\n    onMouseEnter?: React.MouseEventHandler<HTMLLabelElement>;\r\n    onMouseLeave?: React.MouseEventHandler<HTMLLabelElement>;\r\n    onMouseOver?: React.MouseEventHandler<HTMLLabelElement>;\r\n    /** Значение */\r\n    value: T;\r\n  }\r\n>;\r\n\r\nexport class Radio<T> extends React.Component<RadioProps<T>> {\r\n  public static __KONTUR_REACT_UI__ = 'Radio';\r\n\r\n  public static contextTypes = {\r\n    activeItem: PropTypes.any,\r\n    onSelect: PropTypes.func,\r\n    name: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    warning: PropTypes.bool,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    focused: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private inputEl = React.createRef<HTMLInputElement>();\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus() {\r\n    this.inputEl.current?.focus();\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur() {\r\n    this.inputEl.current?.blur();\r\n  }\r\n\r\n  public renderMain() {\r\n    const {\r\n      active,\r\n      children,\r\n      disabled = this.context.disabled,\r\n      warning = this.context.warning,\r\n      error = this.context.error,\r\n      focused,\r\n      pressed,\r\n      hovered,\r\n      onMouseOver,\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n      onValueChange,\r\n\r\n      className,\r\n      style,\r\n\r\n      ...rest\r\n    } = this.props;\r\n\r\n    let radioClassNames = cn({\r\n      [jsStyles.radio(this.theme)]: true,\r\n      [jsStyles.checked(this.theme)]: this.props.checked,\r\n      [jsStyles.focus(this.theme)]: this.props.focused,\r\n      [jsStyles.error(this.theme)]: error,\r\n      [jsStyles.warning(this.theme)]: warning,\r\n      [jsStyles.disabled(this.theme)]: disabled,\r\n    });\r\n\r\n    let value: string | number | undefined;\r\n    if (typeof this.props.value === 'string' || typeof this.props.value === 'number') {\r\n      value = this.props.value;\r\n    }\r\n\r\n    const inputProps = {\r\n      ...rest,\r\n      type: 'radio',\r\n      className: jsStyles.input(),\r\n      disabled,\r\n      tabIndex: this.props.tabIndex,\r\n      value,\r\n      ref: this.inputEl,\r\n      onChange: this.handleChange,\r\n    };\r\n\r\n    const labelProps = {\r\n      className: jsStyles.root(),\r\n      onMouseOver: this.handleMouseOver,\r\n      onMouseEnter: this.handleMouseEnter,\r\n      onMouseLeave: this.handleMouseLeave,\r\n    };\r\n\r\n    if (this._isInRadioGroup()) {\r\n      const checked = this.props.value === this.context.activeItem;\r\n      inputProps.checked = checked;\r\n      inputProps.name = this.context.name;\r\n      radioClassNames = cn(radioClassNames, checked && jsStyles.checked(this.theme));\r\n    }\r\n\r\n    return (\r\n      <label {...labelProps}>\r\n        <input {...inputProps} />\r\n        <span className={radioClassNames}>\r\n          <span className={jsStyles.placeholder()} />\r\n        </span>\r\n        {this.props.children && this.renderLabel()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private _isInRadioGroup = () => Boolean(this.context.name);\r\n\r\n  private renderLabel() {\r\n    const labelClassNames = cn({\r\n      [jsStyles.label(this.theme)]: true,\r\n      [jsStyles.labelDisabled()]: !!(this.props.disabled || this.context.disabled),\r\n    });\r\n\r\n    return <div className={labelClassNames}>{this.props.children}</div>;\r\n  }\r\n\r\n  private handleChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.props.onValueChange?.(this.props.value);\r\n\r\n    if (this._isInRadioGroup()) {\r\n      this.context.onSelect(this.props.value);\r\n    }\r\n\r\n    this.props.onChange?.(e);\r\n  };\r\n\r\n  private handleMouseOver: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseOver?.(e);\r\n  };\r\n\r\n  private handleMouseEnter: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseEnter?.(e);\r\n  };\r\n\r\n  private handleMouseLeave: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseLeave?.(e);\r\n  };\r\n}\r\n"]}