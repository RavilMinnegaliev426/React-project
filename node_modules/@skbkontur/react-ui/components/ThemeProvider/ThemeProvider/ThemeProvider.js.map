{"version":3,"sources":["ThemeProvider.tsx"],"names":["React","isEqual","warning","ThemeContext","ThemeFactory","isDevelopmentEnv","ThemeProvider","props","theme","makeFullTheme","value","componentDidMount","UNSAFE_componentWillReceiveProps","nextProps","hasSameShape","JSON","stringify","render","children","isFullTheme","create","Component","__KONTUR_REACT_UI__"],"mappings":"sEAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,OAAP,MAAoB,SAApB;;AAEA,SAASC,YAAT,QAA6B,gCAA7B;;AAEA,SAASC,YAAT,QAA6B,gCAA7B;AACA,SAASC,gBAAT,QAAiC,8BAAjC;;;;;;;AAOA,WAAaC,aAAb;;;;;AAKE,yBAAYC,KAAZ,EAAuC;AACrC,wCAAMA,KAAN,UADqC,MAF/BC,KAE+B;AAErC,UAAKA,KAAL,GAAa,MAAKC,aAAL,CAAmBF,KAAK,CAACG,KAAzB,CAAb,CAFqC;AAGtC,GARH;;AAUEC,EAAAA,iBAVF,GAUE,6BAA0B;AACxBT,IAAAA,OAAO;AACL,QADK;AAEL,2IAFK,CAAP;;AAID,GAfH;;AAiBSU,EAAAA,gCAjBT,GAiBE,0CAAwCC,SAAxC,EAAuF;AACrF,QAAIA,SAAS,CAACH,KAAV,KAAoB,KAAKH,KAAL,CAAWG,KAAnC,EAA0C;AACxC,UAAIL,gBAAJ,EAAsB;AACpB,YAAMS,YAAY,GAAGb,OAAO,CAACY,SAAS,CAACH,KAAX,EAAkB,KAAKH,KAAL,CAAWG,KAA7B,CAA5B;AACAR,QAAAA,OAAO;AACL,SAACY,YADI;AAEL;AACE,YADF;;AAGE,YAHF;AAIYC,QAAAA,IAAI,CAACC,SAAL,CAAeH,SAAS,CAACH,KAAzB,CAJZ,CAFK,CAAP;;AAQD;;AAED,WAAKF,KAAL,GAAa,KAAKC,aAAL,CAAmBI,SAAS,CAACH,KAA7B,CAAb;AACD;AACF,GAjCH;;AAmCSO,EAAAA,MAnCT,GAmCE,kBAAgB;AACd,WAAO,oBAAC,YAAD,CAAc,QAAd,IAAuB,KAAK,EAAE,KAAKT,KAAnC,IAA2C,KAAKD,KAAL,CAAWW,QAAtD,CAAP;AACD,GArCH;;AAuCUT,EAAAA,aAvCV,GAuCE,uBAAsBD,KAAtB,EAAqD;AACnD,WAAOJ,YAAY,CAACe,WAAb,CAAyBX,KAAzB,IAAkCA,KAAlC,GAA0CJ,YAAY,CAACgB,MAAb,CAA6BZ,KAA7B,CAAjD;AACD,GAzCH,wBAAmCR,KAAK,CAACqB,SAAzC,EAAaf,a,CACGgB,mB,GAAsB,e","sourcesContent":["import React from 'react';\r\nimport isEqual from 'lodash.isequal';\r\nimport warning from 'warning';\r\n\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme, ThemeIn } from '../../lib/theming/Theme';\r\nimport { ThemeFactory } from '../../lib/theming/ThemeFactory';\r\nimport { isDevelopmentEnv } from '../../lib/currentEnvironment';\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n  value: ThemeIn | Theme;\r\n}\r\n\r\nexport class ThemeProvider extends React.Component<ThemeProviderProps> {\r\n  public static __KONTUR_REACT_UI__ = 'ThemeProvider';\r\n\r\n  private theme: Theme;\r\n\r\n  constructor(props: ThemeProviderProps) {\r\n    super(props);\r\n    this.theme = this.makeFullTheme(props.value);\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    warning(\r\n      true,\r\n      \"ThemeProvider was deprecated please use 'ThemeContext' instead. \\nSee https://tech.skbkontur.ru/react-ui/#/Customization/ThemeContext\",\r\n    );\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: Readonly<ThemeProviderProps>): void {\r\n    if (nextProps.value !== this.props.value) {\r\n      if (isDevelopmentEnv) {\r\n        const hasSameShape = isEqual(nextProps.value, this.props.value);\r\n        warning(\r\n          !hasSameShape,\r\n          `ThemeProvider received next value with the same shape as the previous one.` +\r\n            '\\n' +\r\n            `Consider using the same object reference for performance reasons.` +\r\n            '\\n' +\r\n            `Shape: ${JSON.stringify(nextProps.value)}`,\r\n        );\r\n      }\r\n\r\n      this.theme = this.makeFullTheme(nextProps.value);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return <ThemeContext.Provider value={this.theme}>{this.props.children}</ThemeContext.Provider>;\r\n  }\r\n\r\n  private makeFullTheme(theme: ThemeIn | Theme): Theme {\r\n    return ThemeFactory.isFullTheme(theme) ? theme : ThemeFactory.create<ThemeIn>(theme);\r\n  }\r\n}\r\n"]}