{"version":3,"sources":["DateSelect.tsx"],"names":["React","PropTypes","cn","isKeyEscape","DatePickerLocaleHelper","locale","RenderLayer","DropdownContainer","LayoutEvents","ThemeContext","ArrowTriangleDownIcon","ArrowTriangleUpDownIcon","ArrowTriangleUpIcon","jsStyles","itemHeight","visibleYearsCount","itemsToMoveCount","monthsCount","defaultMinYear","defaultMaxYear","DateSelect","state","botCapped","current","height","opened","pos","top","topCapped","nodeTop","Infinity","theme","root","itemsContainer","listener","timeout","longClickTimer","setPositionRepeatTimer","yearStep","open","props","disabled","setPosition","setState","close","refRoot","element","setNodeTop","clearTimeout","setTimeout","getBoundingClientRect","refItemsContainer","addEventListener","handleWheel","passive","removeEventListener","handleLongClickUp","event","preventDefault","window","setInterval","handleLongClickDown","handleLongClickStop","getAnchor","WheelEvent","stopPropagation","deltaY","deltaMode","handleItemClick","shift","e","value","onValueChange","handleKey","handleUp","handleDown","UNSAFE_componentWillReceiveProps","componentDidMount","addListener","componentWillUnmount","remove","render","renderMain","width","rootProps","className","Boolean","style","ref","caption","getItem","arrow","arrowDisabled","renderMenu","disableItems","index","maxValue","minValue","from","to","Math","ceil","items","i","menuItem","menuItemSelected","menuItemActive","menuItemDisabled","clickHandler","onMouseDown","onClick","push","left","right","shiftStyle","position","holderClass","menuHolder","isTopCapped","isBotCapped","dropdownOffset","overflowOffsetDelta","menuUp","itemsHolder","menuDown","type","months","minPos","getMinPos","maxPos","getMaxPos","Component","__KONTUR_REACT_UI__","propTypes","bool","string","number","isRequired","oneOfType","func","defaultProps","minMonth","maxMonth"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyEscape } from '../../lib/events/keyboard/identifiers';\r\nimport { DatePickerLocale, DatePickerLocaleHelper } from '../../components/DatePicker/locale';\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { RenderLayer } from '../RenderLayer';\r\nimport { DropdownContainer } from '../DropdownContainer';\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { ArrowTriangleDownIcon, ArrowTriangleUpDownIcon, ArrowTriangleUpIcon } from '../icons/16px';\r\n\r\nimport { jsStyles } from './DateSelect.styles';\r\n\r\nconst itemHeight = 24;\r\nconst visibleYearsCount = 11;\r\nconst itemsToMoveCount = -5;\r\nconst monthsCount = 12;\r\nconst defaultMinYear = 1900;\r\nconst defaultMaxYear = 2100;\r\n\r\nexport interface DateSelectProps {\r\n  disabled?: boolean | null;\r\n  onValueChange: (value: number) => void;\r\n  type?: 'month' | 'year';\r\n  value: number;\r\n  width?: number | string;\r\n  minValue?: number;\r\n  maxValue?: number;\r\n}\r\n\r\nexport interface DateSelectState {\r\n  botCapped: boolean;\r\n  current: Nullable<number>;\r\n  height: number;\r\n  opened: boolean;\r\n  pos: number;\r\n  top: number;\r\n  topCapped: boolean;\r\n  nodeTop: number;\r\n}\r\n\r\n@locale('DatePicker', DatePickerLocaleHelper)\r\nexport class DateSelect extends React.Component<DateSelectProps, DateSelectState> {\r\n  public static __KONTUR_REACT_UI__ = 'DateSelect';\r\n\r\n  public static propTypes = {\r\n    disabled: PropTypes.bool,\r\n\r\n    type: PropTypes.string,\r\n\r\n    value: PropTypes.number.isRequired,\r\n\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\r\n    onValueChange: PropTypes.func,\r\n\r\n    minValue: PropTypes.number,\r\n\r\n    maxValue: PropTypes.number,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    type: 'year',\r\n    minMonth: 0,\r\n    maxMonth: 11,\r\n    width: 'auto',\r\n  };\r\n\r\n  public state = {\r\n    botCapped: false,\r\n    current: 0,\r\n    height: 0,\r\n    opened: false,\r\n    pos: 0,\r\n    top: 0,\r\n    topCapped: false,\r\n    nodeTop: Infinity,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private readonly locale!: DatePickerLocale;\r\n  private root: HTMLElement | null = null;\r\n  private itemsContainer: HTMLElement | null = null;\r\n  private listener: Nullable<ReturnType<typeof LayoutEvents.addListener>>;\r\n  private timeout: number | undefined;\r\n  private longClickTimer = 0;\r\n  private setPositionRepeatTimer = 0;\r\n  private yearStep = 3;\r\n\r\n  public UNSAFE_componentWillReceiveProps() {\r\n    this.setNodeTop();\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.listener = LayoutEvents.addListener(this.setNodeTop);\r\n    this.setNodeTop();\r\n    window.addEventListener('keydown', this.handleKey);\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.listener) {\r\n      this.listener.remove();\r\n    }\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    if (this.longClickTimer) {\r\n      clearTimeout(this.longClickTimer);\r\n    }\r\n    if (this.setPositionRepeatTimer) {\r\n      clearTimeout(this.setPositionRepeatTimer);\r\n    }\r\n    window.removeEventListener('keydown', this.handleKey);\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public open = () => {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (this.state.opened) {\r\n      return;\r\n    }\r\n\r\n    this.setPosition(0);\r\n    this.setState({\r\n      opened: true,\r\n      current: 0,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public close = () => {\r\n    if (!this.state.opened) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ opened: false });\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const { width, disabled } = this.props;\r\n    const rootProps = {\r\n      className: cn({\r\n        [jsStyles.root(this.theme)]: true,\r\n        [jsStyles.disabled()]: Boolean(disabled),\r\n      }),\r\n      style: { width },\r\n      ref: this.refRoot,\r\n    };\r\n    return (\r\n      <span {...rootProps}>\r\n        <div data-tid=\"DateSelect__caption\" className={jsStyles.caption()} onClick={this.open}>\r\n          {this.getItem(0)}\r\n          <div\r\n            className={cn({\r\n              [jsStyles.arrow(this.theme)]: true,\r\n              [jsStyles.arrowDisabled()]: Boolean(disabled),\r\n            })}\r\n          >\r\n            <ArrowTriangleUpDownIcon size={12} />\r\n          </div>\r\n        </div>\r\n        {this.state.opened && this.renderMenu()}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private refRoot = (element: HTMLElement | null) => {\r\n    this.root = element;\r\n  };\r\n\r\n  private setNodeTop = () => {\r\n    const root = this.root;\r\n    if (!root) {\r\n      return;\r\n    }\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    this.timeout = setTimeout(() =>\r\n      this.setState({\r\n        nodeTop: root.getBoundingClientRect().top,\r\n      }),\r\n    );\r\n  };\r\n\r\n  private disableItems(index: number) {\r\n    const value = this.props.value + index;\r\n    if (this.props.maxValue != null && this.props.minValue != null) {\r\n      return value > this.props.maxValue || value < this.props.minValue;\r\n    }\r\n    if (this.props.minValue != null) {\r\n      return value < this.props.minValue;\r\n    }\r\n    if (this.props.maxValue != null) {\r\n      return value > this.props.maxValue;\r\n    }\r\n  }\r\n\r\n  private renderMenu(): React.ReactNode {\r\n    const { top, height, nodeTop } = this.state;\r\n\r\n    let shift = this.state.pos % itemHeight;\r\n    if (shift < 0) {\r\n      shift += itemHeight;\r\n    }\r\n\r\n    const from = (this.state.pos - shift + top) / itemHeight;\r\n    const to = from + Math.ceil((height + shift) / itemHeight);\r\n    const items = [];\r\n\r\n    for (let i = from; i < to; ++i) {\r\n      const disableItems = this.disableItems(i) || false;\r\n      const className = cn({\r\n        [jsStyles.menuItem(this.theme)]: true,\r\n        [jsStyles.menuItemSelected(this.theme)]: i === 0,\r\n        [jsStyles.menuItemActive(this.theme)]: i === this.state.current,\r\n        [jsStyles.menuItemDisabled(this.theme)]: disableItems,\r\n      });\r\n      const clickHandler = {\r\n        onMouseDown: preventDefault,\r\n        onClick: this.handleItemClick(i),\r\n      };\r\n      items.push(\r\n        <div\r\n          data-tid=\"DateSelect__menuItem\"\r\n          data-prop-disabled={disableItems}\r\n          key={i}\r\n          className={className}\r\n          onMouseEnter={() => this.setState({ current: i })}\r\n          onMouseLeave={() => this.setState({ current: null })}\r\n          {...clickHandler}\r\n        >\r\n          {this.getItem(i)}\r\n        </div>,\r\n      );\r\n    }\r\n    const style: {\r\n      left?: number | string;\r\n      right?: number | string;\r\n      top: number;\r\n      width?: number | string;\r\n    } = {\r\n      top: top - 5,\r\n      left: 0,\r\n      right: 0,\r\n    };\r\n\r\n    const shiftStyle: React.CSSProperties = {\r\n      position: 'relative',\r\n      top: -shift,\r\n    };\r\n\r\n    const holderClass = cn({\r\n      [jsStyles.menuHolder(this.theme)]: true,\r\n      [jsStyles.isTopCapped()]: this.state.topCapped,\r\n      [jsStyles.isBotCapped()]: this.state.botCapped,\r\n    });\r\n\r\n    let dropdownOffset = -itemHeight;\r\n    if (nodeTop < -top) {\r\n      const overflowOffsetDelta = this.state.topCapped ? 6 : 17;\r\n      dropdownOffset -= nodeTop + top - overflowOffsetDelta;\r\n    }\r\n\r\n    return (\r\n      <RenderLayer onClickOutside={this.close} onFocusOutside={this.close} active>\r\n        <div>\r\n          <DropdownContainer getParent={this.getAnchor} offsetY={dropdownOffset} offsetX={-10}>\r\n            <div className={holderClass} style={style}>\r\n              {!this.state.topCapped && (\r\n                <div\r\n                  className={jsStyles.menuUp(this.theme)}\r\n                  onClick={this.handleUp}\r\n                  onMouseDown={this.handleLongClickUp}\r\n                  onMouseUp={this.handleLongClickStop}\r\n                  onMouseLeave={this.handleLongClickStop}\r\n                  onTouchStart={this.handleLongClickUp}\r\n                  onTouchEnd={this.handleLongClickStop}\r\n                >\r\n                  <span>\r\n                    <ArrowTriangleUpIcon />\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div className={jsStyles.itemsHolder()} style={{ height }}>\r\n                <div ref={this.refItemsContainer} style={shiftStyle}>\r\n                  {items}\r\n                </div>\r\n              </div>\r\n              {!this.state.botCapped && (\r\n                <div\r\n                  className={jsStyles.menuDown(this.theme)}\r\n                  onClick={this.handleDown}\r\n                  onMouseDown={this.handleLongClickDown}\r\n                  onMouseUp={this.handleLongClickStop}\r\n                  onMouseLeave={this.handleLongClickStop}\r\n                  onTouchStart={this.handleLongClickDown}\r\n                  onTouchEnd={this.handleLongClickStop}\r\n                >\r\n                  <span>\r\n                    <ArrowTriangleDownIcon />\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </DropdownContainer>\r\n        </div>\r\n      </RenderLayer>\r\n    );\r\n  }\r\n\r\n  private refItemsContainer = (element: HTMLElement | null) => {\r\n    if (!this.itemsContainer && element) {\r\n      element.addEventListener('wheel', this.handleWheel, { passive: false });\r\n    }\r\n    if (this.itemsContainer && !element) {\r\n      this.itemsContainer.removeEventListener('wheel', this.handleWheel);\r\n    }\r\n    this.itemsContainer = element;\r\n  };\r\n\r\n  private handleLongClickUp = (event: React.MouseEvent | React.TouchEvent) => {\r\n    event.preventDefault();\r\n    this.longClickTimer = window.setTimeout(() => {\r\n      this.setPositionRepeatTimer = window.setInterval(() => this.setPosition(this.state.pos - itemHeight), 100);\r\n    }, 200);\r\n  };\r\n\r\n  private handleLongClickDown = (event: React.MouseEvent | React.TouchEvent) => {\r\n    event.preventDefault();\r\n    this.longClickTimer = window.setTimeout(() => {\r\n      this.setPositionRepeatTimer = window.setInterval(() => this.setPosition(this.state.pos + itemHeight), 100);\r\n    }, 200);\r\n  };\r\n\r\n  private handleLongClickStop = () => {\r\n    clearTimeout(this.longClickTimer);\r\n    clearTimeout(this.setPositionRepeatTimer);\r\n  };\r\n\r\n  private getAnchor = () => this.root;\r\n\r\n  private handleWheel = (event: Event) => {\r\n    if (!(event instanceof WheelEvent)) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let deltaY = event.deltaY;\r\n    if (event.deltaMode === 1) {\r\n      deltaY *= itemHeight;\r\n    } else if (event.deltaMode === 2) {\r\n      deltaY *= itemHeight * 4;\r\n    }\r\n    const pos = this.state.pos + deltaY;\r\n    this.setPosition(pos);\r\n  };\r\n\r\n  private handleItemClick = (shift: number) => {\r\n    return (e: React.MouseEvent<HTMLElement>) => {\r\n      const value = this.props.value + shift;\r\n      if (this.props.onValueChange) {\r\n        this.props.onValueChange(value);\r\n      }\r\n      this.setState({ opened: false });\r\n    };\r\n  };\r\n\r\n  private handleKey = (e: KeyboardEvent) => {\r\n    if (this.state.opened && isKeyEscape(e)) {\r\n      e.preventDefault();\r\n      this.close();\r\n      e.stopPropagation();\r\n    }\r\n  };\r\n\r\n  private handleUp = (event: React.MouseEvent) => {\r\n    event.preventDefault();\r\n    this.setPosition(this.state.pos - itemHeight * this.yearStep);\r\n  };\r\n\r\n  private handleDown = (event: React.MouseEvent) => {\r\n    event.preventDefault();\r\n    this.setPosition(this.state.pos + itemHeight * this.yearStep);\r\n  };\r\n\r\n  private getItem(index: number) {\r\n    const value = this.props.value + index;\r\n    if (this.props.type === 'month') {\r\n      return this.locale.months[value];\r\n    }\r\n    return value;\r\n  }\r\n\r\n  private setPosition(pos: number) {\r\n    let top = itemsToMoveCount * itemHeight;\r\n    let height = visibleYearsCount * itemHeight;\r\n    if (this.props.type === 'month') {\r\n      top = -this.props.value * itemHeight;\r\n      height = monthsCount * itemHeight;\r\n    }\r\n\r\n    const minPos = this.getMinPos() - top;\r\n    const maxPos = this.getMaxPos() - top - height + itemHeight;\r\n    if (minPos >= pos) {\r\n      pos = minPos;\r\n    }\r\n    if (maxPos <= pos) {\r\n      pos = maxPos;\r\n    }\r\n    const topCapped = pos <= minPos;\r\n    const botCapped = pos >= maxPos;\r\n\r\n    this.setState({ pos, top, height, topCapped, botCapped });\r\n  }\r\n\r\n  private getMinPos() {\r\n    if (this.props.type === 'month') {\r\n      return -this.props.value * itemHeight;\r\n    } else if (this.props.type === 'year') {\r\n      return ((this.props.minValue || defaultMinYear) - this.props.value) * itemHeight;\r\n    }\r\n    return -Infinity; // Be defensive.\r\n  }\r\n\r\n  private getMaxPos() {\r\n    if (this.props.type === 'month') {\r\n      return (visibleYearsCount - this.props.value) * itemHeight;\r\n    } else if (this.props.type === 'year') {\r\n      return ((this.props.maxValue || defaultMaxYear) - this.props.value) * itemHeight;\r\n    }\r\n    return Infinity; // Be defensive.\r\n  }\r\n}\r\n\r\nfunction preventDefault(e: React.SyntheticEvent) {\r\n  e.preventDefault();\r\n}\r\n"]}