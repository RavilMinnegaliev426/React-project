{"version":3,"sources":["SpinnerOld.tsx"],"names":["React","PropTypes","cn","locale","ThemeContext","hasSvgAnimationSupport","SpinnerOldIcon","jsStyles","types","SpinnerOldFallback","SpinnerLocaleHelper","SpinnerOld","props","theme","renderCloud","type","cloudClassName","dimmed","cloudDimmed","cloud","cloudWrapper","cloudStroke","renderCircle","circleClassName","circleDimmed","circle","renderSpinnerOld","renderCaption","caption","captionClassName","captionRight","captionBottom","render","renderMain","loading","spinner","inner","Component","__KONTUR_REACT_UI__","propTypes","node","bool","oneOf","Object","keys","defaultProps","Types"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { hasSvgAnimationSupport } from '../../lib/utils';\r\nimport { SpinnerOldIcon } from '../icons/SpinnerOldIcon';\r\n\r\nimport { jsStyles } from './SpinnerOld.styles';\r\nimport { types, SpinnerOldFallback } from './SpinnerOldFallback';\r\nimport { SpinnerLocale, SpinnerLocaleHelper } from './locale';\r\n\r\nexport type SpinnerOldType = 'mini' | 'normal' | 'big';\r\n\r\nexport interface SpinnerOldProps {\r\n  caption?: React.ReactNode;\r\n  dimmed?: boolean;\r\n  /**\r\n   * Тип спиннера\r\n   * @default mini\r\n   */\r\n  type: SpinnerOldType;\r\n}\r\n\r\n/**\r\n * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n */\r\n@locale('Spinner', SpinnerLocaleHelper)\r\nexport class SpinnerOld extends React.Component<SpinnerOldProps> {\r\n  public static __KONTUR_REACT_UI__ = 'SpinnerOld';\r\n\r\n  public static propTypes = {\r\n    /**\r\n     * Текст рядом с мини-лоадером.\r\n     *\r\n     * 'Загрузка' - значение по-умолчанию\r\n     */\r\n    caption: PropTypes.node,\r\n\r\n    dimmed: PropTypes.bool,\r\n\r\n    /**\r\n     * Тип спиннера: mini, normal, big\r\n     *\r\n     * Значение по-умолчанию - normal\r\n     *\r\n     * SpinnerOld.types - все доступные типы\r\n     */\r\n    type: PropTypes.oneOf(Object.keys(types)),\r\n  };\r\n\r\n  public static defaultProps: SpinnerOldProps = {\r\n    type: 'normal',\r\n  };\r\n\r\n  public static Types: typeof types = types;\r\n  private theme!: Theme;\r\n  private readonly locale!: SpinnerLocale;\r\n\r\n  public constructor(props: SpinnerOldProps) {\r\n    super(props);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const { type, caption = this.locale.loading, dimmed } = this.props;\r\n\r\n    return (\r\n      <div className={jsStyles.spinner()}>\r\n        <span className={jsStyles.inner()}>\r\n          {hasSvgAnimationSupport && this.renderSpinnerOld(type)}\r\n          {!hasSvgAnimationSupport && <SpinnerOldFallback type={type} dimmed={dimmed} />}\r\n        </span>\r\n        {caption && this.renderCaption(type, caption)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderCloud = (type: Exclude<SpinnerOldType, 'mini'>) => {\r\n    const cloudClassName = this.props.dimmed ? jsStyles.cloudDimmed(this.theme) : jsStyles.cloud(this.theme);\r\n\r\n    return (\r\n      <span className={jsStyles.cloudWrapper()}>\r\n        <SpinnerOldIcon size={type} className={cloudClassName} strokeClassName={jsStyles.cloudStroke(this.theme)} />\r\n      </span>\r\n    );\r\n  };\r\n\r\n  private renderCircle = () => {\r\n    const theme = this.theme;\r\n    const circleClassName = this.props.dimmed ? jsStyles.circleDimmed(theme) : jsStyles.circle(theme);\r\n\r\n    return <SpinnerOldIcon size=\"mini\" className={circleClassName} />;\r\n  };\r\n\r\n  private renderSpinnerOld = (type: SpinnerOldType) => {\r\n    return type === 'mini' ? this.renderCircle() : this.renderCloud(type);\r\n  };\r\n\r\n  private renderCaption = (type: SpinnerOldType, caption: React.ReactNode) => {\r\n    const captionClassName = cn(\r\n      jsStyles.caption(this.theme),\r\n      type === 'mini' ? jsStyles.captionRight() : jsStyles.captionBottom(),\r\n    );\r\n    return <span className={captionClassName}>{caption}</span>;\r\n  };\r\n}\r\n"]}