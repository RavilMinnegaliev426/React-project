{"version":3,"sources":["InputLikeText.tsx"],"names":["React","cn","isKeyTab","isShortcutPaste","MouseDrag","isEdge","isIE11","removeAllSelections","selectNodeContents","jsStyles","jsInputStyles","ThemeContext","HiddenInput","InputLikeText","state","blinking","focused","theme","node","hiddenInput","lastSelectedInnerNode","frozen","frozenBlur","dragging","focusTimeout","blinkTimeout","selectInnerNode","start","end","setTimeout","clearInterval","window","focus","renderLeftIcon","renderIcon","props","leftIcon","renderRightIcon","rightIcon","icon","className","Function","useDefaultColor","renderPrefix","prefix","renderSuffix","suffix","renderLeftSide","sideContainer","renderRightSide","renderPlaceholder","children","placeholder","handleDocumentMouseDown","e","target","Node","contains","defrost","handleDocumentKeyDown","handleMouseDown","handleKeyDown","disabled","onKeyDown","handleMouseDragStart","document","documentElement","classList","add","userSelectNone","onMouseDragStart","handleMouseDragEnd","onMouseDragEnd","remove","handleFocus","body","setState","onFocus","handleBlur","stopPropagation","onBlur","hiddenInputRef","el","innerRef","getSizeClassName","size","sizeLarge","sizeLargeFallback","sizeMedium","sizeMediumFallback","sizeSmall","sizeSmallFallback","blur","blink","getNode","componentDidMount","listen","addEventListener","componentWillUnmount","clearTimeout","stop","removeEventListener","render","renderMain","tabIndex","align","borderless","width","error","warning","onValueChange","value","rest","leftSide","rightSide","root","withoutLeftSide","focusFallback","warningFallback","errorFallback","wrapperClass","wrapper","userSelectContain","textAlign","undefined","input","Component","__KONTUR_REACT_UI__","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyTab, isShortcutPaste } from '../../lib/events/keyboard/identifiers';\r\nimport { MouseDrag, MouseDragEventHandler } from '../../lib/events/MouseDrag';\r\nimport { isEdge, isIE11 } from '../../lib/utils';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { removeAllSelections, selectNodeContents } from '../../components/DateInput/helpers/SelectionHelpers';\r\nimport { InputProps, InputIconType, InputState } from '../../components/Input';\r\nimport { jsStyles as jsInputStyles } from '../../components/Input/Input.styles';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './InputLikeText.styles';\r\nimport { HiddenInput } from './HiddenInput';\r\n\r\nexport interface InputLikeTextProps extends InputProps {\r\n  children?: React.ReactNode;\r\n  innerRef?: (el: HTMLElement | null) => void;\r\n  onFocus?: React.FocusEventHandler<HTMLElement>;\r\n  onBlur?: React.FocusEventHandler<HTMLElement>;\r\n  onMouseDragStart?: MouseDragEventHandler;\r\n  onMouseDragEnd?: MouseDragEventHandler;\r\n}\r\n\r\nexport type InputLikeTextState = Omit<InputState, 'polyfillPlaceholder'>;\r\n\r\nexport class InputLikeText extends React.Component<InputLikeTextProps, InputLikeTextState> {\r\n  public static __KONTUR_REACT_UI__ = 'InputLikeText';\r\n\r\n  public static defaultProps = { size: 'small' };\r\n\r\n  public state = { blinking: false, focused: false };\r\n\r\n  private theme!: Theme;\r\n  private node: HTMLElement | null = null;\r\n  private hiddenInput: HTMLInputElement | null = null;\r\n  private lastSelectedInnerNode: [HTMLElement, number, number] | null = null;\r\n  private frozen = false;\r\n  private frozenBlur = false;\r\n  private dragging = false;\r\n  private focusTimeout: Nullable<number>;\r\n  private blinkTimeout: Nullable<number>;\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus() {\r\n    if (this.node) {\r\n      this.node.focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur() {\r\n    if (this.node) {\r\n      this.node.blur();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blink() {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n    this.setState({ blinking: true }, () => {\r\n      this.blinkTimeout = window.setTimeout(() => this.setState({ blinking: false }), 150);\r\n    });\r\n  }\r\n\r\n  public getNode(): HTMLElement | null {\r\n    return this.node;\r\n  }\r\n\r\n  public selectInnerNode = (node: HTMLElement | null, start = 0, end = 1) => {\r\n    if (this.dragging || !node) {\r\n      return;\r\n    }\r\n    this.frozen = true;\r\n    this.frozenBlur = true;\r\n\r\n    this.lastSelectedInnerNode = [node, start, end];\r\n    setTimeout(() => selectNodeContents(node, start, end), 0);\r\n    if (this.focusTimeout) {\r\n      clearInterval(this.focusTimeout);\r\n    }\r\n    this.focusTimeout = window.setTimeout(() => (isIE11 || isEdge) && this.node && this.node.focus(), 0);\r\n  };\r\n\r\n  public componentDidMount() {\r\n    if (this.node) {\r\n      MouseDrag.listen(this.node)\r\n        .onMouseDragStart(this.handleMouseDragStart)\r\n        .onMouseDragEnd(this.handleMouseDragEnd);\r\n    }\r\n    document.addEventListener('mousedown', this.handleDocumentMouseDown);\r\n    document.addEventListener('keydown', this.handleDocumentKeyDown);\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.blinkTimeout) {\r\n      clearTimeout(this.blinkTimeout);\r\n    }\r\n    MouseDrag.stop(this.node);\r\n    document.removeEventListener('mousedown', this.handleDocumentMouseDown);\r\n    document.removeEventListener('keydown', this.handleDocumentKeyDown);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const {\r\n      innerRef,\r\n      tabIndex,\r\n      placeholder,\r\n      align,\r\n      borderless,\r\n      width,\r\n      children,\r\n      error,\r\n      warning,\r\n      onValueChange,\r\n      disabled,\r\n      prefix,\r\n      suffix,\r\n      leftIcon,\r\n      rightIcon,\r\n      value,\r\n      onMouseDragStart,\r\n      onMouseDragEnd,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    const { focused, blinking } = this.state;\r\n\r\n    const leftSide = this.renderLeftSide();\r\n    const rightSide = this.renderRightSide();\r\n\r\n    const className = cn(jsStyles.root(), jsInputStyles.root(this.theme), this.getSizeClassName(), {\r\n      [jsInputStyles.borderless()]: !!borderless,\r\n      [jsStyles.withoutLeftSide()]: !leftSide,\r\n      [jsInputStyles.focus(this.theme)]: focused,\r\n      [jsInputStyles.blink(this.theme)]: blinking,\r\n      [jsInputStyles.warning(this.theme)]: !!warning,\r\n      [jsInputStyles.error(this.theme)]: !!error,\r\n      [jsInputStyles.disabled(this.theme)]: !!disabled,\r\n      [jsInputStyles.focusFallback(this.theme)]: focused && (isIE11 || isEdge),\r\n      [jsInputStyles.warningFallback(this.theme)]: !!warning && (isIE11 || isEdge),\r\n      [jsInputStyles.errorFallback(this.theme)]: !!error && (isIE11 || isEdge),\r\n    });\r\n\r\n    const wrapperClass = cn(jsInputStyles.wrapper(), {\r\n      [jsStyles.userSelectContain()]: focused,\r\n    });\r\n\r\n    return (\r\n      <span\r\n        {...rest}\r\n        className={className}\r\n        style={{ width, textAlign: align }}\r\n        tabIndex={disabled ? undefined : 0}\r\n        onFocus={this.handleFocus}\r\n        onBlur={this.handleBlur}\r\n        ref={this.innerRef}\r\n        onKeyDown={this.handleKeyDown}\r\n        onMouseDown={this.handleMouseDown}\r\n      >\r\n        <input type=\"hidden\" value={value} />\r\n        {leftSide}\r\n        <span className={wrapperClass}>\r\n          <span data-tid=\"InputLikeText__input\" className={cn(jsStyles.input(), jsInputStyles.input(this.theme))}>\r\n            {children}\r\n          </span>\r\n          {this.renderPlaceholder()}\r\n        </span>\r\n        {rightSide}\r\n        {isIE11 && focused && <HiddenInput nodeRef={this.hiddenInputRef} />}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private renderLeftIcon = () => {\r\n    return this.renderIcon(this.props.leftIcon, jsInputStyles.leftIcon());\r\n  };\r\n\r\n  private renderRightIcon = () => {\r\n    return this.renderIcon(this.props.rightIcon, jsInputStyles.rightIcon());\r\n  };\r\n\r\n  private renderIcon = (icon: InputIconType, className: string): JSX.Element | null => {\r\n    if (!icon) {\r\n      return null;\r\n    }\r\n\r\n    if (icon instanceof Function) {\r\n      return <span className={className}>{icon()}</span>;\r\n    }\r\n\r\n    return <span className={cn(className, jsInputStyles.useDefaultColor(this.theme))}>{icon}</span>;\r\n  };\r\n\r\n  private renderPrefix = (): JSX.Element | null => {\r\n    const { prefix } = this.props;\r\n\r\n    if (!prefix) {\r\n      return null;\r\n    }\r\n\r\n    return <span className={jsInputStyles.prefix(this.theme)}>{prefix}</span>;\r\n  };\r\n\r\n  private renderSuffix = (): JSX.Element | null => {\r\n    const { suffix } = this.props;\r\n\r\n    if (!suffix) {\r\n      return null;\r\n    }\r\n\r\n    return <span className={jsInputStyles.suffix(this.theme)}>{suffix}</span>;\r\n  };\r\n\r\n  private renderLeftSide = (): JSX.Element | null => {\r\n    const leftIcon = this.renderLeftIcon();\r\n    const prefix = this.renderPrefix();\r\n\r\n    if (!leftIcon && !prefix) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <span className={jsInputStyles.sideContainer()}>\r\n        {leftIcon}\r\n        {prefix}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  private renderRightSide = (): JSX.Element | null => {\r\n    const rightIcon = this.renderRightIcon();\r\n    const suffix = this.renderSuffix();\r\n\r\n    if (!rightIcon && !suffix) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <span className={jsInputStyles.sideContainer()}>\r\n        {rightIcon}\r\n        {suffix}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  private renderPlaceholder = (): JSX.Element | null => {\r\n    const { children, placeholder } = this.props;\r\n\r\n    if (!children && placeholder) {\r\n      return <span className={jsInputStyles.placeholder(this.theme)}>{placeholder}</span>;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  private handleDocumentMouseDown = (e: MouseEvent) => {\r\n    if (this.state.focused && this.node && e.target instanceof Node && !this.node.contains(e.target)) {\r\n      this.defrost();\r\n    }\r\n  };\r\n\r\n  private handleDocumentKeyDown = (e: KeyboardEvent) => {\r\n    if (this.state.focused && isKeyTab(e)) {\r\n      this.defrost();\r\n    }\r\n  };\r\n\r\n  private handleMouseDown = (e: React.MouseEvent<HTMLElement>) => {\r\n    this.frozen = true;\r\n  };\r\n\r\n  private handleKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (isIE11 && isShortcutPaste(e) && this.hiddenInput) {\r\n      this.frozen = true;\r\n      setTimeout(() => {\r\n        if (this.lastSelectedInnerNode) {\r\n          this.selectInnerNode(...this.lastSelectedInnerNode);\r\n        }\r\n        if (this.node) {\r\n          this.node.focus();\r\n        }\r\n      }, 0);\r\n\r\n      this.hiddenInput.focus();\r\n    }\r\n\r\n    if (this.props.onKeyDown) {\r\n      this.props.onKeyDown(e as React.KeyboardEvent<HTMLInputElement>);\r\n    }\r\n  };\r\n\r\n  private handleMouseDragStart: MouseDragEventHandler = e => {\r\n    this.dragging = true;\r\n    document.documentElement.classList.add(jsStyles.userSelectNone());\r\n\r\n    if (this.props.onMouseDragStart) {\r\n      this.props.onMouseDragStart(e);\r\n    }\r\n  };\r\n\r\n  private handleMouseDragEnd: MouseDragEventHandler = e => {\r\n    // Дожидаемся onMouseUp\r\n    setTimeout(() => {\r\n      this.dragging = false;\r\n\r\n      if (this.props.onMouseDragEnd) {\r\n        this.props.onMouseDragEnd(e);\r\n      }\r\n    }, 0);\r\n\r\n    document.documentElement.classList.remove(jsStyles.userSelectNone());\r\n  };\r\n\r\n  private handleFocus = (e: React.FocusEvent<HTMLElement>) => {\r\n    if (this.props.disabled) {\r\n      if (isIE11) {\r\n        selectNodeContents(document.body, 0, 0);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if ((isIE11 || isEdge) && this.frozen) {\r\n      this.frozen = false;\r\n      if (this.state.focused) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.setState({ focused: true });\r\n\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(e);\r\n    }\r\n  };\r\n\r\n  private handleBlur = (e: React.FocusEvent<HTMLElement>) => {\r\n    if (this.props.disabled) {\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    if ((isIE11 || isEdge) && this.frozenBlur) {\r\n      this.frozenBlur = false;\r\n      return;\r\n    }\r\n    if ((isIE11 || isEdge) && this.frozen) {\r\n      return;\r\n    }\r\n\r\n    removeAllSelections();\r\n\r\n    this.setState({ focused: false });\r\n\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(e);\r\n    }\r\n  };\r\n\r\n  private hiddenInputRef = (el: HTMLInputElement | null) => {\r\n    this.hiddenInput = el;\r\n  };\r\n\r\n  private innerRef = (el: HTMLElement | null) => {\r\n    if (this.props.innerRef) {\r\n      this.props.innerRef(el);\r\n    }\r\n    this.node = el;\r\n  };\r\n\r\n  private defrost = (): void => {\r\n    this.frozen = false;\r\n    this.frozenBlur = false;\r\n  };\r\n\r\n  private getSizeClassName = () => {\r\n    switch (this.props.size) {\r\n      case 'large':\r\n        return {\r\n          [jsInputStyles.sizeLarge(this.theme)]: true,\r\n          [jsInputStyles.sizeLargeFallback(this.theme)]: isIE11 || isEdge,\r\n        };\r\n      case 'medium':\r\n        return {\r\n          [jsInputStyles.sizeMedium(this.theme)]: true,\r\n          [jsInputStyles.sizeMediumFallback(this.theme)]: isIE11 || isEdge,\r\n        };\r\n      case 'small':\r\n      default:\r\n        return {\r\n          [jsInputStyles.sizeSmall(this.theme)]: true,\r\n          [jsInputStyles.sizeSmallFallback(this.theme)]: isIE11 || isEdge,\r\n        };\r\n    }\r\n  };\r\n}\r\n"]}