{"version":3,"sources":["stepper.ts"],"names":["presets","secondPerFrame","precision","noWobble","stiffness","damping","reusedTuple","stepper","currentX","currentV","targetX","springForce","dampingForce","acceleration","newV","newX","Math","abs"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;;AAEA,IAAMC,cAAc,GAAG,IAAI,EAA3B;;AAEA,IAAMC,SAAS,GAAG,IAAlB,C;AAC+BF,OAAO,CAACG,Q,CAA/BC,S,qBAAAA,S,CAAWC,O,qBAAAA,O;;AAEnB;AACA;AACA,IAAMC,WAA6B,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAtC;AACA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,QAAD,EAAmBC,QAAnB,EAAqCC,OAArC,EAAyD;AAC9E;AACA,MAAMC,WAAW,GAAG,CAACP,SAAD,IAAcI,QAAQ,GAAGE,OAAzB,CAApB;AACA,MAAME,YAAY,GAAG,CAACP,OAAD,GAAWI,QAAhC;;AAEA,MAAMI,YAAY,GAAGF,WAAW,GAAGC,YAAnC;;AAEA,MAAME,IAAI,GAAGL,QAAQ,GAAGI,YAAY,GAAGZ,cAAvC;AACA,MAAMc,IAAI,GAAGP,QAAQ,GAAGM,IAAI,GAAGb,cAA/B;;AAEA,MAAIe,IAAI,CAACC,GAAL,CAASH,IAAT,IAAiBZ,SAAjB,IAA8Bc,IAAI,CAACC,GAAL,CAASF,IAAI,GAAGL,OAAhB,IAA2BR,SAA7D,EAAwE;AACtEI,IAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBI,OAAjB;AACAJ,IAAAA,WAAW,CAAC,CAAD,CAAX,GAAiB,CAAjB;AACA,WAAOA,WAAP;AACD;;AAEDA,EAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBS,IAAjB;AACAT,EAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBQ,IAAjB;AACA,SAAOR,WAAP;AACD,CAnBM","sourcesContent":["import { presets } from './presets';\r\n\r\nconst secondPerFrame = 1 / 45;\r\n\r\nconst precision = 1e-1;\r\nconst { stiffness, damping } = presets.noWobble;\r\n\r\n// imported from https://github.com/chenglou/react-motion/blob/master/src/stepper.js\r\n// and slightly simplified\r\nconst reusedTuple: [number, number] = [0, 0];\r\nexport const stepper = (currentX: number, currentV: number, targetX: number) => {\r\n  // https://en.wikipedia.org/wiki/Hooke%27s_law\r\n  const springForce = -stiffness * (currentX - targetX);\r\n  const dampingForce = -damping * currentV;\r\n\r\n  const acceleration = springForce + dampingForce;\r\n\r\n  const newV = currentV + acceleration * secondPerFrame;\r\n  const newX = currentX + newV * secondPerFrame;\r\n\r\n  if (Math.abs(newV) < precision && Math.abs(newX - targetX) < precision) {\r\n    reusedTuple[0] = targetX;\r\n    reusedTuple[1] = 0;\r\n    return reusedTuple;\r\n  }\r\n\r\n  reusedTuple[0] = newX;\r\n  reusedTuple[1] = newV;\r\n  return reusedTuple;\r\n};\r\n"]}