{"version":3,"sources":["DateSelect.tsx"],"names":["itemHeight","visibleYearsCount","itemsToMoveCount","monthsCount","defaultMinYear","defaultMaxYear","DateSelect","DatePickerLocaleHelper","state","botCapped","current","height","opened","pos","top","topCapped","nodeTop","Infinity","theme","locale","root","itemsContainer","listener","timeout","longClickTimer","setPositionRepeatTimer","yearStep","open","props","disabled","setPosition","setState","close","refRoot","element","setNodeTop","clearTimeout","setTimeout","getBoundingClientRect","refItemsContainer","addEventListener","handleWheel","passive","removeEventListener","handleLongClickUp","event","preventDefault","window","setInterval","handleLongClickDown","handleLongClickStop","getAnchor","WheelEvent","stopPropagation","deltaY","deltaMode","handleItemClick","shift","e","value","onValueChange","handleKey","handleUp","handleDown","UNSAFE_componentWillReceiveProps","componentDidMount","LayoutEvents","addListener","componentWillUnmount","remove","render","renderMain","width","rootProps","className","jsStyles","Boolean","style","ref","caption","getItem","arrow","arrowDisabled","renderMenu","disableItems","index","maxValue","minValue","from","to","Math","ceil","items","i","menuItem","menuItemSelected","menuItemActive","menuItemDisabled","clickHandler","onMouseDown","onClick","push","left","right","shiftStyle","position","holderClass","menuHolder","isTopCapped","isBotCapped","dropdownOffset","overflowOffsetDelta","menuUp","itemsHolder","menuDown","type","months","minPos","getMinPos","maxPos","getMaxPos","React","Component","__KONTUR_REACT_UI__","propTypes","PropTypes","bool","string","number","isRequired","oneOfType","func","defaultProps","minMonth","maxMonth"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyEscape } from '../../lib/events/keyboard/identifiers';\r\nimport { DatePickerLocale, DatePickerLocaleHelper } from '../../components/DatePicker/locale';\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { RenderLayer } from '../RenderLayer';\r\nimport { DropdownContainer } from '../DropdownContainer';\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { ArrowTriangleDownIcon, ArrowTriangleUpDownIcon, ArrowTriangleUpIcon } from '../icons/16px';\r\n\r\nimport { jsStyles } from './DateSelect.styles';\r\n\r\nconst itemHeight = 24;\r\nconst visibleYearsCount = 11;\r\nconst itemsToMoveCount = -5;\r\nconst monthsCount = 12;\r\nconst defaultMinYear = 1900;\r\nconst defaultMaxYear = 2100;\r\n\r\nexport interface DateSelectProps {\r\n  disabled?: boolean | null;\r\n  onValueChange: (value: number) => void;\r\n  type?: 'month' | 'year';\r\n  value: number;\r\n  width?: number | string;\r\n  minValue?: number;\r\n  maxValue?: number;\r\n}\r\n\r\nexport interface DateSelectState {\r\n  botCapped: boolean;\r\n  current: Nullable<number>;\r\n  height: number;\r\n  opened: boolean;\r\n  pos: number;\r\n  top: number;\r\n  topCapped: boolean;\r\n  nodeTop: number;\r\n}\r\n\r\n@locale('DatePicker', DatePickerLocaleHelper)\r\nexport class DateSelect extends React.Component<DateSelectProps, DateSelectState> {\r\n  public static __KONTUR_REACT_UI__ = 'DateSelect';\r\n\r\n  public static propTypes = {\r\n    disabled: PropTypes.bool,\r\n\r\n    type: PropTypes.string,\r\n\r\n    value: PropTypes.number.isRequired,\r\n\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\r\n    onValueChange: PropTypes.func,\r\n\r\n    minValue: PropTypes.number,\r\n\r\n    maxValue: PropTypes.number,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    type: 'year',\r\n    minMonth: 0,\r\n    maxMonth: 11,\r\n    width: 'auto',\r\n  };\r\n\r\n  public state = {\r\n    botCapped: false,\r\n    current: 0,\r\n    height: 0,\r\n    opened: false,\r\n    pos: 0,\r\n    top: 0,\r\n    topCapped: false,\r\n    nodeTop: Infinity,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private readonly locale!: DatePickerLocale;\r\n  private root: HTMLElement | null = null;\r\n  private itemsContainer: HTMLElement | null = null;\r\n  private listener: Nullable<ReturnType<typeof LayoutEvents.addListener>>;\r\n  private timeout: number | undefined;\r\n  private longClickTimer = 0;\r\n  private setPositionRepeatTimer = 0;\r\n  private yearStep = 3;\r\n\r\n  public UNSAFE_componentWillReceiveProps() {\r\n    this.setNodeTop();\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.listener = LayoutEvents.addListener(this.setNodeTop);\r\n    this.setNodeTop();\r\n    window.addEventListener('keydown', this.handleKey);\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.listener) {\r\n      this.listener.remove();\r\n    }\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    if (this.longClickTimer) {\r\n      clearTimeout(this.longClickTimer);\r\n    }\r\n    if (this.setPositionRepeatTimer) {\r\n      clearTimeout(this.setPositionRepeatTimer);\r\n    }\r\n    window.removeEventListener('keydown', this.handleKey);\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public open = () => {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (this.state.opened) {\r\n      return;\r\n    }\r\n\r\n    this.setPosition(0);\r\n    this.setState({\r\n      opened: true,\r\n      current: 0,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public close = () => {\r\n    if (!this.state.opened) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ opened: false });\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const { width, disabled } = this.props;\r\n    const rootProps = {\r\n      className: cn({\r\n        [jsStyles.root(this.theme)]: true,\r\n        [jsStyles.disabled()]: Boolean(disabled),\r\n      }),\r\n      style: { width },\r\n      ref: this.refRoot,\r\n    };\r\n    return (\r\n      <span {...rootProps}>\r\n        <div data-tid=\"DateSelect__caption\" className={jsStyles.caption()} onClick={this.open}>\r\n          {this.getItem(0)}\r\n          <div\r\n            className={cn({\r\n              [jsStyles.arrow(this.theme)]: true,\r\n              [jsStyles.arrowDisabled()]: Boolean(disabled),\r\n            })}\r\n          >\r\n            <ArrowTriangleUpDownIcon size={12} />\r\n          </div>\r\n        </div>\r\n        {this.state.opened && this.renderMenu()}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private refRoot = (element: HTMLElement | null) => {\r\n    this.root = element;\r\n  };\r\n\r\n  private setNodeTop = () => {\r\n    const root = this.root;\r\n    if (!root) {\r\n      return;\r\n    }\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    this.timeout = setTimeout(() =>\r\n      this.setState({\r\n        nodeTop: root.getBoundingClientRect().top,\r\n      }),\r\n    );\r\n  };\r\n\r\n  private disableItems(index: number) {\r\n    const value = this.props.value + index;\r\n    if (this.props.maxValue != null && this.props.minValue != null) {\r\n      return value > this.props.maxValue || value < this.props.minValue;\r\n    }\r\n    if (this.props.minValue != null) {\r\n      return value < this.props.minValue;\r\n    }\r\n    if (this.props.maxValue != null) {\r\n      return value > this.props.maxValue;\r\n    }\r\n  }\r\n\r\n  private renderMenu(): React.ReactNode {\r\n    const { top, height, nodeTop } = this.state;\r\n\r\n    let shift = this.state.pos % itemHeight;\r\n    if (shift < 0) {\r\n      shift += itemHeight;\r\n    }\r\n\r\n    const from = (this.state.pos - shift + top) / itemHeight;\r\n    const to = from + Math.ceil((height + shift) / itemHeight);\r\n    const items = [];\r\n\r\n    for (let i = from; i < to; ++i) {\r\n      const disableItems = this.disableItems(i) || false;\r\n      const className = cn({\r\n        [jsStyles.menuItem(this.theme)]: true,\r\n        [jsStyles.menuItemSelected(this.theme)]: i === 0,\r\n        [jsStyles.menuItemActive(this.theme)]: i === this.state.current,\r\n        [jsStyles.menuItemDisabled(this.theme)]: disableItems,\r\n      });\r\n      const clickHandler = {\r\n        onMouseDown: preventDefault,\r\n        onClick: this.handleItemClick(i),\r\n      };\r\n      items.push(\r\n        <div\r\n          data-tid=\"DateSelect__menuItem\"\r\n          data-prop-disabled={disableItems}\r\n          key={i}\r\n          className={className}\r\n          onMouseEnter={() => this.setState({ current: i })}\r\n          onMouseLeave={() => this.setState({ current: null })}\r\n          {...clickHandler}\r\n        >\r\n          {this.getItem(i)}\r\n        </div>,\r\n      );\r\n    }\r\n    const style: {\r\n      left?: number | string;\r\n      right?: number | string;\r\n      top: number;\r\n      width?: number | string;\r\n    } = {\r\n      top: top - 5,\r\n      left: 0,\r\n      right: 0,\r\n    };\r\n\r\n    const shiftStyle: React.CSSProperties = {\r\n      position: 'relative',\r\n      top: -shift,\r\n    };\r\n\r\n    const holderClass = cn({\r\n      [jsStyles.menuHolder(this.theme)]: true,\r\n      [jsStyles.isTopCapped()]: this.state.topCapped,\r\n      [jsStyles.isBotCapped()]: this.state.botCapped,\r\n    });\r\n\r\n    let dropdownOffset = -itemHeight;\r\n    if (nodeTop < -top) {\r\n      const overflowOffsetDelta = this.state.topCapped ? 6 : 17;\r\n      dropdownOffset -= nodeTop + top - overflowOffsetDelta;\r\n    }\r\n\r\n    return (\r\n      <RenderLayer onClickOutside={this.close} onFocusOutside={this.close} active>\r\n        <div>\r\n          <DropdownContainer getParent={this.getAnchor} offsetY={dropdownOffset} offsetX={-10}>\r\n            <div className={holderClass} style={style}>\r\n              {!this.state.topCapped && (\r\n                <div\r\n                  className={jsStyles.menuUp(this.theme)}\r\n                  onClick={this.handleUp}\r\n                  onMouseDown={this.handleLongClickUp}\r\n                  onMouseUp={this.handleLongClickStop}\r\n                  onMouseLeave={this.handleLongClickStop}\r\n                  onTouchStart={this.handleLongClickUp}\r\n                  onTouchEnd={this.handleLongClickStop}\r\n                >\r\n                  <span>\r\n                    <ArrowTriangleUpIcon />\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div className={jsStyles.itemsHolder()} style={{ height }}>\r\n                <div ref={this.refItemsContainer} style={shiftStyle}>\r\n                  {items}\r\n                </div>\r\n              </div>\r\n              {!this.state.botCapped && (\r\n                <div\r\n                  className={jsStyles.menuDown(this.theme)}\r\n                  onClick={this.handleDown}\r\n                  onMouseDown={this.handleLongClickDown}\r\n                  onMouseUp={this.handleLongClickStop}\r\n                  onMouseLeave={this.handleLongClickStop}\r\n                  onTouchStart={this.handleLongClickDown}\r\n                  onTouchEnd={this.handleLongClickStop}\r\n                >\r\n                  <span>\r\n                    <ArrowTriangleDownIcon />\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </DropdownContainer>\r\n        </div>\r\n      </RenderLayer>\r\n    );\r\n  }\r\n\r\n  private refItemsContainer = (element: HTMLElement | null) => {\r\n    if (!this.itemsContainer && element) {\r\n      element.addEventListener('wheel', this.handleWheel, { passive: false });\r\n    }\r\n    if (this.itemsContainer && !element) {\r\n      this.itemsContainer.removeEventListener('wheel', this.handleWheel);\r\n    }\r\n    this.itemsContainer = element;\r\n  };\r\n\r\n  private handleLongClickUp = (event: React.MouseEvent | React.TouchEvent) => {\r\n    event.preventDefault();\r\n    this.longClickTimer = window.setTimeout(() => {\r\n      this.setPositionRepeatTimer = window.setInterval(() => this.setPosition(this.state.pos - itemHeight), 100);\r\n    }, 200);\r\n  };\r\n\r\n  private handleLongClickDown = (event: React.MouseEvent | React.TouchEvent) => {\r\n    event.preventDefault();\r\n    this.longClickTimer = window.setTimeout(() => {\r\n      this.setPositionRepeatTimer = window.setInterval(() => this.setPosition(this.state.pos + itemHeight), 100);\r\n    }, 200);\r\n  };\r\n\r\n  private handleLongClickStop = () => {\r\n    clearTimeout(this.longClickTimer);\r\n    clearTimeout(this.setPositionRepeatTimer);\r\n  };\r\n\r\n  private getAnchor = () => this.root;\r\n\r\n  private handleWheel = (event: Event) => {\r\n    if (!(event instanceof WheelEvent)) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let deltaY = event.deltaY;\r\n    if (event.deltaMode === 1) {\r\n      deltaY *= itemHeight;\r\n    } else if (event.deltaMode === 2) {\r\n      deltaY *= itemHeight * 4;\r\n    }\r\n    const pos = this.state.pos + deltaY;\r\n    this.setPosition(pos);\r\n  };\r\n\r\n  private handleItemClick = (shift: number) => {\r\n    return (e: React.MouseEvent<HTMLElement>) => {\r\n      const value = this.props.value + shift;\r\n      if (this.props.onValueChange) {\r\n        this.props.onValueChange(value);\r\n      }\r\n      this.setState({ opened: false });\r\n    };\r\n  };\r\n\r\n  private handleKey = (e: KeyboardEvent) => {\r\n    if (this.state.opened && isKeyEscape(e)) {\r\n      e.preventDefault();\r\n      this.close();\r\n      e.stopPropagation();\r\n    }\r\n  };\r\n\r\n  private handleUp = (event: React.MouseEvent) => {\r\n    event.preventDefault();\r\n    this.setPosition(this.state.pos - itemHeight * this.yearStep);\r\n  };\r\n\r\n  private handleDown = (event: React.MouseEvent) => {\r\n    event.preventDefault();\r\n    this.setPosition(this.state.pos + itemHeight * this.yearStep);\r\n  };\r\n\r\n  private getItem(index: number) {\r\n    const value = this.props.value + index;\r\n    if (this.props.type === 'month') {\r\n      return this.locale.months[value];\r\n    }\r\n    return value;\r\n  }\r\n\r\n  private setPosition(pos: number) {\r\n    let top = itemsToMoveCount * itemHeight;\r\n    let height = visibleYearsCount * itemHeight;\r\n    if (this.props.type === 'month') {\r\n      top = -this.props.value * itemHeight;\r\n      height = monthsCount * itemHeight;\r\n    }\r\n\r\n    const minPos = this.getMinPos() - top;\r\n    const maxPos = this.getMaxPos() - top - height + itemHeight;\r\n    if (minPos >= pos) {\r\n      pos = minPos;\r\n    }\r\n    if (maxPos <= pos) {\r\n      pos = maxPos;\r\n    }\r\n    const topCapped = pos <= minPos;\r\n    const botCapped = pos >= maxPos;\r\n\r\n    this.setState({ pos, top, height, topCapped, botCapped });\r\n  }\r\n\r\n  private getMinPos() {\r\n    if (this.props.type === 'month') {\r\n      return -this.props.value * itemHeight;\r\n    } else if (this.props.type === 'year') {\r\n      return ((this.props.minValue || defaultMinYear) - this.props.value) * itemHeight;\r\n    }\r\n    return -Infinity; // Be defensive.\r\n  }\r\n\r\n  private getMaxPos() {\r\n    if (this.props.type === 'month') {\r\n      return (visibleYearsCount - this.props.value) * itemHeight;\r\n    } else if (this.props.type === 'year') {\r\n      return ((this.props.maxValue || defaultMaxYear) - this.props.value) * itemHeight;\r\n    }\r\n    return Infinity; // Be defensive.\r\n  }\r\n}\r\n\r\nfunction preventDefault(e: React.SyntheticEvent) {\r\n  e.preventDefault();\r\n}\r\n"]}