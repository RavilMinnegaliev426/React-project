{"version":3,"sources":["ZIndexStorage.ts"],"names":["componentPriorities","Toast","Sidepage","Modal","Sticky","DropdownContainer","Popup","Loader","ModalHeader","ModalFooter","ModalCross","ModalBody","priorityStep","getZIndexes","window","__RetailUiZIndexes","getIndexPriority","zIndex","Math","trunc","getMaxAllowedValue","priority","upperBorder","max","Object","values","incrementZIndex","delta","maxAllowedValue","zIndexes","prevIndexId","length","min","push","sort","a","b","removeZIndex","i","indexOf","splice"],"mappings":";;AAEA,IAAMA,mBAAmB,GAAG;AAC1BC,EAAAA,KAAK,EAAE,EADmB;AAE1BC,EAAAA,QAAQ,EAAE,CAFgB;AAG1BC,EAAAA,KAAK,EAAE,CAHmB;AAI1BC,EAAAA,MAAM,EAAE,CAJkB;AAK1BC,EAAAA,iBAAiB,EAAE,CALO;AAM1BC,EAAAA,KAAK,EAAE,CANmB;AAO1BC,EAAAA,MAAM,EAAE,CAPkB;AAQ1BC,EAAAA,WAAW,EAAE,CARa;AAS1BC,EAAAA,WAAW,EAAE,CATa;AAU1BC,EAAAA,UAAU,EAAE,CAVc;AAW1BC,EAAAA,SAAS,EAAE,CAXe,EAA5B;;AAaA,IAAMC,YAAY,GAAG,IAArB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,WAAgBC,MAAM,CAACC,kBAAP,KAA8BD,MAAM,CAACC,kBAAP,GAA4B,CAAC,CAAD,CAA1D,CAAhB,EAApB;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,MAAD,UAAoBC,IAAI,CAACC,KAAL,CAAWF,MAAM,GAAGL,YAApB,CAApB,EAAzB;AACA,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,UAA8B,CAACA,QAAQ,GAAG,CAAZ,IAAiBT,YAAjB,GAAgC,CAA9D,EAA3B;;AAEO,IAAMU,WAAW,GAAGF,kBAAkB,CAACF,IAAI,CAACK,GAAL,OAAAL,IAAI,EAAQM,MAAM,CAACC,MAAP,CAAczB,mBAAd,CAAR,CAAL,CAAtC,C;;AAEA,SAAS0B,eAAT,CAAyBL,QAAzB,EAAgEM,KAAhE,EAAuF;AAC5F,MAAI,OAAON,QAAP,KAAoB,QAAxB,EAAkC;AAChCA,IAAAA,QAAQ,GAAGrB,mBAAmB,CAACqB,QAAD,CAA9B;AACD;;AAED,MAAMO,eAAe,GAAGR,kBAAkB,CAACC,QAAD,CAA1C;AACA,MAAMQ,QAAQ,GAAGhB,WAAW,EAA5B;;AAEA,MAAIiB,WAAW,GAAGD,QAAQ,CAACE,MAAT,GAAkB,CAApC;AACA,SAAOF,QAAQ,CAACC,WAAD,CAAR,GAAwBF,eAAxB,IAA2CE,WAAW,GAAG,CAAhE,EAAmE;AACjEA,IAAAA,WAAW;AACZ;;AAED,MAAMb,MAAM;AACVD,EAAAA,gBAAgB,CAACa,QAAQ,CAACC,WAAD,CAAT,CAAhB,KAA4CT,QAA5C;AACIH,EAAAA,IAAI,CAACc,GAAL,CAASH,QAAQ,CAACC,WAAD,CAAR,GAAwBH,KAAjC,EAAwCC,eAAxC,CADJ;AAEIP,EAAAA,QAAQ,GAAGT,YAHjB;;AAKAiB,EAAAA,QAAQ,CAACI,IAAT,CAAchB,MAAd;AACAY,EAAAA,QAAQ,CAACK,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ,UAAUD,CAAC,GAAGC,CAAd,EAAd;AACA,SAAOnB,MAAP;AACD;;AAEM,SAASoB,YAAT,CAAsBpB,MAAtB,EAA4C;AACjD,MAAMY,QAAQ,GAAGhB,WAAW,EAA5B;AACA,MAAMyB,CAAC,GAAGT,QAAQ,CAACU,OAAT,CAAiBtB,MAAjB,CAAV;;AAEA,MAAIqB,CAAC,KAAK,CAAC,CAAX,EAAc;AACZT,IAAAA,QAAQ,CAACW,MAAT,CAAgBF,CAAhB,EAAmB,CAAnB;AACD;AACF","sourcesContent":["export type LayerComponentName = keyof typeof componentPriorities;\r\n\r\nconst componentPriorities = {\r\n  Toast: 10,\r\n  Sidepage: 9,\r\n  Modal: 9,\r\n  Sticky: 7,\r\n  DropdownContainer: 5,\r\n  Popup: 3,\r\n  Loader: 1,\r\n  ModalHeader: 1,\r\n  ModalFooter: 1,\r\n  ModalCross: 1,\r\n  ModalBody: 0,\r\n};\r\nconst priorityStep = 1000;\r\n\r\nconst getZIndexes = (): number[] => window.__RetailUiZIndexes || (window.__RetailUiZIndexes = [0]);\r\nconst getIndexPriority = (zIndex: number) => Math.trunc(zIndex / priorityStep);\r\nconst getMaxAllowedValue = (priority: number): number => (priority + 1) * priorityStep - 1;\r\n\r\nexport const upperBorder = getMaxAllowedValue(Math.max(...Object.values(componentPriorities)));\r\n\r\nexport function incrementZIndex(priority: number | LayerComponentName, delta: number): number {\r\n  if (typeof priority === 'string') {\r\n    priority = componentPriorities[priority];\r\n  }\r\n\r\n  const maxAllowedValue = getMaxAllowedValue(priority);\r\n  const zIndexes = getZIndexes();\r\n\r\n  let prevIndexId = zIndexes.length - 1;\r\n  while (zIndexes[prevIndexId] > maxAllowedValue && prevIndexId > 0) {\r\n    prevIndexId--;\r\n  }\r\n\r\n  const zIndex =\r\n    getIndexPriority(zIndexes[prevIndexId]) === priority\r\n      ? Math.min(zIndexes[prevIndexId] + delta, maxAllowedValue)\r\n      : priority * priorityStep;\r\n\r\n  zIndexes.push(zIndex);\r\n  zIndexes.sort((a, b) => a - b);\r\n  return zIndex;\r\n}\r\n\r\nexport function removeZIndex(zIndex: number): void {\r\n  const zIndexes = getZIndexes();\r\n  const i = zIndexes.indexOf(zIndex);\r\n\r\n  if (i !== -1) {\r\n    zIndexes.splice(i, 1);\r\n  }\r\n}\r\n"]}