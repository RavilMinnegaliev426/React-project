{"version":3,"sources":["BGRuler.tsx"],"names":["BGRuler","iframe","componentDidMount","contentWindow","addEventListener","update","componentWillUnmount","removeEventListener","forceUpdate","iframeRef","ref","render","props","width","height","color","top","bottom","left","right","wrapper","position","overflow","border","visibility","marks","backgroundSize","backgroundRepeat","highMarks","backgroundImage","middleMarks","shortMarks","rulerWidth","getBoundingClientRect","labels","Array","Math","ceil","fill","map","value","index","label","fontFamily","fontSize","lineHeight","React","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\n/**\r\n * Компонент рисует пиксельную линейку на заднем фоне.\r\n * Помогает контролировать размеры элементов при скриншотном тестировании.\r\n *\r\n * @see FxInput/__stories__/FxInput.stories.tsx\r\n */\r\nexport class BGRuler extends React.Component<{\r\n  width?: string | number;\r\n  height?: string | number;\r\n  top?: string | number;\r\n  bottom?: string | number;\r\n  right?: string | number;\r\n  left?: string | number;\r\n  color?: string;\r\n}> {\r\n  public static defaultProps = {\r\n    height: 20,\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    color: '#333',\r\n  };\r\n\r\n  private iframe: HTMLIFrameElement | null = null;\r\n\r\n  public componentDidMount = () => {\r\n    if (this.iframe && this.iframe.contentWindow) {\r\n      this.iframe.contentWindow.addEventListener('resize', this.update, true);\r\n    }\r\n    this.update();\r\n  };\r\n\r\n  public componentWillUnmount = () => {\r\n    if (this.iframe && this.iframe.contentWindow) {\r\n      this.iframe.contentWindow.removeEventListener('resize', this.update, true);\r\n    }\r\n  };\r\n\r\n  public update = () => {\r\n    this.forceUpdate();\r\n  };\r\n\r\n  public render() {\r\n    const { width, height, color, top, bottom, left, right } = this.props;\r\n    const wrapper: React.CSSProperties = {\r\n      position: 'absolute',\r\n      width,\r\n      height,\r\n      top,\r\n      bottom,\r\n      left,\r\n      right,\r\n      overflow: 'hidden',\r\n    };\r\n    const iframe: React.CSSProperties = {\r\n      position: 'absolute',\r\n      width: '100%',\r\n      height: '100%',\r\n      border: 0,\r\n      visibility: 'hidden',\r\n    };\r\n    const marks: React.CSSProperties = {\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      backgroundSize: '100px 20px',\r\n      backgroundRepeat: 'repeat-x',\r\n    };\r\n    const highMarks: React.CSSProperties = {\r\n      ...marks,\r\n      height: '100%',\r\n      backgroundImage: `linear-gradient(90deg, ${color} 0, ${color} 1px, transparent 1px)`,\r\n    };\r\n    const middleMarks: React.CSSProperties = {\r\n      ...marks,\r\n      height: '75%',\r\n      backgroundImage: `linear-gradient(90deg, transparent 0, transparent 49px, ${color} 49px, ${color} 50px, transparent 50px)`,\r\n    };\r\n    const shortMarks: React.CSSProperties = {\r\n      ...marks,\r\n      height: '40%',\r\n      backgroundImage: `\r\n        linear-gradient(90deg, transparent 0, transparent 9px, ${color} 9px, ${color} 10px, transparent 10px),\r\n        linear-gradient(90deg, transparent 0, transparent 19px, ${color} 19px, ${color} 20px, transparent 20px),\r\n        linear-gradient(90deg, transparent 0, transparent 29px, ${color} 29px, ${color} 30px, transparent 30px),\r\n        linear-gradient(90deg, transparent 0, transparent 39px, ${color} 39px, ${color} 40px, transparent 40px),\r\n        linear-gradient(90deg, transparent 0, transparent 59px, ${color} 59px, ${color} 60px, transparent 60px),\r\n        linear-gradient(90deg, transparent 0, transparent 69px, ${color} 69px, ${color} 70px, transparent 70px),\r\n        linear-gradient(90deg, transparent 0, transparent 79px, ${color} 79px, ${color} 80px, transparent 80px),\r\n        linear-gradient(90deg, transparent 0, transparent 89px, ${color} 89px, ${color} 90px, transparent 90px)\r\n      `,\r\n    };\r\n    const rulerWidth = this.iframe ? this.iframe.getBoundingClientRect().width : 0;\r\n    const labels = Array(Math.ceil(rulerWidth / 100) + 1)\r\n      .fill(null)\r\n      .map((value, index) => {\r\n        const label: React.CSSProperties = {\r\n          position: 'absolute',\r\n          fontFamily: 'Arial',\r\n          fontSize: 10,\r\n          lineHeight: 1,\r\n          color,\r\n          bottom: -1,\r\n          left: index * 100 + 5,\r\n        };\r\n        return (\r\n          <span key={index} style={label}>\r\n            {index * 100}\r\n          </span>\r\n        );\r\n      });\r\n    return (\r\n      <div style={wrapper}>\r\n        <div style={highMarks} />\r\n        <div style={middleMarks} />\r\n        <div style={shortMarks} />\r\n        {labels}\r\n        <iframe title=\"BGRuler\" style={iframe} ref={this.iframeRef} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private iframeRef = (ref: HTMLIFrameElement | null) => {\r\n    this.iframe = ref;\r\n  };\r\n}\r\n"]}