{"version":3,"sources":["RenderContainer.tsx"],"names":["RenderContainer","props","domContainer","rootId","getRootId","children","mountContainer","UNSAFE_componentWillReceiveProps","nextProps","unmountContainer","componentWillUnmount","destroyContainer","render","createContainer","document","body","Error","createElement","setAttribute","parentNode","appendChild","window","ReactTesting","addRenderContainer","removeChild","removeRenderContainer","React","Component","__KONTUR_REACT_UI__"],"mappings":"6UAAA;;;AAGA;;AAEA,8D;;;AAGaA,e;;;;;;;;AAQX,2BAAYC,KAAZ,EAAyC;AACvC,wCAAMA,KAAN,UADuC,MAJjCC,YAIiC,GAJK,IAIL,OAFxBC,MAEwB,GAFPH,eAAe,CAACI,SAAhB,EAEO;;AAGvC,QAAIH,KAAK,CAACI,QAAV,EAAoB;AAClB,YAAKC,cAAL;AACD,KALsC;AAMxC,G;;AAEMC,EAAAA,gC,GAAP,0CAAwCC,SAAxC,EAAyF;AACvF,QAAI,CAAC,KAAKP,KAAL,CAAWI,QAAZ,IAAwBG,SAAS,CAACH,QAAtC,EAAgD;AAC9C,WAAKC,cAAL;AACD;AACD,QAAI,KAAKL,KAAL,CAAWI,QAAX,IAAuB,CAACG,SAAS,CAACH,QAAtC,EAAgD;AAC9C,WAAKI,gBAAL;AACD;AACF,G;;AAEMC,EAAAA,oB,GAAP,gCAA8B;AAC5B,SAAKC,gBAAL;AACD,G;;AAEMC,EAAAA,M,GAAP,kBAAgB;AACd,WAAO,6BAAC,0CAAD,6BAA0B,KAAKX,KAA/B,IAAsC,YAAY,EAAE,KAAKC,YAAzD,EAAuE,MAAM,EAAE,KAAKC,MAApF,IAAP;AACD,G;;AAEOU,EAAAA,e,GAAR,2BAA0B;AACxB,QAAI,CAACC,QAAD,IAAa,CAACA,QAAQ,CAACC,IAA3B,EAAiC;AAC/B,YAAMC,KAAK,CAAC,kCAAD,CAAX;AACD;;AAED,QAAI,CAAC,KAAKd,YAAV,EAAwB;AACtB,UAAMA,YAAY,GAAGY,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAArB;AACAf,MAAAA,YAAY,CAACgB,YAAb,CAA0B,OAA1B,EAAmC,UAAnC;AACAhB,MAAAA,YAAY,CAACgB,YAAb,CAA0B,4BAA1B,OAA2D,KAAKf,MAAhE;AACA,WAAKD,YAAL,GAAoBA,YAApB;AACD;AACF,G;;AAEOI,EAAAA,c,GAAR,0BAAyB;AACvB,QAAI,CAAC,KAAKJ,YAAV,EAAwB;AACtB,WAAKW,eAAL;AACD;AACD,QAAI,KAAKX,YAAL,IAAqB,KAAKA,YAAL,CAAkBiB,UAAlB,KAAiCL,QAAQ,CAACC,IAAnE,EAAyE;AACvED,MAAAA,QAAQ,CAACC,IAAT,CAAcK,WAAd,CAA0B,KAAKlB,YAA/B;AACA,UAAImB,MAAM,CAACC,YAAX,EAAyB;AACvBD,QAAAA,MAAM,CAACC,YAAP,CAAoBC,kBAApB,CAAuC,KAAKpB,MAA5C,EAAoD,IAApD;AACD;AACF;AACF,G;;AAEOQ,EAAAA,gB,GAAR,4BAA2B;AACzB,QAAI,KAAKT,YAAT,EAAuB;AACrB,WAAKO,gBAAL;AACA,WAAKP,YAAL,GAAoB,IAApB;AACD;AACF,G;;AAEOO,EAAAA,gB,GAAR,4BAA2B;AACzB,QAAI,KAAKP,YAAL,IAAqB,KAAKA,YAAL,CAAkBiB,UAA3C,EAAuD;AACrD,WAAKjB,YAAL,CAAkBiB,UAAlB,CAA6BK,WAA7B,CAAyC,KAAKtB,YAA9C;;AAEA,UAAImB,MAAM,CAACC,YAAX,EAAyB;AACvBD,QAAAA,MAAM,CAACC,YAAP,CAAoBG,qBAApB,CAA0C,KAAKtB,MAA/C;AACD;AACF;AACF,G,0BAzEkCuB,eAAMC,S,4CAA9B3B,e,CACG4B,mB,GAAsB,iB,CADzB5B,e,CAGII,S,GAAY,oBAAM,yBAAN,E","sourcesContent":["import React from 'react';\r\n\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { getRandomID } from '../../lib/utils';\r\n\r\nimport { RenderInnerContainer } from './RenderInnerContainer';\r\nimport { RenderContainerProps } from './RenderContainerTypes';\r\n\r\nexport class RenderContainer extends React.Component<RenderContainerProps> {\r\n  public static __KONTUR_REACT_UI__ = 'RenderContainer';\r\n\r\n  private static getRootId = () => getRandomID();\r\n  private domContainer: Nullable<HTMLElement> = null;\r\n\r\n  private readonly rootId: string = RenderContainer.getRootId();\r\n\r\n  constructor(props: RenderContainerProps) {\r\n    super(props);\r\n\r\n    if (props.children) {\r\n      this.mountContainer();\r\n    }\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: Readonly<RenderContainerProps>): void {\r\n    if (!this.props.children && nextProps.children) {\r\n      this.mountContainer();\r\n    }\r\n    if (this.props.children && !nextProps.children) {\r\n      this.unmountContainer();\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.destroyContainer();\r\n  }\r\n\r\n  public render() {\r\n    return <RenderInnerContainer {...this.props} domContainer={this.domContainer} rootId={this.rootId} />;\r\n  }\r\n\r\n  private createContainer() {\r\n    if (!document || !document.body) {\r\n      throw Error('There is no \"body\" in \"document\"');\r\n    }\r\n\r\n    if (!this.domContainer) {\r\n      const domContainer = document.createElement('div');\r\n      domContainer.setAttribute('class', 'react-ui');\r\n      domContainer.setAttribute('data-rendered-container-id', `${this.rootId}`);\r\n      this.domContainer = domContainer;\r\n    }\r\n  }\r\n\r\n  private mountContainer() {\r\n    if (!this.domContainer) {\r\n      this.createContainer();\r\n    }\r\n    if (this.domContainer && this.domContainer.parentNode !== document.body) {\r\n      document.body.appendChild(this.domContainer);\r\n      if (window.ReactTesting) {\r\n        window.ReactTesting.addRenderContainer(this.rootId, this);\r\n      }\r\n    }\r\n  }\r\n\r\n  private destroyContainer() {\r\n    if (this.domContainer) {\r\n      this.unmountContainer();\r\n      this.domContainer = null;\r\n    }\r\n  }\r\n\r\n  private unmountContainer() {\r\n    if (this.domContainer && this.domContainer.parentNode) {\r\n      this.domContainer.parentNode.removeChild(this.domContainer);\r\n\r\n      if (window.ReactTesting) {\r\n        window.ReactTesting.removeRenderContainer(this.rootId);\r\n      }\r\n    }\r\n  }\r\n}\r\n"]}