{"version":3,"sources":["Tabs.tsx"],"names":["Tabs","tabs","tabUpdates","on","cb","index","listeners","push","splice","shiftFocus","fromTab","delta","findIndex","x","id","newIndex","Math","max","min","length","tab","tabNode","getNode","htmlNode","React","Component","HTMLElement","focus","notifyUpdate","forEach","switchTab","props","onValueChange","value","getTab","find","addTab","concat","removeTab","filter","render","vertical","width","children","indicatorClassName","jsStyles","root","activeTab","__KONTUR_REACT_UI__","propTypes","PropTypes","node","string","isRequired","bool","oneOfType","number","func","defaultProps","Tab"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { Indicator } from './Indicator';\r\nimport { jsStyles } from './Tabs.styles';\r\nimport { TabsContext } from './TabsContext';\r\nimport { Tab } from './Tab';\r\n\r\nexport interface TabsProps {\r\n  /**\r\n   * Tab component should be child of Tabs component\r\n   */\r\n  children?: React.ReactNode;\r\n\r\n  /**\r\n   * Classname of indicator\r\n   */\r\n  indicatorClassName?: string;\r\n\r\n  /**\r\n   * Tabs change event\r\n   */\r\n  onValueChange?: (value: string) => void;\r\n\r\n  /**\r\n   * Active tab identifier\r\n   */\r\n  value: string;\r\n\r\n  /**\r\n   * Vertical indicator\r\n   * @default false\r\n   */\r\n  vertical: boolean;\r\n\r\n  /**\r\n   * Width of tabs container\r\n   */\r\n  width?: number | string;\r\n}\r\n\r\n/**\r\n * Tabs wrapper\r\n *\r\n * contains static property `Tab`\r\n */\r\nexport class Tabs extends React.Component<TabsProps> {\r\n  public static __KONTUR_REACT_UI__ = 'Tabs';\r\n\r\n  public static propTypes = {\r\n    children: PropTypes.node,\r\n    indicatorClassName: PropTypes.string,\r\n    value: PropTypes.string.isRequired,\r\n    vertical: PropTypes.bool,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    onValueChange: PropTypes.func,\r\n  };\r\n  public static defaultProps = {\r\n    vertical: false,\r\n  };\r\n\r\n  public static Tab = Tab;\r\n\r\n  private tabs: Array<{\r\n    getNode: () => Tab | null;\r\n    id: string;\r\n  }> = [];\r\n\r\n  private tabUpdates = {\r\n    on: (cb: () => void) => {\r\n      const index = this.listeners.push(cb);\r\n      return () => {\r\n        this.listeners.splice(index, 1);\r\n      };\r\n    },\r\n  };\r\n\r\n  private listeners: Array<() => void> = [];\r\n\r\n  public render(): JSX.Element {\r\n    const { vertical, value, width, children, indicatorClassName } = this.props;\r\n\r\n    return (\r\n      <div className={cn(jsStyles.root(), vertical && jsStyles.vertical())} style={{ width }}>\r\n        <TabsContext.Provider\r\n          value={{\r\n            vertical,\r\n            activeTab: value,\r\n            getTab: this.getTab,\r\n            addTab: this.addTab,\r\n            removeTab: this.removeTab,\r\n            notifyUpdate: this.notifyUpdate,\r\n            shiftFocus: this.shiftFocus,\r\n            switchTab: this.switchTab,\r\n          }}\r\n        >\r\n          {children}\r\n          <Indicator className={indicatorClassName} tabUpdates={this.tabUpdates} vertical={vertical} />\r\n        </TabsContext.Provider>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private shiftFocus = (fromTab: string, delta: number) => {\r\n    const { tabs } = this;\r\n    const index = tabs.findIndex(x => x.id === fromTab);\r\n    const newIndex = Math.max(0, Math.min(index + delta, tabs.length - 1));\r\n    const tab = tabs[newIndex];\r\n\r\n    const tabNode = tab.getNode();\r\n    let htmlNode = null;\r\n    if (tabNode instanceof React.Component) {\r\n      htmlNode = findDOMNode(tabNode);\r\n    }\r\n\r\n    if (htmlNode && htmlNode instanceof HTMLElement && typeof htmlNode.focus === 'function') {\r\n      htmlNode.focus();\r\n    }\r\n  };\r\n\r\n  private notifyUpdate = () => {\r\n    this.listeners.forEach(cb => cb());\r\n  };\r\n\r\n  private switchTab = (id: string) => {\r\n    const { onValueChange, value } = this.props;\r\n    if (id !== value && onValueChange) {\r\n      onValueChange(id);\r\n    }\r\n  };\r\n\r\n  private getTab = (id: string): Tab | null => {\r\n    const { getNode = null } = this.tabs.find(x => x.id === id) || {};\r\n    return getNode && getNode();\r\n  };\r\n\r\n  private addTab = (id: string, getNode: () => any) => {\r\n    this.tabs = this.tabs.concat({ id, getNode });\r\n  };\r\n\r\n  private removeTab = (id: string) => {\r\n    this.tabs = this.tabs.filter(tab => tab.id !== id);\r\n  };\r\n}\r\n"]}