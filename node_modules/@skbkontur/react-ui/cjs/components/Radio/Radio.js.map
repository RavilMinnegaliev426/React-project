{"version":3,"sources":["Radio.tsx"],"names":["Radio","theme","inputEl","React","createRef","_isInRadioGroup","Boolean","context","name","handleChange","e","props","onValueChange","value","onSelect","onChange","handleMouseOver","onMouseOver","handleMouseEnter","onMouseEnter","handleMouseLeave","onMouseLeave","render","renderMain","focus","current","blur","active","children","disabled","warning","error","focused","pressed","hovered","className","style","rest","radioClassNames","jsStyles","radio","checked","inputProps","type","input","tabIndex","ref","labelProps","root","activeItem","placeholder","renderLabel","labelClassNames","label","labelDisabled","Component","__KONTUR_REACT_UI__","contextTypes","PropTypes","any","func","string","bool","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { Override } from '../../typings/utility-types';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './Radio.styles';\r\n\r\nexport type RadioProps<T> = Override<\r\n  React.InputHTMLAttributes<HTMLInputElement>,\r\n  {\r\n    /** Состояние ошибки */\r\n    error?: boolean;\r\n    /** Состояние Предупреждения */\r\n    warning?: boolean;\r\n    /** Состояние фокуса */\r\n    focused?: boolean;\r\n    /** Состояние нажатия */\r\n    pressed?: boolean;\r\n    /** Состояние hover */\r\n    hovered?: boolean;\r\n    /** Состояние active */\r\n    active?: boolean;\r\n    /** Вызывается при изменении `value` */\r\n    onValueChange?: (value: T) => void;\r\n    onMouseEnter?: React.MouseEventHandler<HTMLLabelElement>;\r\n    onMouseLeave?: React.MouseEventHandler<HTMLLabelElement>;\r\n    onMouseOver?: React.MouseEventHandler<HTMLLabelElement>;\r\n    /** Значение */\r\n    value: T;\r\n  }\r\n>;\r\n\r\nexport class Radio<T> extends React.Component<RadioProps<T>> {\r\n  public static __KONTUR_REACT_UI__ = 'Radio';\r\n\r\n  public static contextTypes = {\r\n    activeItem: PropTypes.any,\r\n    onSelect: PropTypes.func,\r\n    name: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    warning: PropTypes.bool,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    focused: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private inputEl = React.createRef<HTMLInputElement>();\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus() {\r\n    this.inputEl.current?.focus();\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur() {\r\n    this.inputEl.current?.blur();\r\n  }\r\n\r\n  public renderMain() {\r\n    const {\r\n      active,\r\n      children,\r\n      disabled = this.context.disabled,\r\n      warning = this.context.warning,\r\n      error = this.context.error,\r\n      focused,\r\n      pressed,\r\n      hovered,\r\n      onMouseOver,\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n      onValueChange,\r\n\r\n      className,\r\n      style,\r\n\r\n      ...rest\r\n    } = this.props;\r\n\r\n    let radioClassNames = cn({\r\n      [jsStyles.radio(this.theme)]: true,\r\n      [jsStyles.checked(this.theme)]: this.props.checked,\r\n      [jsStyles.focus(this.theme)]: this.props.focused,\r\n      [jsStyles.error(this.theme)]: error,\r\n      [jsStyles.warning(this.theme)]: warning,\r\n      [jsStyles.disabled(this.theme)]: disabled,\r\n    });\r\n\r\n    let value: string | number | undefined;\r\n    if (typeof this.props.value === 'string' || typeof this.props.value === 'number') {\r\n      value = this.props.value;\r\n    }\r\n\r\n    const inputProps = {\r\n      ...rest,\r\n      type: 'radio',\r\n      className: jsStyles.input(),\r\n      disabled,\r\n      tabIndex: this.props.tabIndex,\r\n      value,\r\n      ref: this.inputEl,\r\n      onChange: this.handleChange,\r\n    };\r\n\r\n    const labelProps = {\r\n      className: jsStyles.root(),\r\n      onMouseOver: this.handleMouseOver,\r\n      onMouseEnter: this.handleMouseEnter,\r\n      onMouseLeave: this.handleMouseLeave,\r\n    };\r\n\r\n    if (this._isInRadioGroup()) {\r\n      const checked = this.props.value === this.context.activeItem;\r\n      inputProps.checked = checked;\r\n      inputProps.name = this.context.name;\r\n      radioClassNames = cn(radioClassNames, checked && jsStyles.checked(this.theme));\r\n    }\r\n\r\n    return (\r\n      <label {...labelProps}>\r\n        <input {...inputProps} />\r\n        <span className={radioClassNames}>\r\n          <span className={jsStyles.placeholder()} />\r\n        </span>\r\n        {this.props.children && this.renderLabel()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private _isInRadioGroup = () => Boolean(this.context.name);\r\n\r\n  private renderLabel() {\r\n    const labelClassNames = cn({\r\n      [jsStyles.label(this.theme)]: true,\r\n      [jsStyles.labelDisabled()]: !!(this.props.disabled || this.context.disabled),\r\n    });\r\n\r\n    return <div className={labelClassNames}>{this.props.children}</div>;\r\n  }\r\n\r\n  private handleChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.props.onValueChange?.(this.props.value);\r\n\r\n    if (this._isInRadioGroup()) {\r\n      this.context.onSelect(this.props.value);\r\n    }\r\n\r\n    this.props.onChange?.(e);\r\n  };\r\n\r\n  private handleMouseOver: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseOver?.(e);\r\n  };\r\n\r\n  private handleMouseEnter: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseEnter?.(e);\r\n  };\r\n\r\n  private handleMouseLeave: React.MouseEventHandler<HTMLLabelElement> = e => {\r\n    this.props.onMouseLeave?.(e);\r\n  };\r\n}\r\n"]}