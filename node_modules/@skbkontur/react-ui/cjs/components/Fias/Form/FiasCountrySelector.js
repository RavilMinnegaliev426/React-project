"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.FiasCountrySelector = void 0;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _inheritsLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _react = _interopRequireDefault(require("react"));

var _locale = require("../locale");
var _FiasAddress = require("../models/FiasAddress");

var _decorators = require("../../../lib/locale/decorators");

var _FiasComboBox = require("./FiasComboBox");var _dec, _class, _temp;var









FiasCountrySelector = (_dec = (0, _decorators.locale)('Fias', _locale.FiasLocaleHelper), _dec(_class = (_temp = /*#__PURE__*/function (_React$Component) {(0, _inheritsLoose2.default)(FiasCountrySelector, _React$Component);function FiasCountrySelector() {var _this;for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {args[_key] = arguments[_key];}_this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;_this.
    locale = void 0;_this.























    createItemsSource = /*#__PURE__*/function () {var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(prefix) {var _this$props, api, limit;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:_this$props =
                _this.props, api = _this$props.api, limit = _this$props.limit;return _context.abrupt("return",
                api.searchCountry({ prefix: prefix, limit: limit }).then(function (result) {var
                  success = result.success,data = result.data,error = result.error;
                  return success && data ?
                  Promise.resolve(
                  data.map(function (country) {
                    return new _FiasAddress.FiasAddress({ country: country });
                  })) :

                  Promise.reject(error);
                }));case 2:case "end":return _context.stop();}}}, _callee);}));return function (_x) {return _ref.apply(this, arguments);};}();_this.


    renderItem = function (address) {var
      country = address.country;
      return country && country.fullName || '';
    };_this.

    renderValue = function (address) {var
      country = address.country;
      return country && country.fullName || '';
    };_this.

    renderNotFound = function () {
      return _this.locale.searchNotFound;
    };_this.

    valueToString = function (address) {var
      country = address.country;
      return country && country.fullName || '';
    };_this.

    handleValueChange = function (value) {var
      onValueChange = _this.props.onValueChange;
      if (onValueChange) {
        onValueChange(value.country);
      }
    };_this.

    onUnexpectedInput = function (query) {
      if (!query) {
        return new _FiasAddress.FiasAddress();
      }
    };return _this;}var _proto = FiasCountrySelector.prototype;_proto.render = function render() {var _this$props2 = this.props,country = _this$props2.country,limit = _this$props2.limit;var address = new _FiasAddress.FiasAddress({ country: country });return _react.default.createElement(_FiasComboBox.FiasComboBox, { getItems: this.createItemsSource, value: address, renderItem: this.renderItem, renderValue: this.renderValue, valueToString: this.valueToString, onValueChange: this.handleValueChange, onUnexpectedInput: this.onUnexpectedInput, renderNotFound: this.renderNotFound, placeholder: this.locale.countryPlaceholder, width: '100%', drawArrow: false, searchOnFocus: false, limit: limit });};return FiasCountrySelector;}(_react.default.Component), _temp)) || _class);exports.FiasCountrySelector = FiasCountrySelector;