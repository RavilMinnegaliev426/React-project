{"version":3,"sources":["FiasCountrySelector.tsx"],"names":["FiasCountrySelector","FiasLocaleHelper","locale","createItemsSource","prefix","props","api","limit","searchCountry","then","result","success","data","error","Promise","resolve","map","country","FiasAddress","reject","renderItem","address","fullName","renderValue","renderNotFound","searchNotFound","valueToString","handleValueChange","value","onValueChange","onUnexpectedInput","query","render","countryPlaceholder","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport { FiasLocale, FiasLocaleHelper } from '../locale';\r\nimport { FiasAddress } from '../models/FiasAddress';\r\nimport { FiasCountry, FiasAPIProvider } from '../types';\r\nimport { locale } from '../../../lib/locale/decorators';\r\n\r\nimport { FiasComboBox } from './FiasComboBox';\r\n\r\nexport interface FiasCountrySelectorProps {\r\n  api: FiasAPIProvider;\r\n  country?: FiasCountry;\r\n  onValueChange?: (value?: FiasCountry) => void;\r\n  limit?: number;\r\n}\r\n\r\n@locale('Fias', FiasLocaleHelper)\r\nexport class FiasCountrySelector extends React.Component<FiasCountrySelectorProps> {\r\n  private readonly locale!: FiasLocale;\r\n\r\n  public render() {\r\n    const { country, limit } = this.props;\r\n    const address = new FiasAddress({ country });\r\n    return (\r\n      <FiasComboBox\r\n        getItems={this.createItemsSource}\r\n        value={address}\r\n        renderItem={this.renderItem}\r\n        renderValue={this.renderValue}\r\n        valueToString={this.valueToString}\r\n        onValueChange={this.handleValueChange}\r\n        onUnexpectedInput={this.onUnexpectedInput}\r\n        renderNotFound={this.renderNotFound}\r\n        placeholder={this.locale.countryPlaceholder}\r\n        width={'100%'}\r\n        drawArrow={false}\r\n        searchOnFocus={false}\r\n        limit={limit}\r\n      />\r\n    );\r\n  }\r\n\r\n  private createItemsSource = async (prefix: string) => {\r\n    const { api, limit } = this.props;\r\n    return api.searchCountry({ prefix, limit }).then(result => {\r\n      const { success, data, error } = result;\r\n      return success && data\r\n        ? Promise.resolve(\r\n            data.map((country: FiasCountry) => {\r\n              return new FiasAddress({ country });\r\n            }),\r\n          )\r\n        : Promise.reject(error);\r\n    });\r\n  };\r\n\r\n  private renderItem = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private renderValue = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private renderNotFound = (): React.ReactNode => {\r\n    return this.locale.searchNotFound;\r\n  };\r\n\r\n  private valueToString = (address: FiasAddress): string => {\r\n    const { country } = address;\r\n    return (country && country.fullName) || '';\r\n  };\r\n\r\n  private handleValueChange = (value: FiasAddress) => {\r\n    const { onValueChange } = this.props;\r\n    if (onValueChange) {\r\n      onValueChange(value.country);\r\n    }\r\n  };\r\n\r\n  private onUnexpectedInput = (query: string) => {\r\n    if (!query) {\r\n      return new FiasAddress();\r\n    }\r\n  };\r\n}\r\n"]}