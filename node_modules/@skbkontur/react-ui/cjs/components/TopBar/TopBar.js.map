{"version":3,"sources":["TopBar.tsx"],"names":["TopBar","props","theme","render","renderMain","children","leftItems","cabinetUrl","maxWidth","noShadow","noMargin","userName","onLogout","rightItems","defaultProps","_rightItems","push","logoProps","suffix","color","href","logoHref","logoComponent","withWidget","noWidget","jsStyles","root","center","containerWrap","container","startItems","_renderItems","endItems","items","map","item","i","key","React","cloneElement","Component","__KONTUR_REACT_UI__","Divider","TopBarDivider","Item","TopBarButtonItem","Dropdown","TopBarDropdown","OrganizationsDropdown","TopBarOrganizations","Start","TopBarStart","End","TopBarEnd","ItemStatic","TopBarItem","User","TopBarUser","Logout","TopBarLogout","propTypes","PropTypes","string","node","arrayOf","element","any","oneOfType","number","bool","func"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\nimport cn from 'classnames';\r\n\r\nimport { Logotype } from '../Logotype';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { TopBarButtonItem } from './TopBarButtonItem';\r\nimport { TopBarDivider } from './TopBarDivider';\r\nimport { TopBarItem } from './TopBarItem';\r\nimport { TopBarOrganizations } from './TopBarOrganizations';\r\nimport { TopBarDropdown } from './TopBarDropdown';\r\nimport { TopBarUser } from './TopBarUser';\r\nimport { TopBarEnd } from './TopBarEnd';\r\nimport { TopBarStart } from './TopBarStart';\r\nimport { TopBarLogout } from './TopBarLogout';\r\nimport { jsStyles } from './TopBar.styles';\r\n\r\nexport interface TopBarProps {\r\n  children?: React.ReactNode;\r\n  color?: string;\r\n  cabinetUrl?: string;\r\n  leftItems?: Array<React.ReactElement<any>>;\r\n  logoComponent?: React.ComponentType<any> | string;\r\n  logoHref?: string;\r\n  maxWidth?: string | number;\r\n  noMargin?: boolean;\r\n  noShadow?: boolean;\r\n  noWidget?: boolean;\r\n  onLogout?: () => void;\r\n  rightItems?: Array<React.ReactElement<any>>;\r\n  suffix?: string;\r\n  userName?: string;\r\n}\r\n\r\nexport interface TopBarDefaultProps {\r\n  maxWidth: string | number;\r\n  rightItems: Array<React.ReactElement<any>>;\r\n}\r\n\r\n/**\r\n * __DRAFT__\r\n *\r\n * Шапка\r\n *\r\n * `Item({children: node, iconOnly: bool, onClick: func})` – кликабельный элемент шапки\r\n *\r\n * `Divider()` – разделитель\r\n *\r\n * `TopBarStart({children: node})` – контейнер для элементов в начале шапки\r\n *\r\n * `TopBarEnd({children: node})` – контейнер для элементов в конце шапки\r\n *\r\n * `Logout({children?: node})` – обёртка над `Item`. По умолчанию выводит локализованный текст\r\n *\r\n */\r\n\r\n/**\r\n * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n */\r\nexport class TopBar extends React.Component<TopBarProps> {\r\n  public static __KONTUR_REACT_UI__ = 'TopBar';\r\n\r\n  public static Divider = TopBarDivider;\r\n  public static Item = TopBarButtonItem;\r\n  public static Dropdown = TopBarDropdown;\r\n  public static OrganizationsDropdown = TopBarOrganizations;\r\n  public static Start = TopBarStart;\r\n  public static End = TopBarEnd;\r\n  public static ItemStatic = TopBarItem;\r\n  public static User = TopBarUser;\r\n  public static Logout = TopBarLogout;\r\n\r\n  public static defaultProps: TopBarDefaultProps = {\r\n    maxWidth: 1166,\r\n    rightItems: [],\r\n  };\r\n\r\n  public static propTypes = {\r\n    /**\r\n     * URL для кастомизации ссылок в меню пользователя\r\n     */\r\n    cabinetUrl: PropTypes.string,\r\n\r\n    children: PropTypes.node,\r\n\r\n    /**\r\n     * Цвет логотипа\r\n     */\r\n    color: PropTypes.string,\r\n\r\n    leftItems: PropTypes.arrayOf(PropTypes.element),\r\n\r\n    /**\r\n     * Компонент используемый для рендеринга ссылки.\r\n     * Нужно переопределить если вы хотите подставить ссылку для роутера\r\n     */\r\n    logoComponent: PropTypes.any,\r\n\r\n    logoHref: PropTypes.string,\r\n\r\n    /**\r\n     * Максимальная ширина контейнера в шапке\r\n     */\r\n    maxWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\r\n    /**\r\n     * Отключает отступ снизу\r\n     */\r\n    noMargin: PropTypes.bool,\r\n\r\n    /**\r\n     * Отключает тень\r\n     */\r\n    noShadow: PropTypes.bool,\r\n\r\n    /**\r\n     * Отключает виджет\r\n     */\r\n    noWidget: PropTypes.bool,\r\n\r\n    rightItems: PropTypes.arrayOf(PropTypes.element),\r\n\r\n    /**\r\n     * Суффикс логотипа\r\n     */\r\n    suffix: PropTypes.string,\r\n\r\n    /**\r\n     * Имя пользователя\r\n     */\r\n    userName: PropTypes.node,\r\n\r\n    /**\r\n     * Функция выхода\r\n     */\r\n    onLogout: PropTypes.func,\r\n  };\r\n\r\n  private theme!: Theme;\r\n\r\n  public constructor(props: TopBarProps) {\r\n    super(props);\r\n    warning(\r\n      false,\r\n      `TopBar has been deprecated, use TopBar from @skbkontur/react-ui-addons instead, see [migration](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)`,\r\n    );\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const {\r\n      children,\r\n      leftItems,\r\n      cabinetUrl,\r\n      maxWidth,\r\n      noShadow,\r\n      noMargin,\r\n      userName,\r\n      onLogout,\r\n      rightItems = TopBar.defaultProps.rightItems,\r\n    } = this.props;\r\n\r\n    const _rightItems: Array<React.ReactElement<any>> = [...rightItems];\r\n\r\n    if (userName) {\r\n      _rightItems.push(<TopBarUser userName={userName} cabinetUrl={cabinetUrl} />, <TopBarDivider />);\r\n    }\r\n\r\n    if (onLogout) {\r\n      _rightItems.push(<TopBarLogout onClick={onLogout} />);\r\n    }\r\n\r\n    const logoProps = {\r\n      suffix: this.props.suffix,\r\n      color: this.props.color,\r\n      href: this.props.logoHref,\r\n      logoComponent: this.props.logoComponent,\r\n      withWidget: !this.props.noWidget,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className={cn({\r\n          [jsStyles.root(this.theme)]: true,\r\n          [jsStyles.noShadow()]: !!noShadow,\r\n          [jsStyles.noMargin()]: !!noMargin,\r\n        })}\r\n      >\r\n        <div className={jsStyles.center()} style={{ maxWidth }}>\r\n          <div className={jsStyles.containerWrap()}>\r\n            {children ? (\r\n              <div className={jsStyles.container()}>{children}</div>\r\n            ) : (\r\n              <div className={jsStyles.container()}>\r\n                <div className={jsStyles.startItems()}>\r\n                  <TopBarItem>\r\n                    <Logotype {...logoProps} />\r\n                  </TopBarItem>\r\n                  {this._renderItems(leftItems)}\r\n                </div>\r\n                <div className={jsStyles.endItems()}>{this._renderItems(_rightItems)}</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _renderItems(items?: Array<React.ReactElement<any>>) {\r\n    if (!items) {\r\n      return null;\r\n    }\r\n\r\n    return items.map((item, i) => {\r\n      if (item && !item.key) {\r\n        return React.cloneElement(item, {\r\n          key: '$topbar_' + i,\r\n        });\r\n      }\r\n      return item;\r\n    });\r\n  }\r\n}\r\n"]}