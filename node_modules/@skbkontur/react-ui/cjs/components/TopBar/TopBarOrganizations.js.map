{"version":3,"sources":["TopBarOrganizations.tsx"],"names":["TopBarOrganizations","state","captionWhiteSpace","minWidth","_caption","_comment","_getCaptionRef","element","_getCommentRef","componentDidMount","_recalculateWidth","componentDidUpdate","prevProps","caption","props","render","comment","title","jsStyles","organizationsTitle","paddingRight","offsetWidth","undefined","organizationsComment","organizationsArrow","organizationsTitleDummy","whiteSpace","organizationsCommentDummy","children","commentWidth","setState","React","Component","__KONTUR_REACT_UI__"],"mappings":"iVAAA;;;AAGA;;AAEA;AACA;;;;;;;;;;;AAWA;;;;;;AAMaA,mB;;;AAGJC,IAAAA,K,GAAQ;AACbC,MAAAA,iBAAiB,EAAE,QADN;AAEbC,MAAAA,QAAQ,EAAE,IAFG,E;;;AAKPC,IAAAA,Q;AACAC,IAAAA,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CAC,IAAAA,c,GAAiB,UAACC,OAAD,EAA8B;AACrD,YAAKH,QAAL,GAAgBG,OAAhB;AACD,K;;AAEOC,IAAAA,c,GAAiB,UAACD,OAAD,EAA8B;AACrD,YAAKF,QAAL,GAAgBE,OAAhB;AACD,K,iEAnDME,iB,GAAP,6BAA2B,CACzB,KAAKC,iBAAL,GACD,C,QAEMC,kB,GAAP,4BAA0BC,SAA1B,EAA+D,CAC7D,IAAIA,SAAS,CAACC,OAAV,KAAsB,KAAKC,KAAL,CAAWD,OAArC,EAA8C,CAC5C,KAAKH,iBAAL,GACD,CACF,C,QAEMK,M,GAAP,kBAAgB,mBACe,KAAKD,KADpB,CACND,OADM,eACNA,OADM,CACGG,OADH,eACGA,OADH,CAGd,IAAMC,KAAK,GACT,0CACE,uCACE,SAAS,EAAEC,iBAASC,kBAAT,EADb,EAEE,KAAK,EAAE,EACLC,YAAY,EAAE,KAAKf,QAAL,GAAgB,KAAKA,QAAL,CAAcgB,WAAd,GAA4B,EAA5C,GAAiDC,SAD1D,EAFT,IAME,uCAAM,GAAG,EAAE,KAAKhB,cAAhB,IAAiCO,OAAjC,CANF,EAOGG,OAAO,IACN,uCAAM,SAAS,EAAEE,iBAASK,oBAAT,EAAjB,EAAkD,GAAG,EAAE,KAAKf,cAA5D,IACGQ,OADH,CARJ,EAYE,uCAAM,SAAS,EAAEE,iBAASM,kBAAT,EAAjB,IACE,6BAAC,wBAAD,IAAsB,KAAK,EAAC,MAA5B,EAAmC,IAAI,EAAE,EAAzC,GADF,CAZF,CADF,EAiBE,sCAAK,SAAS,EAAEN,iBAASO,uBAAT,EAAhB,EAAoD,KAAK,EAAE,EAAEC,UAAU,EAAE,KAAKzB,KAAL,CAAWC,iBAAzB,EAA3D,IACE,2CAAOW,OAAP,CADF,EAEGG,OAAO,IAAI,uCAAM,SAAS,EAAEE,iBAASS,yBAAT,EAAjB,IAAwDX,OAAxD,CAFd,CAjBF,CADF,CAyBA,OACE,6BAAC,8BAAD,6BAAoB,KAAKF,KAAzB,IAAgC,KAAK,EAAEG,KAAvC,EAA8C,QAAQ,EAAE,KAAKhB,KAAL,CAAWE,QAAnE,KACG,KAAKW,KAAL,CAAWc,QADd,CADF,CAKD,C;;AAUOlB,EAAAA,iB,GAAR,6BAA4B;AAC1B,QAAMmB,YAAY,GAAG,KAAKxB,QAAL,GAAgB,KAAKA,QAAL,CAAcgB,WAA9B,GAA4C,CAAjE;AACA,QAAI,CAAC,KAAKjB,QAAV,EAAoB;AAClB;AACD;AACD;AACA;AACA,QAAI,KAAKA,QAAL,CAAciB,WAAd,GAA4BQ,YAA5B,GAA2C,GAA/C,EAAoD;AAClD,WAAKC,QAAL,CAAc;AACZ5B,QAAAA,iBAAiB,EAAE,QADP;AAEZC,QAAAA,QAAQ,EAAE,GAFE,EAAd;;AAID,KALD,MAKO;AACL,WAAK2B,QAAL,CAAc;AACZ5B,QAAAA,iBAAiB,EAAE,QADP;AAEZC,QAAAA,QAAQ,EAAE,IAFE,EAAd;;AAID;AACF,G,8BAlFsC4B,eAAMC,S,oDAAlChC,mB,CACGiC,mB,GAAsB,qB","sourcesContent":["import React from 'react';\r\n\r\nimport { Nullable } from '../../typings/utility-types';\r\nimport { ArrowChevronDownIcon } from '../../internal/icons/16px';\r\n\r\nimport { TopBarDropdown } from './TopBarDropdown';\r\nimport { jsStyles } from \"./TopBar.styles\";\r\n\r\nexport interface TopBarOrganizationsProps {\r\n  caption: React.ReactNode;\r\n  comment?: Nullable<string>;\r\n}\r\n\r\nexport interface TopBarOrganizationsState {\r\n  captionWhiteSpace: React.CSSProperties['whiteSpace'];\r\n  minWidth: Nullable<number>;\r\n}\r\n/**\r\n * Дропдаун с организациями\r\n *\r\n * @visibleName TopBar.OrganizationsDropdown\r\n */\r\n\r\nexport class TopBarOrganizations extends React.Component<TopBarOrganizationsProps, TopBarOrganizationsState> {\r\n  public static __KONTUR_REACT_UI__ = 'TopBarOrganizations';\r\n\r\n  public state = {\r\n    captionWhiteSpace: 'normal' as React.CSSProperties['whiteSpace'],\r\n    minWidth: null,\r\n  };\r\n\r\n  private _caption: Nullable<HTMLElement>;\r\n  private _comment: Nullable<HTMLElement>;\r\n\r\n  public componentDidMount() {\r\n    this._recalculateWidth();\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: TopBarOrganizationsProps) {\r\n    if (prevProps.caption !== this.props.caption) {\r\n      this._recalculateWidth();\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { caption, comment } = this.props;\r\n\r\n    const title = (\r\n      <div>\r\n        <span\r\n          className={jsStyles.organizationsTitle()}\r\n          style={{\r\n            paddingRight: this._comment ? this._comment.offsetWidth + 30 : undefined,\r\n          }}\r\n        >\r\n          <span ref={this._getCaptionRef}>{caption}</span>\r\n          {comment && (\r\n            <span className={jsStyles.organizationsComment()} ref={this._getCommentRef}>\r\n              {comment}\r\n            </span>\r\n          )}\r\n          <span className={jsStyles.organizationsArrow()}>\r\n            <ArrowChevronDownIcon color=\"#aaa\" size={14} />\r\n          </span>\r\n        </span>\r\n        <div className={jsStyles.organizationsTitleDummy()} style={{ whiteSpace: this.state.captionWhiteSpace }}>\r\n          <span>{caption}</span>\r\n          {comment && <span className={jsStyles.organizationsCommentDummy()}>{comment}</span>}\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <TopBarDropdown {...this.props} label={title} minWidth={this.state.minWidth}>\r\n        {this.props.children}\r\n      </TopBarDropdown>\r\n    );\r\n  }\r\n\r\n  private _getCaptionRef = (element: HTMLSpanElement) => {\r\n    this._caption = element;\r\n  };\r\n\r\n  private _getCommentRef = (element: HTMLSpanElement) => {\r\n    this._comment = element;\r\n  };\r\n\r\n  private _recalculateWidth() {\r\n    const commentWidth = this._comment ? this._comment.offsetWidth : 0;\r\n    if (!this._caption) {\r\n      return;\r\n    }\r\n    // 360 is minWidth from guides. Apply it when content is bigger.\r\n    // 315 is because of 15px left padding and 30px arrow.\r\n    if (this._caption.offsetWidth + commentWidth > 315) {\r\n      this.setState({\r\n        captionWhiteSpace: 'normal',\r\n        minWidth: 360,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        captionWhiteSpace: 'nowrap',\r\n        minWidth: null,\r\n      });\r\n    }\r\n  }\r\n}\r\n"]}