"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.TopBar = void 0;var _inheritsLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _warning = _interopRequireDefault(require("warning"));
var _classnames = _interopRequireDefault(require("classnames"));

var _Logotype = require("../Logotype");
var _ThemeContext = require("../../lib/theming/ThemeContext");


var _TopBarButtonItem = require("./TopBarButtonItem");
var _TopBarDivider = require("./TopBarDivider");
var _TopBarItem = require("./TopBarItem");
var _TopBarOrganizations = require("./TopBarOrganizations");
var _TopBarDropdown = require("./TopBarDropdown");
var _TopBarUser = require("./TopBarUser");
var _TopBarEnd = require("./TopBarEnd");
var _TopBarStart = require("./TopBarStart");
var _TopBarLogout = require("./TopBarLogout");
var _TopBar = require("./TopBar.styles");























/**
                                           * __DRAFT__
                                           *
                                           * Шапка
                                           *
                                           * `Item({children: node, iconOnly: bool, onClick: func})` – кликабельный элемент шапки
                                           *
                                           * `Divider()` – разделитель
                                           *
                                           * `TopBarStart({children: node})` – контейнер для элементов в начале шапки
                                           *
                                           * `TopBarEnd({children: node})` – контейнер для элементов в конце шапки
                                           *
                                           * `Logout({children?: node})` – обёртка над `Item`. По умолчанию выводит локализованный текст
                                           *
                                           */

/**
                                               * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)
                                               */var
TopBar = /*#__PURE__*/function (_React$Component) {(0, _inheritsLoose2.default)(TopBar, _React$Component);
















































































  function TopBar(props) {var _this;
    _this = _React$Component.call(this, props) || this;_this.theme = void 0;
    (0, _warning.default)(
    false, "TopBar has been deprecated, use TopBar from @skbkontur/react-ui-addons instead, see [migration](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)");return _this;


  }var _proto = TopBar.prototype;_proto.

  render = function render() {var _this2 = this;
    return (
      _react.default.createElement(_ThemeContext.ThemeContext.Consumer, null,
      function (theme) {
        _this2.theme = theme;
        return _this2.renderMain();
      }));


  };_proto.

  renderMain = function renderMain() {var _cn;var _this$props =










    this.props,children = _this$props.children,leftItems = _this$props.leftItems,cabinetUrl = _this$props.cabinetUrl,maxWidth = _this$props.maxWidth,noShadow = _this$props.noShadow,noMargin = _this$props.noMargin,userName = _this$props.userName,onLogout = _this$props.onLogout,_this$props$rightItem = _this$props.rightItems,rightItems = _this$props$rightItem === void 0 ? TopBar.defaultProps.rightItems : _this$props$rightItem;

    var _rightItems = [].concat(rightItems);

    if (userName) {
      _rightItems.push(_react.default.createElement(_TopBarUser.TopBarUser, { userName: userName, cabinetUrl: cabinetUrl }), _react.default.createElement(_TopBarDivider.TopBarDivider, null));
    }

    if (onLogout) {
      _rightItems.push(_react.default.createElement(_TopBarLogout.TopBarLogout, { onClick: onLogout }));
    }

    var logoProps = {
      suffix: this.props.suffix,
      color: this.props.color,
      href: this.props.logoHref,
      logoComponent: this.props.logoComponent,
      withWidget: !this.props.noWidget };


    return (
      _react.default.createElement("div", {
        className: (0, _classnames.default)((_cn = {}, _cn[
        _TopBar.jsStyles.root(this.theme)] = true, _cn[
        _TopBar.jsStyles.noShadow()] = !!noShadow, _cn[
        _TopBar.jsStyles.noMargin()] = !!noMargin, _cn)) },


      _react.default.createElement("div", { className: _TopBar.jsStyles.center(), style: { maxWidth: maxWidth } },
      _react.default.createElement("div", { className: _TopBar.jsStyles.containerWrap() },
      children ?
      _react.default.createElement("div", { className: _TopBar.jsStyles.container() }, children) :

      _react.default.createElement("div", { className: _TopBar.jsStyles.container() },
      _react.default.createElement("div", { className: _TopBar.jsStyles.startItems() },
      _react.default.createElement(_TopBarItem.TopBarItem, null,
      _react.default.createElement(_Logotype.Logotype, logoProps)),

      this._renderItems(leftItems)),

      _react.default.createElement("div", { className: _TopBar.jsStyles.endItems() }, this._renderItems(_rightItems)))))));






  };_proto.

  _renderItems = function _renderItems(items) {
    if (!items) {
      return null;
    }

    return items.map(function (item, i) {
      if (item && !item.key) {
        return _react.default.cloneElement(item, {
          key: '$topbar_' + i });

      }
      return item;
    });
  };return TopBar;}(_react.default.Component);exports.TopBar = TopBar;TopBar.__KONTUR_REACT_UI__ = 'TopBar';TopBar.Divider = _TopBarDivider.TopBarDivider;TopBar.Item = _TopBarButtonItem.TopBarButtonItem;TopBar.Dropdown = _TopBarDropdown.TopBarDropdown;TopBar.OrganizationsDropdown = _TopBarOrganizations.TopBarOrganizations;TopBar.Start = _TopBarStart.TopBarStart;TopBar.End = _TopBarEnd.TopBarEnd;TopBar.ItemStatic = _TopBarItem.TopBarItem;TopBar.User = _TopBarUser.TopBarUser;TopBar.Logout = _TopBarLogout.TopBarLogout;TopBar.defaultProps = { maxWidth: 1166, rightItems: [] };TopBar.propTypes = { /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * URL для кастомизации ссылок в меню пользователя
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */cabinetUrl: _propTypes.default.string, children: _propTypes.default.node, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Цвет логотипа
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */color: _propTypes.default.string, leftItems: _propTypes.default.arrayOf(_propTypes.default.element), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             * Компонент используемый для рендеринга ссылки.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             * Нужно переопределить если вы хотите подставить ссылку для роутера
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             */logoComponent: _propTypes.default.any, logoHref: _propTypes.default.string, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Максимальная ширина контейнера в шапке
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */maxWidth: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * Отключает отступ снизу
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */noMargin: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Отключает тень
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */noShadow: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Отключает виджет
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */noWidget: _propTypes.default.bool, rightItems: _propTypes.default.arrayOf(_propTypes.default.element), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Суффикс логотипа
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */suffix: _propTypes.default.string, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Имя пользователя
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */userName: _propTypes.default.node, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * Функция выхода
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 */onLogout: _propTypes.default.func };