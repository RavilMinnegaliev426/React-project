{"version":3,"sources":["Modal.tsx"],"names":["mountedModalsCount","Modal","state","stackPosition","horizontalScroll","theme","stackSubscription","containerNode","mouseDownTarget","mouseUpTarget","requestClose","props","disableClose","onClose","refContainer","center","handleStackChange","stack","setState","indexOf","handleContainerMouseDown","event","target","handleContainerMouseUp","handleContainerClick","ignoreBackgroundClick","currentTarget","handleKeyDown","e","checkHorizontalScrollAppearance","hasScroll","containerClientWidth","clientWidth","containerScrollWidth","scrollWidth","handleResize","LayoutEvents","emit","componentDidMount","ModalStack","add","window","addEventListener","componentWillUnmount","removeEventListener","remove","render","renderMain","hasHeader","hasFooter","hasPanel","React","Children","toArray","children","forEach","child","panel","modalContextProps","noClose","close","additionalPadding","style","containerStyle","width","jsStyles","root","bg","container","centerContainer","alignTop","Boolean","disableFocusLock","closeWrapper","Component","__KONTUR_REACT_UI__","Header","ModalHeader","Body","ModalBody","Footer","ModalFooter","propTypes","propName","componentName","some","Error","defaultProps","isIE11"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport FocusLock from 'react-focus-lock';\r\nimport cn from 'classnames';\r\n\r\nimport { isKeyEscape } from '../../lib/events/keyboard/identifiers';\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { RenderContainer } from '../../internal/RenderContainer';\r\nimport { ZIndex } from '../../internal/ZIndex';\r\nimport { stopPropagation } from '../../lib/events/stopPropagation';\r\nimport { HideBodyVerticalScroll } from '../../internal/HideBodyVerticalScroll';\r\nimport { ModalStack, ModalStackSubscription } from '../../lib/ModalStack';\r\nimport { ResizeDetector } from '../../internal/ResizeDetector';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { isIE11 } from '../../lib/utils';\r\n\r\nimport { ModalContext, ModalContextProps } from './ModalContext';\r\nimport { ModalFooter } from './ModalFooter';\r\nimport { ModalHeader } from './ModalHeader';\r\nimport { isBody, isFooter, isHeader } from './helpers';\r\nimport { ModalBody } from './ModalBody';\r\nimport { ModalClose } from './ModalClose';\r\nimport { jsStyles } from './Modal.styles';\r\n\r\nlet mountedModalsCount = 0;\r\n\r\nexport interface ModalProps {\r\n  /**\r\n   * Отключает событие onClose, также дизейблит кнопку закрытия модалки\r\n   */\r\n  disableClose?: boolean;\r\n\r\n  /**\r\n   * Выравнивание окна по верху страницы.\r\n   */\r\n  alignTop?: boolean;\r\n\r\n  /**\r\n   * Не закрывать окно при клике на фон.\r\n   */\r\n  ignoreBackgroundClick?: boolean;\r\n\r\n  /**\r\n   * Не показывать крестик для закрытия окна.\r\n   */\r\n  noClose?: boolean;\r\n  width?: number | string;\r\n\r\n  /**\r\n   * Вызывается, когда пользователь запросил закрытие окна (нажал на фон, на\r\n   * Escape или на крестик).\r\n   */\r\n  onClose?: () => void;\r\n\r\n  /**\r\n   * Не использовать фокус-лок внутри модалки.\r\n   * По умолчанию true для IE11.\r\n   */\r\n  disableFocusLock?: boolean;\r\n}\r\n\r\nexport interface ModalState {\r\n  stackPosition: number;\r\n  horizontalScroll: boolean;\r\n}\r\n\r\n/**\r\n * Модальное окно\r\n *\r\n * Содержит в себе три компоненты: **Modal.Header**,\r\n * **Modal.Body** и **Modal.Footer**\r\n *\r\n * Для отображения серой плашки в футере в компонент\r\n * **Footer** необходимо передать пропс **panel**\r\n *\r\n * Для отключения прилипания шапки и футера\r\n * в соответствующий компонет нужно передать\r\n * проп **sticky** со значением **false**\r\n * (по-умолчанию прилипание включено)\r\n */\r\nexport class Modal extends React.Component<ModalProps, ModalState> {\r\n  public static __KONTUR_REACT_UI__ = 'Modal';\r\n\r\n  public static Header = ModalHeader;\r\n  public static Body = ModalBody;\r\n  public static Footer = ModalFooter;\r\n\r\n  public static propTypes = {\r\n    children(props: ModalProps, propName: keyof ModalProps, componentName: string) {\r\n      if (\r\n        React.Children.toArray(props[propName]).some(child => !isHeader(child) && !isBody(child) && !isFooter(child))\r\n      ) {\r\n        return new Error(\r\n          `Only 'Header/Body/Footer' components are allowed for '${propName}' prop of '${componentName}' component`,\r\n        );\r\n      }\r\n    },\r\n  };\r\n\r\n  public static defaultProps = { \r\n    // NOTE: в ie нормально не работает\r\n    disableFocusLock: isIE11 \r\n  };\r\n\r\n  public state: ModalState = {\r\n    stackPosition: 0,\r\n    horizontalScroll: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private stackSubscription: ModalStackSubscription | null = null;\r\n  private containerNode: HTMLDivElement | null = null;\r\n  private mouseDownTarget: EventTarget | null = null;\r\n  private mouseUpTarget: EventTarget | null = null;\r\n\r\n  public componentDidMount() {\r\n    this.stackSubscription = ModalStack.add(this, this.handleStackChange);\r\n\r\n    if (mountedModalsCount === 0) {\r\n      window.addEventListener('resize', this.checkHorizontalScrollAppearance);\r\n    }\r\n\r\n    mountedModalsCount++;\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n    this.checkHorizontalScrollAppearance();\r\n\r\n    if (this.containerNode) {\r\n      this.containerNode.addEventListener('scroll', LayoutEvents.emit);\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (--mountedModalsCount === 0) {\r\n      window.removeEventListener('resize', this.checkHorizontalScrollAppearance);\r\n      LayoutEvents.emit();\r\n    }\r\n\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n    if (this.stackSubscription != null) {\r\n      this.stackSubscription.remove();\r\n    }\r\n    ModalStack.remove(this);\r\n\r\n    if (this.containerNode) {\r\n      this.containerNode.removeEventListener('scroll', LayoutEvents.emit);\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    let hasHeader = false;\r\n    let hasFooter = false;\r\n    let hasPanel = false;\r\n\r\n    React.Children.toArray(this.props.children).forEach(child => {\r\n      if (isHeader(child)) {\r\n        hasHeader = true;\r\n      }\r\n      if (isFooter(child)) {\r\n        hasFooter = true;\r\n        if (child.props.panel) {\r\n          hasPanel = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const modalContextProps: ModalContextProps = {\r\n      hasHeader,\r\n      horizontalScroll: this.state.horizontalScroll,\r\n    };\r\n    if (hasHeader && !this.props.noClose) {\r\n      modalContextProps.close = {\r\n        disableClose: this.props.disableClose,\r\n        requestClose: this.requestClose,\r\n      };\r\n    }\r\n    if (!hasFooter) {\r\n      modalContextProps.additionalPadding = true;\r\n    }\r\n    if (hasFooter && hasPanel) {\r\n      modalContextProps.additionalPadding = true;\r\n    }\r\n\r\n    const style: { width?: number | string } = {};\r\n    const containerStyle: { width?: number | string } = {};\r\n\r\n    if (this.props.width) {\r\n      style.width = this.props.width;\r\n    } else {\r\n      containerStyle.width = 'auto';\r\n    }\r\n\r\n    return (\r\n      <RenderContainer>\r\n        <ZIndex priority={'Modal'} className={jsStyles.root()}>\r\n          <HideBodyVerticalScroll />\r\n          {this.state.stackPosition === 0 && <div className={jsStyles.bg(this.theme)} />}\r\n          <div\r\n            ref={this.refContainer}\r\n            className={jsStyles.container()}\r\n            onMouseDown={this.handleContainerMouseDown}\r\n            onMouseUp={this.handleContainerMouseUp}\r\n            onClick={this.handleContainerClick}\r\n            data-tid=\"modal-container\"\r\n          >\r\n            <div\r\n              className={cn({\r\n                [jsStyles.centerContainer(this.theme)]: true,\r\n                [jsStyles.alignTop(this.theme)]: Boolean(this.props.alignTop),\r\n              })}\r\n              style={containerStyle}\r\n              data-tid=\"modal-content\"\r\n            >\r\n              <div className={jsStyles.window(this.theme)} style={style}>\r\n                <ResizeDetector onResize={this.handleResize}>\r\n                  <FocusLock disabled={this.props.disableFocusLock} autoFocus={false}>\r\n                    {!hasHeader && !this.props.noClose ? (\r\n                      <ZIndex priority={'ModalCross'} className={jsStyles.closeWrapper()}>\r\n                        <ModalClose requestClose={this.requestClose} disableClose={this.props.disableClose} />\r\n                      </ZIndex>\r\n                    ) : null}\r\n                    <ModalContext.Provider value={modalContextProps}>{this.props.children}</ModalContext.Provider>\r\n                  </FocusLock>\r\n                </ResizeDetector>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ZIndex>\r\n      </RenderContainer>\r\n    );\r\n  }\r\n\r\n  private requestClose = () => {\r\n    if (this.props.disableClose) {\r\n      return;\r\n    }\r\n    if (this.props.onClose) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  private refContainer = (center: HTMLDivElement | null) => {\r\n    this.containerNode = center;\r\n  };\r\n\r\n  private handleStackChange = (stack: ReadonlyArray<React.Component>) => {\r\n    this.setState({ stackPosition: stack.indexOf(this) });\r\n  };\r\n\r\n  private handleContainerMouseDown = (event: React.MouseEvent) => {\r\n    this.mouseDownTarget = event.target;\r\n  };\r\n\r\n  private handleContainerMouseUp = (event: React.MouseEvent) => {\r\n    this.mouseUpTarget = event.target;\r\n  };\r\n\r\n  private handleContainerClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!this.props.ignoreBackgroundClick) {\r\n      const { target, currentTarget } = event;\r\n      if (target === currentTarget && this.mouseDownTarget === currentTarget && this.mouseUpTarget === currentTarget) {\r\n        this.requestClose();\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleKeyDown = (e: KeyboardEvent) => {\r\n    if (this.state.stackPosition !== 0) {\r\n      return;\r\n    }\r\n    if (isKeyEscape(e)) {\r\n      stopPropagation(e);\r\n      this.requestClose();\r\n    }\r\n  };\r\n\r\n  private checkHorizontalScrollAppearance = () => {\r\n    let hasScroll = false;\r\n\r\n    if (this.containerNode) {\r\n      const containerClientWidth = this.containerNode.clientWidth;\r\n      const containerScrollWidth = this.containerNode.scrollWidth;\r\n      hasScroll = containerClientWidth < containerScrollWidth;\r\n    }\r\n    if (hasScroll && !this.state.horizontalScroll) {\r\n      this.setState({ horizontalScroll: true });\r\n    } else if (this.state.horizontalScroll) {\r\n      this.setState({ horizontalScroll: false });\r\n    }\r\n  };\r\n\r\n  private handleResize = (event: UIEvent) => {\r\n    LayoutEvents.emit();\r\n  };\r\n}\r\n"]}