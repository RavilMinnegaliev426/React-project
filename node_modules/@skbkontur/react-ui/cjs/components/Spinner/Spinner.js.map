{"version":3,"sources":["Spinner.tsx"],"names":["Spinner","SpinnerLocaleHelper","props","theme","locale","renderSpinner","type","dimmed","circleClassName","jsStyles","circleDimmed","circle","renderCaption","caption","captionColor","cloud","render","renderMain","renderSpinnerOld","loading","spinner","inner","hasSvgAnimationSupport","React","Component","__KONTUR_REACT_UI__","propTypes","PropTypes","node","bool","oneOf","Object","keys","types","defaultProps","Types"],"mappings":"mPAAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kC;;;;;;;;;;;;;;;;;;;;AAoBA;;;;;AAKaA,O,WADZ,wBAAO,SAAP,EAAkBC,2BAAlB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCC,mBAAYC,KAAZ,EAAiC;AAC/B,wCAAMA,KAAN,UAD+B,MAHzBC,KAGyB,gBAFhBC,MAEgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCzBC,IAAAA,aAlCyB,GAkCT,UAACC,IAAD,EAAoBC,MAApB,EAAyC;AAC/D,UAAMC,eAAe,GAAGD,MAAM,GAAGE,kBAASC,YAAT,CAAsB,MAAKP,KAA3B,CAAH,GAAuCM,kBAASE,MAAT,CAAgB,MAAKR,KAArB,CAArE;;AAEA,aAAO,6BAAC,wBAAD,IAAa,IAAI,EAAEG,IAAnB,EAAyB,SAAS,EAAEE,eAApC,GAAP;AACD,KAtCgC;;AAwCzBI,IAAAA,aAxCyB,GAwCT,UAACN,IAAD,EAAoBO,OAApB;AACtB,+CAAM,SAAS,EAAE,yBAAGJ,kBAASH,IAAT,GAAH,EAAqBG,kBAASK,YAAT,CAAsB,MAAKX,KAA3B,CAArB,CAAjB,IAA2EU,OAA3E,CADsB,GAxCS,CAE/B,sBAAQ,CAAC,MAAKX,KAAL,CAAWa,KAApB,EAA2B,4CAA3B,EAF+B,aAGhC,C,sCAEMC,M,GAAP,kBAAgB,mBACd,OACE,6BAAC,0BAAD,CAAc,QAAd,QACG,UAAAb,KAAK,EAAI,CACR,MAAI,CAACA,KAAL,GAAaA,KAAb,CACA,OAAO,CAAC,MAAI,CAACD,KAAL,CAAWa,KAAZ,GAAoB,MAAI,CAACE,UAAL,EAApB,GAAwC,MAAI,CAACC,gBAAL,EAA/C,CACD,CAJH,CADF,CAQD,C,QAEOA,gB,GAAR,4BAA2B,CACzB,OAAO,6BAAC,sBAAD,EAAgB,KAAKhB,KAArB,CAAP,CACD,C,QAEOe,U,GAAR,sBAAqB,mBACqC,KAAKf,KAD1C,CACXI,IADW,eACXA,IADW,mCACLO,OADK,CACLA,OADK,oCACK,KAAKT,MAAL,CAAYe,OADjB,uBAC0BZ,MAD1B,eAC0BA,MAD1B,CAGnB,OACE,sCAAK,SAAS,EAAEE,kBAASW,OAAT,EAAhB,IACE,uCAAM,SAAS,EAAEX,kBAASY,KAAT,EAAjB,IACGC,iCAA0B,KAAKjB,aAAL,CAAmBC,IAAnB,EAAyBC,MAAzB,CAD7B,EAEG,CAACe,6BAAD,IAA2B,6BAAC,gCAAD,IAAiB,IAAI,EAAEhB,IAAvB,EAA6B,MAAM,EAAEC,MAArC,GAF9B,CADF,EAKGM,OAAO,IAAI,KAAKD,aAAL,CAAmBN,IAAnB,EAAyBO,OAAzB,CALd,CADF,CASD,C,kBArE0BU,eAAMC,S,WACnBC,mB,GAAsB,S,UAEtBC,S,GAAY,EACxB;;;;k7CAKAb,OAAO,EAAEc,mBAAUC,IANK,EAQxBrB,MAAM,EAAEoB,mBAAUE,IARM,EAUxB;;;;;;w/CAOAvB,IAAI,EAAEqB,mBAAUG,KAAV,CAAgBC,MAAM,CAACC,IAAP,CAAYC,sBAAZ,CAAhB,CAjBkB,EAkBxB;;;;gkDAKAlB,KAAK,EAAEY,mBAAUE,IAvBO,E,UA0BZK,Y,GAA6B,EACzC5B,IAAI,EAAE,QADmC,E,UAI7B6B,K,GAAsBF,sB","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport warning from 'warning';\r\nimport cn from 'classnames';\r\n\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { hasSvgAnimationSupport } from '../../lib/utils';\r\nimport { SpinnerIcon } from '../../internal/icons/SpinnerIcon';\r\nimport { SpinnerOld } from '../../internal/SpinnerOld';\r\n\r\nimport { jsStyles } from './Spinner.styles';\r\nimport { SpinnerFallback, types } from './SpinnerFallback';\r\nimport { SpinnerLocale, SpinnerLocaleHelper } from './locale';\r\n\r\nexport type SpinnerType = 'mini' | 'normal' | 'big';\r\n\r\nexport interface SpinnerProps {\r\n  caption?: React.ReactNode;\r\n  dimmed?: boolean;\r\n  /**\r\n   * Тип спиннера\r\n   * @default normal\r\n   */\r\n  type: SpinnerType;\r\n  /**\r\n   * @deprecated Старое поведение спиннера - облачко при среднем и большом размере - исчезнет в 3.0 поведение пересено в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)\r\n   *\r\n   * @default false\r\n   */\r\n  cloud?: boolean;\r\n}\r\n\r\n/**\r\n * DRAFT - инлайн-лоадер\r\n */\r\n\r\n@locale('Spinner', SpinnerLocaleHelper)\r\nexport class Spinner extends React.Component<SpinnerProps> {\r\n  public static __KONTUR_REACT_UI__ = 'Spinner';\r\n\r\n  public static propTypes = {\r\n    /**\r\n     * Текст рядом с мини-лоадером.\r\n     *\r\n     * 'Загрузка' - значение по-умолчанию\r\n     */\r\n    caption: PropTypes.node,\r\n\r\n    dimmed: PropTypes.bool,\r\n\r\n    /**\r\n     * Тип спиннера: mini, normal, big\r\n     *\r\n     * Значение по-умолчанию - normal\r\n     *\r\n     * Spinner.types - все доступные типы\r\n     */\r\n    type: PropTypes.oneOf(Object.keys(types)),\r\n    /**\r\n     * @deprecated Старое поведение спиннера - облачко при среднем и большом размере\r\n     *\r\n     * @default false - исчезнет в 3.0\r\n     */\r\n    cloud: PropTypes.bool,\r\n  };\r\n\r\n  public static defaultProps: SpinnerProps = {\r\n    type: 'normal',\r\n  };\r\n\r\n  public static Types: typeof types = types;\r\n  private theme!: Theme;\r\n  private readonly locale!: SpinnerLocale;\r\n\r\n  constructor(props: SpinnerProps) {\r\n    super(props);\r\n    warning(!this.props.cloud, 'cloud is deprecated, will removed in 3.0. ');\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return !this.props.cloud ? this.renderMain() : this.renderSpinnerOld();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderSpinnerOld() {\r\n    return <SpinnerOld {...this.props} />;\r\n  }\r\n\r\n  private renderMain() {\r\n    const { type, caption = this.locale.loading, dimmed } = this.props;\r\n\r\n    return (\r\n      <div className={jsStyles.spinner()}>\r\n        <span className={jsStyles.inner()}>\r\n          {hasSvgAnimationSupport && this.renderSpinner(type, dimmed)}\r\n          {!hasSvgAnimationSupport && <SpinnerFallback type={type} dimmed={dimmed} />}\r\n        </span>\r\n        {caption && this.renderCaption(type, caption)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderSpinner = (type: SpinnerType, dimmed?: boolean) => {\r\n    const circleClassName = dimmed ? jsStyles.circleDimmed(this.theme) : jsStyles.circle(this.theme);\r\n\r\n    return <SpinnerIcon size={type} className={circleClassName} />;\r\n  };\r\n\r\n  private renderCaption = (type: SpinnerType, caption: React.ReactNode) => (\r\n    <span className={cn(jsStyles[type](), jsStyles.captionColor(this.theme))}>{caption}</span>\r\n  );\r\n}\r\n"]}