{"version":3,"sources":["TokenInput.tsx"],"names":["TokenInputType","DefaultState","inputValue","autocompleteItems","undefined","activeTokens","inFocus","loading","preventBlur","inputValueWidth","defaultToKey","item","toString","identity","defaultRenderToken","isActive","onClick","onRemove","disabled","TokenInput","TokenInputLocaleHelper","state","locale","theme","input","tokensInputMenu","textHelper","wrapper","hasValueInItems","items","value","includes","some","inputRef","node","tokensInputMenuRef","textHelperRef","wrapperRef","dispatch","action","cb","setState","prevState","handleInputFocus","event","type","props","onFocus","handleInputBlur","isBlurToMenu","preventDefault","focus","process","nextTick","payload","onBlur","menuRef","menu","relatedTarget","document","activeElement","contains","handleWrapperMouseDown","target","isClickOnToken","handleWrapperMouseUp","handleCopy","length","isCursorVisible","tokens","map","token","selectedItems","indexOf","sort","index","valueToString","clipboardData","setData","join","delimiters","handleInputPaste","WithReference","paste","getData","delimiter","stopPropagation","split","valueToItem","filter","newItems","concat","onValueChange","tryGetItems","query","getItems","hideMenuIfEmptyInputValue","autocompleteItemsUnique","LayoutEvents","emit","highlightMenuItem","handleKeyDown","handleInputKeyDown","handleWrapperKeyDown","e","key","newValue","handleAddItem","enter","up","down","blur","moveFocusToLastToken","selectionStart","focusInput","itemsNew","handleWrapperArrows","activeItemIndex","newItemIndex","isLeftEdge","isRightEdge","shiftKey","handleWrapperArrowsWithoutShift","handleWrapperArrowsWithShift","itemNew","handleValueChange","handleRemoveToken","_","filteredActiveTokens","handleTokenClick","ctrlKey","handleChangeInputValue","trimLeft","endsWith","trimRight","onInputValueChange","Combined","highlightItem","renderTokenFields","renderToken","handleIconClick","renderAddButton","showAddItemHint","addButtonComment","addButtonTitle","componentDidMount","updateInputTextWidth","addEventListener","autoFocus","componentDidUpdate","prevProps","isCursorVisibleForState","componentWillUnmount","removeEventListener","render","renderMain","WithoutReference","Error","width","maxMenuHeight","error","warning","placeholder","renderItem","renderNotFound","onMouseEnter","onMouseLeave","showMenu","inputInlineStyles","Math","max","flex","caretColor","labelClassName","jsStyles","label","labelFocused","labelDisabled","inputClassName","inputDisabled","reset","getTextWidth","slice","getMenuRef","React","PureComponent","__KONTUR_REACT_UI__","defaultProps","renderValue","toKey","emptyHandler"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, FocusEvent, FocusEventHandler, KeyboardEvent, MouseEventHandler, ReactNode } from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport isEqual from 'lodash.isequal';\r\nimport cn from 'classnames';\r\n\r\nimport {\r\n  isKeyArrowHorizontal,\r\n  isKeyArrowLeft,\r\n  isKeyArrowRight,\r\n  isKeyArrowUp,\r\n  isKeyArrowVertical,\r\n  isKeyBackspace,\r\n  isKeyDelete,\r\n  isKeyEnter,\r\n  isKeyEscape,\r\n  isShortcutSelectAll,\r\n} from '../../lib/events/keyboard/identifiers';\r\nimport * as LayoutEvents from '../../lib/LayoutEvents';\r\nimport { Menu } from '../../internal/Menu';\r\nimport { Token, TokenProps } from '../Token';\r\nimport { MenuItemState } from '../MenuItem';\r\nimport { emptyHandler } from '../../lib/utils';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\nimport { locale } from '../../lib/locale/decorators';\r\nimport { MenuItem } from '../MenuItem/MenuItem';\r\n\r\nimport { TokenInputLocale, TokenInputLocaleHelper } from './locale';\r\nimport { jsStyles } from './TokenInput.styles';\r\nimport { TokenInputAction, tokenInputReducer } from './TokenInputReducer';\r\nimport { TokenInputMenu } from './TokenInputMenu';\r\nimport { TextWidthHelper } from './TextWidthHelper';\r\n\r\nexport enum TokenInputType {\r\n  WithReference,\r\n  WithoutReference,\r\n  Combined,\r\n}\r\n\r\nexport interface TokenInputProps<T> {\r\n  selectedItems: T[];\r\n  onValueChange: (items: T[]) => void;\r\n  onMouseEnter: MouseEventHandler<HTMLDivElement>;\r\n  onMouseLeave: MouseEventHandler<HTMLDivElement>;\r\n  onFocus: FocusEventHandler<HTMLInputElement>;\r\n  onBlur: FocusEventHandler<HTMLInputElement>;\r\n  autoFocus?: boolean;\r\n  type?: TokenInputType;\r\n  getItems?: (query: string) => Promise<T[]>;\r\n  hideMenuIfEmptyInputValue?: boolean;\r\n  renderItem: (item: T, state: MenuItemState) => React.ReactNode | null;\r\n  renderValue: (item: T) => React.ReactNode;\r\n  /**\r\n   * Функция должна возвращать строковое представление токена\r\n   * @default item => item\r\n   */\r\n  valueToString: (item: T) => string;\r\n  renderNotFound?: () => React.ReactNode;\r\n  valueToItem: (item: string) => T;\r\n  toKey: (item: T) => string | number | undefined;\r\n  placeholder?: string;\r\n  delimiters?: string[];\r\n  error?: boolean;\r\n  warning?: boolean;\r\n  disabled?: boolean;\r\n  width?: string | number;\r\n  maxMenuHeight?: number | string;\r\n  renderToken?: (item: T, props: Partial<TokenProps>) => ReactNode;\r\n  /**\r\n   * Вызывается при изменении текста в поле ввода,\r\n   */\r\n  onInputValueChange?: (value: string) => void;\r\n  /**\r\n   * Функция отрисовки кнопки добавления в выпадающем списке\r\n   */\r\n  renderAddButton?: (query?: string, onAddItem?: () => void) => ReactNode;\r\n}\r\n\r\nexport interface TokenInputState<T> {\r\n  autocompleteItems?: T[];\r\n  activeTokens: T[];\r\n  inFocus?: boolean;\r\n  inputValue: string;\r\n  inputValueWidth: number;\r\n  preventBlur?: boolean;\r\n  loading?: boolean;\r\n}\r\n\r\nexport const DefaultState = {\r\n  inputValue: '',\r\n  autocompleteItems: undefined,\r\n  activeTokens: [],\r\n  inFocus: false,\r\n  loading: false,\r\n  preventBlur: false,\r\n  inputValueWidth: 20,\r\n};\r\n\r\nconst defaultToKey = <T extends any>(item: T): string => item.toString();\r\nconst identity = <T extends any>(item: T): T => item;\r\nconst defaultRenderToken = <T extends any>(item: T, { isActive, onClick, onRemove, disabled }: Partial<TokenProps>) => (\r\n  <Token key={item.toString()} isActive={isActive} onClick={onClick} onRemove={onRemove} disabled={disabled}>\r\n    {item}\r\n  </Token>\r\n);\r\n\r\n@locale('TokenInput', TokenInputLocaleHelper)\r\nexport class TokenInput<T = string> extends React.PureComponent<TokenInputProps<T>, TokenInputState<T>> {\r\n  public static __KONTUR_REACT_UI__ = 'TokenInput';\r\n\r\n  public static defaultProps: Partial<TokenInputProps<any>> = {\r\n    selectedItems: [],\r\n    renderItem: identity,\r\n    renderValue: identity,\r\n    valueToString: identity,\r\n    valueToItem: (item: string) => item,\r\n    toKey: defaultToKey,\r\n    onValueChange: () => void 0,\r\n    width: 250 as string | number,\r\n    onBlur: emptyHandler,\r\n    onFocus: emptyHandler,\r\n    onMouseEnter: emptyHandler,\r\n    onMouseLeave: emptyHandler,\r\n  };\r\n\r\n  public state: TokenInputState<T> = DefaultState;\r\n\r\n  private readonly locale!: TokenInputLocale;\r\n  private theme!: Theme;\r\n  private input: HTMLInputElement | null = null;\r\n  private tokensInputMenu: TokenInputMenu<T> | null = null;\r\n  private textHelper: TextWidthHelper | null = null;\r\n  private wrapper: HTMLLabelElement | null = null;\r\n\r\n  public componentDidMount() {\r\n    this.updateInputTextWidth();\r\n    document.addEventListener('copy', this.handleCopy);\r\n    if (this.props.autoFocus) {\r\n      this.focusInput();\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: TokenInputProps<T>, prevState: TokenInputState<T>) {\r\n    if (prevState.inputValue !== this.state.inputValue) {\r\n      this.updateInputTextWidth();\r\n    }\r\n    if (prevState.activeTokens.length === 0 && this.state.activeTokens.length > 0) {\r\n      this.dispatch({\r\n        type: 'SET_AUTOCOMPLETE_ITEMS',\r\n        payload: undefined,\r\n      });\r\n    }\r\n    if (prevProps.selectedItems.length !== this.props.selectedItems.length) {\r\n      LayoutEvents.emit();\r\n    }\r\n    if (!this.isCursorVisibleForState(prevState) && this.isCursorVisible) {\r\n      this.tryGetItems(this.state.inputValue);\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    document.removeEventListener('copy', this.handleCopy);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    if (this.type !== TokenInputType.WithoutReference && !this.props.getItems) {\r\n      throw Error('Missed getItems for type ' + this.type);\r\n    }\r\n\r\n    const {\r\n      selectedItems,\r\n      width,\r\n      maxMenuHeight,\r\n      error,\r\n      warning,\r\n      disabled,\r\n      placeholder,\r\n      renderItem,\r\n      renderNotFound,\r\n      hideMenuIfEmptyInputValue,\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n    } = this.props;\r\n\r\n    const { activeTokens, inFocus, inputValueWidth, inputValue, autocompleteItems, loading } = this.state;\r\n\r\n    const showMenu =\r\n      this.type !== TokenInputType.WithoutReference &&\r\n      this.isCursorVisible &&\r\n      activeTokens.length === 0 &&\r\n      (inputValue !== '' || !hideMenuIfEmptyInputValue);\r\n\r\n    const inputInlineStyles: React.CSSProperties = {\r\n      // вычисляем ширину чтобы input автоматически перенёсся на следующую строку при необходимости\r\n      width: Math.max(50, inputValueWidth + 7),\r\n      // input растягивается на всю ширину чтобы placeholder не обрезался\r\n      flex: selectedItems && selectedItems.length === 0 ? 1 : undefined,\r\n      // в ie не работает, но альтернативный способ --- дать tabindex для label --- предположительно ещё сложнее\r\n      caretColor: this.isCursorVisible ? undefined : 'transparent',\r\n    };\r\n\r\n    const theme = this.theme;\r\n    const labelClassName = cn(jsStyles.label(theme), {\r\n      [jsStyles.labelFocused(theme)]: !!inFocus,\r\n      [jsStyles.error(theme)]: !!error,\r\n      [jsStyles.warning(theme)]: !!warning,\r\n      [jsStyles.labelDisabled(theme)]: !!disabled,\r\n    });\r\n    const inputClassName = cn(jsStyles.input(theme), {\r\n      [jsStyles.inputDisabled(theme)]: !!disabled,\r\n    });\r\n    return (\r\n      <div onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\r\n        {/* расчёт ширины текста с последующим обновлением ширины input */}\r\n        <TextWidthHelper ref={this.textHelperRef} text={inputValue} />\r\n        <label\r\n          ref={this.wrapperRef}\r\n          style={{ width }}\r\n          className={labelClassName}\r\n          onMouseDown={this.handleWrapperMouseDown}\r\n          onMouseUp={this.handleWrapperMouseUp}\r\n        >\r\n          {this.renderTokenFields()}\r\n          <input\r\n            type=\"text\"\r\n            ref={this.inputRef}\r\n            value={inputValue}\r\n            style={inputInlineStyles}\r\n            autoComplete=\"off\"\r\n            spellCheck={false}\r\n            disabled={disabled}\r\n            className={inputClassName}\r\n            placeholder={selectedItems.length > 0 ? undefined : placeholder}\r\n            onFocus={this.handleInputFocus}\r\n            onBlur={this.handleInputBlur}\r\n            onChange={this.handleChangeInputValue}\r\n            onKeyDown={this.handleKeyDown}\r\n            onPaste={this.handleInputPaste}\r\n          />\r\n          {showMenu && (\r\n            <TokenInputMenu\r\n              ref={this.tokensInputMenuRef}\r\n              items={autocompleteItems}\r\n              loading={loading}\r\n              opened={showMenu}\r\n              maxMenuHeight={maxMenuHeight}\r\n              anchorElement={this.input!}\r\n              renderNotFound={renderNotFound}\r\n              renderItem={renderItem}\r\n              onValueChange={this.handleValueChange}\r\n              renderAddButton={this.renderAddButton}\r\n            />\r\n          )}\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Сбрасывает введенное пользователем значение\r\n   * @public\r\n   */\r\n  public reset() {\r\n    this.dispatch({ type: 'RESET' });\r\n  }\r\n\r\n  private hasValueInItems = (items: T[], value: T) => {\r\n    if (typeof value === 'string') {\r\n      return items.includes(value);\r\n    }\r\n    // todo: как то не очень\r\n    return items.some(item => isEqual(item, value));\r\n  };\r\n\r\n  private get showAddItemHint() {\r\n    const items = this.state.autocompleteItems;\r\n    const value = this.props.valueToItem(this.state.inputValue);\r\n\r\n    if (items && this.hasValueInItems(items, value)) {\r\n      return false;\r\n    }\r\n\r\n    const selectedItems = this.props.selectedItems;\r\n    if (selectedItems && this.hasValueInItems(selectedItems, value)) {\r\n      return false;\r\n    }\r\n\r\n    if (this.type === TokenInputType.Combined && this.state.inputValue !== '') {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  private get type() {\r\n    return this.props.type ? this.props.type : TokenInputType.WithReference;\r\n  }\r\n\r\n  private get delimiters() {\r\n    return this.props.delimiters ? this.props.delimiters : [','];\r\n  }\r\n\r\n  private get menuRef(): Menu | null {\r\n    return this.tokensInputMenu && this.tokensInputMenu.getMenuRef();\r\n  }\r\n\r\n  private get isCursorVisible() {\r\n    return this.isCursorVisibleForState(this.state);\r\n  }\r\n\r\n  private isCursorVisibleForState(state: TokenInputState<T>) {\r\n    return state.inFocus && (state.inputValue !== '' || state.activeTokens.length === 0);\r\n  }\r\n\r\n  private inputRef = (node: HTMLInputElement) => (this.input = node);\r\n  private tokensInputMenuRef = (node: TokenInputMenu<T>) => (this.tokensInputMenu = node);\r\n  private textHelperRef = (node: TextWidthHelper) => (this.textHelper = node);\r\n  private wrapperRef = (node: HTMLLabelElement) => (this.wrapper = node);\r\n\r\n  private dispatch = (action: TokenInputAction, cb?: () => void) => {\r\n    this.setState(prevState => tokenInputReducer(prevState, action), cb);\r\n  };\r\n\r\n  private updateInputTextWidth() {\r\n    if (this.textHelper) {\r\n      const inputValueWidth = this.textHelper.getTextWidth();\r\n      this.dispatch({ type: 'SET_INPUT_VALUE_WIDTH', payload: inputValueWidth }, LayoutEvents.emit);\r\n    }\r\n  }\r\n\r\n  private handleInputFocus = (event: FocusEvent<HTMLInputElement>) => {\r\n    this.dispatch({ type: 'SET_FOCUS_IN' });\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event);\r\n    }\r\n  };\r\n\r\n  private handleInputBlur = (event: FocusEvent<HTMLInputElement>) => {\r\n    if (this.isBlurToMenu(event) || this.state.preventBlur) {\r\n      event.preventDefault();\r\n      // первый focus нужен для предотвращения/уменьшения моргания в других браузерах\r\n      this.input!.focus();\r\n      // в firefox не работает без второго focus\r\n      process.nextTick(() => this.input!.focus());\r\n      this.dispatch({ type: 'SET_PREVENT_BLUR', payload: false });\r\n    } else {\r\n      this.dispatch({ type: 'BLUR' });\r\n    }\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event);\r\n    }\r\n  };\r\n\r\n  private isBlurToMenu = (event: FocusEvent<HTMLElement>) => {\r\n    if (this.menuRef) {\r\n      const menu = findDOMNode(this.menuRef) as HTMLElement | null;\r\n      const relatedTarget = (event.relatedTarget || document.activeElement) as HTMLElement;\r\n      if (menu && menu.contains(relatedTarget)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  private handleWrapperMouseDown = (event: React.MouseEvent<HTMLElement>) => {\r\n    this.dispatch({ type: 'SET_PREVENT_BLUR', payload: true });\r\n    const target = event.target as HTMLElement;\r\n    const isClickOnToken =\r\n      target && this.wrapper!.contains(target) && target !== this.wrapper! && target !== this.input!;\r\n    if (!isClickOnToken) {\r\n      this.dispatch({ type: 'REMOVE_ALL_ACTIVE_TOKENS' });\r\n    }\r\n  };\r\n\r\n  private handleWrapperMouseUp = () => {\r\n    this.dispatch({ type: 'SET_PREVENT_BLUR', payload: false });\r\n  };\r\n\r\n  private handleCopy = (event: any) => {\r\n    if (!this.state.inFocus || this.state.activeTokens.length === 0 || this.isCursorVisible) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n\r\n    // упорядочивание токенов по индексу\r\n    const tokens = this.state.activeTokens\r\n      .map(token => this.props.selectedItems.indexOf(token))\r\n      .sort()\r\n      .map(index => this.props.selectedItems[index])\r\n      .map(item => this.props.valueToString(item));\r\n    event.clipboardData.setData('text/plain', tokens.join(this.delimiters[0]));\r\n  };\r\n\r\n  private handleInputPaste = (event: React.ClipboardEvent<HTMLElement>) => {\r\n    if (this.type === TokenInputType.WithReference || !event.clipboardData) {\r\n      return;\r\n    }\r\n    let paste = event.clipboardData.getData('text');\r\n    const delimiters = this.delimiters;\r\n    if (delimiters.some(delimiter => paste.includes(delimiter))) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      for (const delimiter of delimiters) {\r\n        paste = paste.split(delimiter).join(delimiters[0]);\r\n      }\r\n      const tokens = paste.split(delimiters[0]);\r\n      const items = tokens\r\n        .map(token => this.props.valueToItem(token))\r\n        .filter(item => !this.hasValueInItems(this.props.selectedItems, item));\r\n      const newItems = this.props.selectedItems.concat(items);\r\n      this.props.onValueChange(newItems);\r\n    }\r\n  };\r\n\r\n  private tryGetItems = async (query = '') => {\r\n    if (this.props.getItems && (this.state.inputValue !== '' || !this.props.hideMenuIfEmptyInputValue)) {\r\n      this.dispatch({ type: 'SET_LOADING', payload: true });\r\n      const autocompleteItems = await this.props.getItems(query);\r\n      this.dispatch({ type: 'SET_LOADING', payload: false });\r\n\r\n      const autocompleteItemsUnique = autocompleteItems.filter(\r\n        item => !this.hasValueInItems(this.props.selectedItems, item),\r\n      );\r\n      if (query === '' || this.state.inputValue !== '') {\r\n        this.dispatch({ type: 'SET_AUTOCOMPLETE_ITEMS', payload: autocompleteItemsUnique }, () => {\r\n          LayoutEvents.emit();\r\n          this.highlightMenuItem();\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleKeyDown = (event: KeyboardEvent<HTMLInputElement>) => {\r\n    if (this.isCursorVisible) {\r\n      this.handleInputKeyDown(event);\r\n    } else {\r\n      this.handleWrapperKeyDown(event);\r\n    }\r\n  };\r\n\r\n  private handleInputKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    e.stopPropagation();\r\n\r\n    if (this.type !== TokenInputType.WithReference && (isKeyEnter(e) || this.delimiters.includes(e.key))) {\r\n      e.preventDefault();\r\n      const newValue = this.state.inputValue;\r\n      if (newValue !== '') {\r\n        this.handleAddItem();\r\n      }\r\n    }\r\n\r\n    switch (true) {\r\n      case isKeyEnter(e):\r\n        if (this.menuRef) {\r\n          this.menuRef.enter(e);\r\n        }\r\n        break;\r\n      case isKeyArrowVertical(e):\r\n        e.preventDefault();\r\n        if (this.menuRef) {\r\n          if (isKeyArrowUp(e)) {\r\n            this.menuRef.up();\r\n          } else {\r\n            this.menuRef.down();\r\n          }\r\n        }\r\n        break;\r\n      case isKeyEscape(e):\r\n        this.input!.blur();\r\n        break;\r\n      case isKeyBackspace(e):\r\n        this.moveFocusToLastToken();\r\n        break;\r\n      case isKeyArrowLeft(e):\r\n        if (this.input!.selectionStart === 0) {\r\n          this.moveFocusToLastToken();\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  private moveFocusToLastToken() {\r\n    const items = this.props.selectedItems;\r\n    if (this.state.inputValue === '' && items && items.length > 0) {\r\n      this.dispatch({ type: 'SET_ACTIVE_TOKENS', payload: items.slice(-1) });\r\n    }\r\n  }\r\n\r\n  private focusInput = () => {\r\n    process.nextTick(() => this.input!.focus());\r\n  };\r\n\r\n  private handleWrapperKeyDown = (e: KeyboardEvent<HTMLElement>) => {\r\n    switch (true) {\r\n      case isKeyBackspace(e):\r\n      case isKeyDelete(e): {\r\n        const itemsNew = this.props.selectedItems.filter(item => !this.hasValueInItems(this.state.activeTokens, item));\r\n        this.props.onValueChange(itemsNew);\r\n        this.dispatch({ type: 'REMOVE_ALL_ACTIVE_TOKENS' }, () => {\r\n          LayoutEvents.emit();\r\n          this.input!.focus();\r\n        });\r\n        break;\r\n      }\r\n      case isKeyArrowHorizontal(e):\r\n        this.handleWrapperArrows(e);\r\n        break;\r\n      case isKeyEscape(e):\r\n        this.wrapper!.blur();\r\n        break;\r\n      case isShortcutSelectAll(e):\r\n        e.preventDefault();\r\n        this.dispatch({\r\n          type: 'SET_ACTIVE_TOKENS',\r\n          payload: this.props.selectedItems,\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  private handleWrapperArrows = (e: KeyboardEvent<HTMLElement>) => {\r\n    e.preventDefault();\r\n    const activeTokens = this.state.activeTokens;\r\n    const activeItemIndex = this.props.selectedItems.indexOf(activeTokens[0]);\r\n    const newItemIndex = activeItemIndex + (isKeyArrowLeft(e) ? -1 : +1);\r\n    const isLeftEdge = activeItemIndex === 0 && isKeyArrowLeft(e);\r\n    const isRightEdge = activeItemIndex === this.props.selectedItems.length - 1 && isKeyArrowRight(e);\r\n    if (!e.shiftKey && activeTokens.length === 1) {\r\n      this.handleWrapperArrowsWithoutShift(isLeftEdge, isRightEdge, newItemIndex);\r\n    } else {\r\n      this.handleWrapperArrowsWithShift(isLeftEdge, isRightEdge, newItemIndex);\r\n    }\r\n  };\r\n\r\n  private handleWrapperArrowsWithoutShift = (isLeftEdge: boolean, isRightEdge: boolean, newItemIndex: number) => {\r\n    if (isRightEdge) {\r\n      this.dispatch({ type: 'REMOVE_ALL_ACTIVE_TOKENS' }, () => this.input!.focus());\r\n    } else if (!isLeftEdge) {\r\n      this.dispatch({\r\n        type: 'SET_ACTIVE_TOKENS',\r\n        payload: [this.props.selectedItems[newItemIndex]],\r\n      });\r\n    }\r\n  };\r\n\r\n  private handleWrapperArrowsWithShift = (isLeftEdge: boolean, isRightEdge: boolean, newItemIndex: number) => {\r\n    if (!isLeftEdge && !isRightEdge) {\r\n      const itemNew = this.props.selectedItems[newItemIndex];\r\n      const itemsNew = [itemNew, ...this.state.activeTokens.filter(item => !isEqual(item, itemNew))];\r\n      this.dispatch({ type: 'SET_ACTIVE_TOKENS', payload: itemsNew });\r\n    }\r\n  };\r\n\r\n  private handleValueChange = (item: T) => {\r\n    if (this.hasValueInItems(this.props.selectedItems, item)) {\r\n      return;\r\n    }\r\n\r\n    const newItems = this.props.selectedItems.concat([item]);\r\n    this.props.onValueChange(newItems);\r\n\r\n    this.dispatch({ type: 'CLEAR_INPUT' });\r\n    this.tryGetItems();\r\n  };\r\n\r\n  private handleAddItem = () => {\r\n    const item = this.state.inputValue;\r\n    const value = this.props.valueToItem(item);\r\n    if (this.hasValueInItems(this.props.selectedItems, value)) {\r\n      return;\r\n    }\r\n\r\n    const newItems = this.props.selectedItems.concat([value]);\r\n    this.props.onValueChange(newItems);\r\n\r\n    this.dispatch({ type: 'CLEAR_INPUT' });\r\n    this.tryGetItems();\r\n  };\r\n\r\n  private handleRemoveToken = (item: T) => {\r\n    this.props.onValueChange(this.props.selectedItems.filter(_ => !isEqual(_, item)));\r\n    const filteredActiveTokens = this.state.activeTokens.filter(_ => !isEqual(_, item));\r\n\r\n    this.dispatch({ type: 'SET_ACTIVE_TOKENS', payload: filteredActiveTokens });\r\n    if (filteredActiveTokens.length === 0) {\r\n      this.focusInput();\r\n    }\r\n\r\n    this.tryGetItems();\r\n  };\r\n\r\n  private handleTokenClick = (event: React.MouseEvent<HTMLElement>, itemNew: T) => {\r\n    const items = this.state.activeTokens;\r\n    if (event.ctrlKey) {\r\n      const newItems = this.hasValueInItems(this.state.activeTokens, itemNew)\r\n        ? items.filter(item => !isEqual(item, itemNew))\r\n        : [...items, itemNew];\r\n      this.dispatch({ type: 'SET_ACTIVE_TOKENS', payload: newItems });\r\n    } else {\r\n      this.dispatch({ type: 'SET_ACTIVE_TOKENS', payload: [itemNew] });\r\n    }\r\n    this.focusInput();\r\n  };\r\n\r\n  private handleChangeInputValue = (event: ChangeEvent<HTMLInputElement>) => {\r\n    let query = event.target.value.trimLeft();\r\n    if (query.endsWith(' ')) {\r\n      query = query.trimRight() + ' ';\r\n    }\r\n    if (this.state.inputValue !== '' && query === '') {\r\n      this.dispatch({ type: 'SET_AUTOCOMPLETE_ITEMS', payload: undefined });\r\n    }\r\n    this.dispatch({ type: 'UPDATE_QUERY', payload: query }, () => {\r\n      this.tryGetItems(query);\r\n    });\r\n    if (this.props.onInputValueChange) {\r\n      this.props.onInputValueChange(query);\r\n    }\r\n  };\r\n\r\n  private highlightMenuItem = () => {\r\n    if (\r\n      this.menuRef &&\r\n      this.state.autocompleteItems &&\r\n      this.state.autocompleteItems.length > 0 &&\r\n      this.type !== TokenInputType.Combined\r\n    ) {\r\n      this.menuRef.highlightItem(0);\r\n    }\r\n  };\r\n\r\n  private renderTokenFields = () => {\r\n    return this.props.selectedItems.map(this.renderToken);\r\n  };\r\n\r\n  private renderToken = (item: T) => {\r\n    const { renderToken = defaultRenderToken, disabled } = this.props;\r\n\r\n    const isActive = this.state.activeTokens.includes(item);\r\n\r\n    // TODO useCallback\r\n    const handleIconClick: React.MouseEventHandler<HTMLElement> = event => {\r\n      event.stopPropagation();\r\n      this.handleRemoveToken(item);\r\n    };\r\n\r\n    // TODO useCallback\r\n    const handleTokenClick: React.MouseEventHandler<HTMLDivElement> = event => {\r\n      event.stopPropagation();\r\n      this.handleTokenClick(event, item);\r\n    };\r\n\r\n    return renderToken(item, {\r\n      isActive,\r\n      onClick: handleTokenClick,\r\n      onRemove: handleIconClick,\r\n      disabled,\r\n    });\r\n  };\r\n\r\n  private renderAddButton = (value = this.state.inputValue): React.ReactNode | undefined => {\r\n    if (!this.showAddItemHint) {\r\n      return;\r\n    }\r\n\r\n    if (this.props.renderAddButton) {\r\n      return this.props.renderAddButton(value, this.handleAddItem);\r\n    }\r\n\r\n    const { addButtonComment, addButtonTitle } = this.locale;\r\n\r\n    return (\r\n      <MenuItem onClick={this.handleAddItem} comment={addButtonComment} key=\"renderAddButton\">\r\n        {addButtonTitle} {value}\r\n      </MenuItem>\r\n    );\r\n  };\r\n}\r\n"]}