{"version":3,"sources":["Input.tsx"],"names":["Input","state","polyfillPlaceholder","blinking","focused","selectAllId","theme","blinkTimeout","input","selectAll","setSelectionRange","value","length","delaySelectAll","cancelDelayedSelectAll","raf","cancel","cancelBlink","callback","clearTimeout","setState","refInput","element","MaskedInput","handleChange","event","fieldIsEmpty","target","props","onValueChange","onChange","handleFocus","selectAllOnFocus","onFocus","handleKeyDown","e","onKeyDown","isDeleteKey","isKeyBackspace","isKeyDelete","currentTarget","repeat","handleUnexpectedInput","handleKeyPress","onKeyPress","maxLength","handleMaskedValueChange","onUnexpectedInput","blink","handleBlur","onBlur","renderPrefix","prefix","jsStyles","renderSuffix","suffix","componentDidMount","componentWillUnmount","UNSAFE_componentWillReceiveProps","nextProps","focus","blur","offsetWidth","window","setTimeout","start","end","Error","document","activeElement","render","renderMain","onMouseEnter","onMouseLeave","onMouseOver","width","error","warning","leftIcon","rightIcon","borderless","align","type","mask","maskChar","alwaysShowMask","style","className","size","placeholder","disabled","formatChars","rest","labelProps","root","getSizeClassName","focusFallback","isIE11","isEdge","warningFallback","errorFallback","inputProps","textAlign","ref","isMaskVisible","undefined","renderMaskedInput","React","createElement","sideContainer","renderLeftIcon","wrapper","renderPlaceholder","rightContainer","renderRightIcon","renderIcon","icon","Function","useDefaultColor","sizeLarge","sizeLargeFallback","sizeMedium","sizeMediumFallback","sizeSmall","sizeSmallFallback","Boolean","Component","__KONTUR_REACT_UI__","defaultProps"],"mappings":"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","sourcesContent":["import invariant from 'invariant';\r\nimport React from 'react';\r\nimport raf from 'raf';\r\nimport cn from 'classnames';\r\n\r\nimport { isIE11, isEdge } from '../../lib/utils';\r\nimport { isKeyBackspace, isKeyDelete, someKeys } from '../../lib/events/keyboard/identifiers';\r\nimport { polyfillPlaceholder } from '../../lib/polyfillPlaceholder';\r\nimport { Nullable, Override } from '../../typings/utility-types';\r\nimport { MaskedInput } from '../../internal/MaskedInput';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './Input.styles';\r\n\r\nexport type InputSize = 'small' | 'medium' | 'large';\r\nexport type InputAlign = 'left' | 'center' | 'right';\r\nexport type InputType = 'password' | 'text';\r\nexport type InputIconType = React.ReactNode | (() => React.ReactNode);\r\n\r\nexport type InputProps = Override<\r\n  React.InputHTMLAttributes<HTMLInputElement>,\r\n  {\r\n    /**\r\n     * Иконка слева\r\n     * Если `ReactNode` применяются дефолтные стили для иконки\r\n     * Если `() => ReactNode` применяются только стили для позиционирование\r\n     */\r\n    leftIcon?: InputIconType;\r\n    /**\r\n     * Иконка справа\r\n     * Если `ReactNode` применяются дефолтные стили для иконки\r\n     * Если `() => ReactNode` применяются только стили для позиционирование\r\n     */\r\n    rightIcon?: InputIconType;\r\n    /** Состояние ошибки */\r\n    error?: boolean;\r\n    /** Состояние предупреждения */\r\n    warning?: boolean;\r\n    /** Режим прозрачной рамки */\r\n    borderless?: boolean;\r\n    /** Выравнивание текста */\r\n    align?: InputAlign;\r\n    /** Паттерн маски */\r\n    mask?: Nullable<string>;\r\n    /** Символ маски */\r\n    maskChar?: Nullable<string>;\r\n    /**\r\n     * Словарь символов-регулярок для задания маски\r\n     * @default { '9': '[0-9]', 'a': '[A-Za-z]', '*': '[A-Za-z0-9]' }\r\n     */\r\n    formatChars?: Record<string, string>;\r\n    /** Показывать символы маски */\r\n    alwaysShowMask?: boolean;\r\n    /** Размер */\r\n    size?: InputSize;\r\n    /** onValueChange */\r\n    onValueChange?: (value: string) => void;\r\n    /** Вызывается на label */\r\n    onMouseEnter?: React.MouseEventHandler<HTMLLabelElement>;\r\n    /** Вызывается на label */\r\n    onMouseLeave?: React.MouseEventHandler<HTMLLabelElement>;\r\n    /** Вызывается на label */\r\n    onMouseOver?: React.MouseEventHandler<HTMLLabelElement>;\r\n    /** Тип */\r\n    type?: InputType;\r\n    /** Значение */\r\n    value?: string;\r\n    capture?: boolean;\r\n\r\n    /**\r\n     * Префикс\r\n     * `ReactNode` перед значением, но после иконки\r\n     */\r\n    prefix?: React.ReactNode;\r\n    /**\r\n     * Суффикс\r\n     * `ReactNode` после значения, но перед правой иконкой\r\n     */\r\n    suffix?: React.ReactNode;\r\n    /** Выделять введенное значение при фокусе */\r\n    selectAllOnFocus?: boolean;\r\n    /**\r\n     * Обработчик неправильного ввода.\r\n     * По-умолчанию, инпут вспыхивает синим.\r\n     * Если передан - вызывается переданный обработчик,\r\n     * в таком случае вспыхивание можно вызвать\r\n     * публичным методом инстанса `blink()`.\r\n     *\r\n     * @param value значение инпута.\r\n     */\r\n    onUnexpectedInput?: (value: string) => void;\r\n  }\r\n>;\r\n\r\nexport interface InputState {\r\n  blinking: boolean;\r\n  focused: boolean;\r\n  polyfillPlaceholder: boolean;\r\n}\r\n\r\n/**\r\n * Интерфес пропсов наследуется от `React.InputHTMLAttributes<HTMLInputElement>`.\r\n *  Все пропсы кроме перечисленных, `className` и `style` передаются в `<input>`\r\n */\r\nexport class Input extends React.Component<InputProps, InputState> {\r\n  public static __KONTUR_REACT_UI__ = 'Input';\r\n\r\n  public static defaultProps: {\r\n    size: InputSize;\r\n  } = {\r\n    size: 'small',\r\n  };\r\n\r\n  public state: InputState = {\r\n    polyfillPlaceholder: false,\r\n    blinking: false,\r\n    focused: false,\r\n  };\r\n\r\n  private selectAllId: number | null = null;\r\n  private theme!: Theme;\r\n  private blinkTimeout = 0;\r\n  private input: HTMLInputElement | null = null;\r\n\r\n  public componentDidMount() {\r\n    if (polyfillPlaceholder) {\r\n      this.setState({ polyfillPlaceholder: true });\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.blinkTimeout) {\r\n      clearTimeout(this.blinkTimeout);\r\n    }\r\n    this.cancelDelayedSelectAll();\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(nextProps: InputProps) {\r\n    if (polyfillPlaceholder && !nextProps.value) {\r\n      this.setState({ polyfillPlaceholder: true });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus() {\r\n    invariant(this.input, 'Cannot call \"focus\" because Input is not mounted');\r\n    this.input!.focus();\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blur() {\r\n    invariant(this.input, 'Cannot call \"blur\" because Input is not mounted');\r\n    this.input!.blur();\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public blink() {\r\n    if (this.blinkTimeout) {\r\n      this.cancelBlink(() => {\r\n        // trigger reflow to restart animation\r\n        // @see https://css-tricks.com/restart-css-animation/#article-header-id-0\r\n        void (this.input && this.input.offsetWidth);\r\n        this.blink();\r\n      });\r\n      return;\r\n    }\r\n    this.setState({ blinking: true }, () => {\r\n      this.blinkTimeout = window.setTimeout(this.cancelBlink, 150);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public setSelectionRange(start: number, end: number) {\r\n    if (!this.input) {\r\n      throw new Error('Cannot call \"setSelectionRange\" on unmounted Input');\r\n    }\r\n\r\n    if (document.activeElement !== this.input) {\r\n      this.focus();\r\n    }\r\n\r\n    this.input.setSelectionRange(start, end);\r\n  }\r\n\r\n  public get isMaskVisible(): boolean {\r\n    const { mask, alwaysShowMask } = this.props;\r\n    const { focused } = this.state;\r\n    return Boolean(mask && (focused || alwaysShowMask));\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public selectAll = (): void => {\r\n    if (this.input) {\r\n      this.setSelectionRange(0, this.input.value.length);\r\n    }\r\n  };\r\n\r\n  private delaySelectAll = (): number => (this.selectAllId = raf(this.selectAll));\r\n\r\n  private cancelDelayedSelectAll = (): void => {\r\n    if (this.selectAllId) {\r\n      raf.cancel(this.selectAllId);\r\n      this.selectAllId = null;\r\n    }\r\n  };\r\n\r\n  private cancelBlink = (callback?: () => void): void => {\r\n    if (this.blinkTimeout) {\r\n      clearTimeout(this.blinkTimeout);\r\n      this.blinkTimeout = 0;\r\n      if (this.state.blinking) {\r\n        this.setState({ blinking: false }, callback);\r\n        return;\r\n      }\r\n    }\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  private renderMain() {\r\n    const {\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n      onMouseOver,\r\n      onKeyDown,\r\n      onKeyPress,\r\n      onValueChange,\r\n      width,\r\n      error,\r\n      warning,\r\n      leftIcon,\r\n      rightIcon,\r\n      borderless,\r\n      value,\r\n      align,\r\n      type,\r\n      mask,\r\n      maskChar,\r\n      alwaysShowMask,\r\n      style,\r\n      className,\r\n      size,\r\n      placeholder,\r\n      selectAllOnFocus,\r\n      disabled,\r\n      onUnexpectedInput,\r\n      prefix,\r\n      suffix,\r\n      formatChars,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    const { blinking, focused } = this.state;\r\n\r\n    const labelProps = {\r\n      className: cn(jsStyles.root(this.theme), this.getSizeClassName(), {\r\n        [jsStyles.borderless()]: !!borderless,\r\n        [jsStyles.focus(this.theme)]: focused,\r\n        [jsStyles.blink(this.theme)]: !!blinking,\r\n        [jsStyles.warning(this.theme)]: !!warning,\r\n        [jsStyles.error(this.theme)]: !!error,\r\n        [jsStyles.disabled(this.theme)]: !!disabled,\r\n        [jsStyles.focusFallback(this.theme)]: focused && (isIE11 || isEdge),\r\n        [jsStyles.warningFallback(this.theme)]: !!warning && (isIE11 || isEdge),\r\n        [jsStyles.errorFallback(this.theme)]: !!error && (isIE11 || isEdge),\r\n      }),\r\n      style: { width },\r\n      onMouseEnter,\r\n      onMouseLeave,\r\n      onMouseOver,\r\n    };\r\n\r\n    const inputProps = {\r\n      ...rest,\r\n      className: jsStyles.input(this.theme),\r\n      value,\r\n      onChange: this.handleChange,\r\n      onFocus: this.handleFocus,\r\n      onKeyDown: this.handleKeyDown,\r\n      onKeyPress: this.handleKeyPress,\r\n      onBlur: this.handleBlur,\r\n      style: { textAlign: align },\r\n      ref: this.refInput,\r\n      type: 'text',\r\n      placeholder: !this.isMaskVisible && !polyfillPlaceholder ? placeholder : undefined,\r\n      disabled,\r\n    };\r\n\r\n    if (type === 'password') {\r\n      inputProps.type = type;\r\n    }\r\n\r\n    const input = mask ? this.renderMaskedInput(inputProps, mask) : React.createElement('input', inputProps);\r\n\r\n    return (\r\n      <label {...labelProps}>\r\n        <span className={jsStyles.sideContainer()}>\r\n          {this.renderLeftIcon()}\r\n          {this.renderPrefix()}\r\n        </span>\r\n        <span className={jsStyles.wrapper()}>\r\n          {input}\r\n          {this.renderPlaceholder()}\r\n        </span>\r\n        <span className={cn(jsStyles.sideContainer(), jsStyles.rightContainer())}>\r\n          {this.renderSuffix()}\r\n          {this.renderRightIcon()}\r\n        </span>\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private renderMaskedInput(\r\n    inputProps: React.InputHTMLAttributes<HTMLInputElement> & {\r\n      capture?: boolean;\r\n    },\r\n    mask: string,\r\n  ) {\r\n    return (\r\n      <MaskedInput\r\n        {...inputProps}\r\n        mask={mask}\r\n        maskChar={this.props.maskChar === undefined ? '_' : this.props.maskChar}\r\n        alwaysShowMask={this.props.alwaysShowMask}\r\n        formatChars={this.props.formatChars}\r\n        onChange={this.props.onChange}\r\n        onValueChange={this.handleMaskedValueChange}\r\n        onUnexpectedInput={this.handleUnexpectedInput}\r\n      />\r\n    );\r\n  }\r\n\r\n  private renderLeftIcon() {\r\n    return this.renderIcon(this.props.leftIcon, jsStyles.leftIcon());\r\n  }\r\n\r\n  private renderRightIcon() {\r\n    return this.renderIcon(this.props.rightIcon, jsStyles.rightIcon());\r\n  }\r\n\r\n  private renderIcon(icon: InputIconType, className: string) {\r\n    if (!icon) {\r\n      return null;\r\n    }\r\n\r\n    if (icon instanceof Function) {\r\n      return <span className={className}>{icon()}</span>;\r\n    }\r\n\r\n    return (\r\n      <span className={cn(className, jsStyles.useDefaultColor(this.theme), jsStyles.useDefaultColor(this.theme))}>\r\n        {icon}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private renderPlaceholder() {\r\n    let placeholder = null;\r\n\r\n    if (this.state.polyfillPlaceholder && this.props.placeholder && !this.isMaskVisible && !this.props.value) {\r\n      placeholder = (\r\n        <div\r\n          className={cn(jsStyles.placeholder(this.theme), jsStyles.placeholder(this.theme))}\r\n          style={{ textAlign: this.props.align || 'inherit' }}\r\n        >\r\n          {this.props.placeholder}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return placeholder;\r\n  }\r\n\r\n  private getSizeClassName() {\r\n    switch (this.props.size) {\r\n      case 'large':\r\n        return { [jsStyles.sizeLarge(this.theme)]: true, [jsStyles.sizeLargeFallback(this.theme)]: isIE11 || isEdge };\r\n      case 'medium':\r\n        return { [jsStyles.sizeMedium(this.theme)]: true, [jsStyles.sizeMediumFallback(this.theme)]: isIE11 || isEdge };\r\n      case 'small':\r\n      default:\r\n        return { [jsStyles.sizeSmall(this.theme)]: true, [jsStyles.sizeSmallFallback(this.theme)]: isIE11 || isEdge };\r\n    }\r\n  }\r\n\r\n  private refInput = (element: HTMLInputElement | MaskedInput | null) => {\r\n    if (element instanceof MaskedInput) {\r\n      this.input = element.input;\r\n    } else {\r\n      this.input = element;\r\n    }\r\n  };\r\n\r\n  private handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (polyfillPlaceholder) {\r\n      const fieldIsEmpty = event.target.value === '';\r\n      if (this.state.polyfillPlaceholder !== fieldIsEmpty) {\r\n        this.setState({ polyfillPlaceholder: fieldIsEmpty });\r\n      }\r\n    }\r\n\r\n    if (this.props.onValueChange) {\r\n      this.props.onValueChange(event.target.value);\r\n    }\r\n\r\n    if (this.props.onChange) {\r\n      this.props.onChange(event);\r\n    }\r\n  };\r\n\r\n  private handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      focused: true,\r\n    });\r\n\r\n    if (this.props.selectAllOnFocus) {\r\n      // https://github.com/facebook/react/issues/7769\r\n      this.input ? this.selectAll() : this.delaySelectAll();\r\n    }\r\n\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event);\r\n    }\r\n  };\r\n\r\n  private handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (this.props.onKeyDown) {\r\n      this.props.onKeyDown(e);\r\n    }\r\n\r\n    const isDeleteKey = someKeys(isKeyBackspace, isKeyDelete)(e);\r\n\r\n    if (!e.currentTarget.value && isDeleteKey && !e.repeat) {\r\n      this.handleUnexpectedInput();\r\n    }\r\n  };\r\n\r\n  private handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (this.props.onKeyPress) {\r\n      this.props.onKeyPress(event);\r\n    }\r\n\r\n    if (this.props.maxLength === event.currentTarget.value.length) {\r\n      this.handleUnexpectedInput(event.currentTarget.value);\r\n    }\r\n  };\r\n\r\n  private handleMaskedValueChange = (value: string) => {\r\n    if (this.props.onValueChange) {\r\n      this.props.onValueChange(value);\r\n    }\r\n  };\r\n\r\n  private handleUnexpectedInput = (value: string = this.props.value || '') => {\r\n    if (this.props.onUnexpectedInput) {\r\n      this.props.onUnexpectedInput(value);\r\n    } else {\r\n      this.blink();\r\n    }\r\n  };\r\n\r\n  private handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    this.setState({ focused: false });\r\n\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event);\r\n    }\r\n  };\r\n\r\n  private renderPrefix = () => {\r\n    const { prefix } = this.props;\r\n\r\n    if (!prefix) {\r\n      return null;\r\n    }\r\n\r\n    return <span className={jsStyles.prefix(this.theme)}>{prefix}</span>;\r\n  };\r\n\r\n  private renderSuffix = () => {\r\n    const { suffix } = this.props;\r\n\r\n    if (!suffix) {\r\n      return null;\r\n    }\r\n\r\n    return <span className={jsStyles.suffix(this.theme)}>{suffix}</span>;\r\n  };\r\n}\r\n"]}