"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.RadioGroup = void 0;var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));var _inheritsLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _invariant = _interopRequireDefault(require("invariant"));
var _classnames = _interopRequireDefault(require("classnames"));

var _utils = require("../../lib/utils");
var _Radio = require("../Radio");
var _createPropsGetter = require("../../lib/createPropsGetter");

var _FocusTrap = require("../../internal/FocusTrap");

var _RadioGroup = require("./RadioGroup.styles");
var _Prevent = require("./Prevent");var
























RadioGroup = /*#__PURE__*/function (_React$Component) {(0, _inheritsLoose2.default)(RadioGroup, _React$Component);















































































































  function RadioGroup(props) {var _this;
    _this = _React$Component.call(this, props) || this;_this.node = void 0;_this.name = (0, _utils.getRandomID)();_this.getProps = (0, _createPropsGetter.createPropsGetter)(RadioGroup.defaultProps);_this.


























































    getValue = function () {return _this.isControlled() ? _this.props.value : _this.state.activeItem;};_this.

    getName = function () {return _this.props.name || _this.name;};_this.

    isControlled = function () {return _this.props.value != null;};_this.

    handleSelect = function (value) {
      if (!_this.isControlled()) {
        _this.setState({ activeItem: value });
      }
      if (_this.props.onValueChange) {
        _this.props.onValueChange(value);
      }
    };_this.







    renderRadio = function (itemValue, data, index) {var _cn;
      var itemProps = {
        key: typeof itemValue === 'string' || typeof itemValue === 'number' ? itemValue : index,
        className: (0, _classnames.default)((_cn = {}, _cn[
        _RadioGroup.jsStyles.item()] = true, _cn[
        _RadioGroup.jsStyles.itemFirst()] = index === 0, _cn[
        _RadioGroup.jsStyles.itemInline()] = !!_this.props.inline, _cn)) };



      return (
        _react.default.createElement("span", itemProps,
        _react.default.createElement(_Radio.Radio, { value: itemValue }, _this.getProps().renderItem(itemValue, data))));


    };_this.

    ref = function (element) {
      _this.node = element;
    };_this.state = { activeItem: _this.props.defaultValue };return _this;}var _proto = RadioGroup.prototype;_proto.getChildContext = function getChildContext() {return { activeItem: this.getValue(), onSelect: this.handleSelect, name: this.getName(), disabled: this.props.disabled, error: this.props.error, warning: this.props.warning };};_proto.render = function render() {var _this$props = this.props,width = _this$props.width,onMouseLeave = _this$props.onMouseLeave,onMouseOver = _this$props.onMouseOver,onMouseEnter = _this$props.onMouseEnter,onBlur = _this$props.onBlur;var style = { width: width != null ? width : 'auto' };var handlers = { onMouseOver: onMouseOver, onMouseEnter: onMouseEnter, onMouseLeave: onMouseLeave };return _react.default.createElement(_FocusTrap.FocusTrap, { onBlur: onBlur }, _react.default.createElement("span", (0, _extends2.default)({ ref: this.ref, style: style, className: _RadioGroup.jsStyles.root() }, handlers), this.renderChildren()));} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * @public
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */;_proto.focus = function focus() {var node = this.node;if (!node) {return;}var radio = node.querySelector('input[type="radio"]:checked'); // If no checked radios, try get first radio
    if (!radio || radio.disabled) {radio = node.querySelector('input[type="radio"]:not([disabled])');}if (radio) {radio.focus();}};_proto.renderChildren = function renderChildren() {var _this$props2 = this.props,items = _this$props2.items,children = _this$props2.children;(0, _invariant.default)(!items && children || items && !children, 'Either items or children must be passed, not both');return items ? mapItems(this.renderRadio, items) : children;};return RadioGroup;}(_react.default.Component);exports.RadioGroup = RadioGroup;RadioGroup.__KONTUR_REACT_UI__ = 'RadioGroup';RadioGroup.childContextTypes = { error: _propTypes.default.bool, name: _propTypes.default.string, warning: _propTypes.default.bool, disabled: _propTypes.default.bool, activeItem: _propTypes.default.any, onSelect: _propTypes.default.func };RadioGroup.propTypes = { /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Может быть использовано, если не передан параметр `items`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * `children` может содержать любую разметку с компонентами Radio.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Каждому компоненту Radio нужно указать параметр `value`, такого же типа
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * как и параметр `value` самой радиогруппы.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Значения активного элемента сравниваются по строгому равенству `===`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */children: _propTypes.default.node, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Значение по умолчанию. Должно быть одним из значений дочерних радиокнопок
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * или значей из параметра `items`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */defaultValue: _propTypes.default.any, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * Дизейблит все радиокнопки
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         */disabled: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * Переводит все радиокнопки в состоянии ошибки
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */error: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Выравнивает элементы в строку. Не работает с `children`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */inline: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Может быть использовано, если не передан параметр `children`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Массив параметров радиокнопок. Может быть типа `Array<Value>` или
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * `Array<[Value, Data]>`, где тип `Value` — значение радиокнопки, а `Data`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * — значение которое будет использовано вторым параметром в `renderItem`.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Если тип `items: Array<Value>`, то он будет приведен к типу
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * `Array<[Value, Value]>`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */items: _propTypes.default.any, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Аттрибут name для вложенных радиокнопок. Если не указан, то сгенерируется
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * случайное имя по алгоритму
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * [uuid v1](https://github.com/kelektiv/node-uuid#version-1)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */name: _propTypes.default.string, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Метод отрисовки контента радиокнопки. Не работает с `children`.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Принимает два аргумента: `(value: Value, data: Data) => React.Node`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */renderItem: _propTypes.default.func, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Значение радиогруппы. Должно быть одним из значений радиокнопок.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Если не указано, то компонент будет работать, как неконтроллируемый
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */value: _propTypes.default.any, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Переводит все радиокнопки в состоянии предупреждения
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */warning: _propTypes.default.bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Ширина радиогруппы. Не работает с `children`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Обработчик события при переключении радиокнопок.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Имеет тип
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * `(value: Value) => any`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */onValueChange: _propTypes.default.func, onBlur: _propTypes.default.func, onMouseEnter: _propTypes.default.func, onMouseLeave: _propTypes.default.func, onMouseOver: _propTypes.default.func };RadioGroup.defaultProps = { renderItem: renderItem };RadioGroup.Prevent = _Prevent.Prevent;function renderItem(_value, data) {return data;}function mapItems(fn, items) {var result = [];var index = 0;for (var _iterator = items, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {var _ref;if (_isArray) {if (_i >= _iterator.length) break;_ref = _iterator[_i++];} else {_i = _iterator.next();if (_i.done) break;_ref = _i.value;}var entry = _ref;var _normalizeEntry = normalizeEntry(entry),_value2 = _normalizeEntry[0],_data = _normalizeEntry[1];result.push(fn(_value2, _data, index));++index;}return result;}function normalizeEntry(entry) {if (!Array.isArray(entry)) {return [entry, entry];}return entry;}