"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.Logotype = void 0;var _inheritsLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _classnames = _interopRequireDefault(require("classnames"));
var _warning = _interopRequireDefault(require("warning"));

var _stopPropagation = require("../../lib/events/stopPropagation");
var _decorators = require("../../lib/locale/decorators");

var _ThemeContext = require("../../lib/theming/ThemeContext");

var _CloudIcon = require("../../internal/icons/CloudIcon");
var _px = require("../../internal/icons/16px");

var _Logotype = require("./Logotype.styles");
var _ProductWidget = require("./ProductWidget");
var _locale = require("./locale");var _dec, _class, _class2, _temp;

var INITIAL_WIDTH = 25;
var INITIAL_HEIGHT = 18;
var INITIAL_VERTICAL_ALIGN = -1;
var INITIAL_FONT_SIZE = 22;













































/**
                             * @deprecated Контур-специфичный компонент, будет удален в 3.0.0, перенесен в `@skbkontur/react-ui-addons` смотри [миграцию](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)
                             */var

Logotype = (_dec = (0, _decorators.locale)('Logotype', _locale.LogotypeLocaleHelper), _dec(_class = (_temp = _class2 = /*#__PURE__*/function (_React$Component) {(0, _inheritsLoose2.default)(Logotype, _React$Component);




























  function Logotype(props) {var _this;
    _this = _React$Component.call(this, props) || this;_this.theme = void 0;_this.locale = void 0;_this.logoWrapper = null;_this.isWidgetInited = false;_this.
















































































    refLogoWrapper = function (el) {
      if (_this.logoWrapper) {
        _this.logoWrapper.removeEventListener('click', _this.handleNativeLogoClick);
      }

      if (el) {
        el.addEventListener('click', _this.handleNativeLogoClick);
      }

      _this.logoWrapper = el;
    };_this.

    handleNativeLogoClick = function (event) {
      (0, _stopPropagation.stopPropagation)(event);
    };_this.

    initWidget = function () {
      if (!_this.isWidgetInited) {
        _ProductWidget.ProductWidget.init();
        _this.isWidgetInited = true;
      }
    };(0, _warning.default)(false, "Logotype has been deprecated, use Logotype from @skbkontur/react-ui-addons instead, see [migration](https://github.com/skbkontur/retail-ui/blob/master/packages/react-ui/MIGRATION.md)");return _this;}var _proto = Logotype.prototype;_proto.componentDidMount = function componentDidMount() {if (this.props.withWidget) {this.initWidget();}(0, _warning.default)(!this.props.locale, 'locale props is deprecated, use LocaleProvider instead');};_proto.componentDidUpdate = function componentDidUpdate() {if (this.props.withWidget) {this.initWidget();}};_proto.render = function render() {var _this2 = this;return _react.default.createElement(_ThemeContext.ThemeContext.Consumer, null, function (theme) {_this2.theme = theme;return _this2.renderMain();});};_proto.renderMain = function renderMain() {var _cn;var _this$props = this.props,color = _this$props.color,textColor = _this$props.textColor,Component = _this$props.component,suffix = _this$props.suffix,size = _this$props.size,href = _this$props.href,withWidget = _this$props.withWidget,_this$props$locale = _this$props.locale,propLocale = _this$props$locale === void 0 ? this.locale : _this$props$locale,onArrowClick = _this$props.onArrowClick;var dropdownClassName = (0, _classnames.default)((_cn = {}, _cn[_Logotype.jsStyles.dropdown()] = true, _cn[_Logotype.jsStyles.inline()] = !withWidget, _cn));var cloudStyle = { color: color, width: size * (INITIAL_WIDTH / INITIAL_FONT_SIZE), height: size * (INITIAL_HEIGHT / INITIAL_FONT_SIZE), verticalAlign: size * (INITIAL_VERTICAL_ALIGN / INITIAL_FONT_SIZE) };return _react.default.createElement("div", { id: "spwDropdown", className: dropdownClassName }, _react.default.createElement("span", { ref: this.refLogoWrapper, className: _Logotype.jsStyles.widgetWrapper() }, _react.default.createElement(Component, { href: href, tabIndex: "-1", className: _Logotype.jsStyles.root(this.theme), style: { fontSize: size + "px" } }, _react.default.createElement("span", { style: { color: textColor } }, propLocale.prefix), _react.default.createElement("span", { className: _Logotype.jsStyles.cloud(), style: cloudStyle }, _react.default.createElement(_CloudIcon.CloudIcon, null)), _react.default.createElement("span", { style: { color: textColor } }, propLocale.suffix, suffix && '.'), suffix && _react.default.createElement("span", { style: { color: color } }, suffix)), withWidget && _react.default.createElement("span", { className: _Logotype.jsStyles.divider(this.theme) })), withWidget && _react.default.createElement("button", { className: _Logotype.jsStyles.button(), onClick: onArrowClick }, _react.default.createElement(_px.ArrowChevronDownIcon, { color: "#aaa", size: 20 })));};return Logotype;}(_react.default.Component), _class2.__KONTUR_REACT_UI__ = 'Logotype', _class2.propTypes = { color: _propTypes.default.string, href: _propTypes.default.string, suffix: _propTypes.default.string, size: _propTypes.default.number, textColor: _propTypes.default.string, withWidget: _propTypes.default.bool, locale: _propTypes.default.shape({ prefix: _propTypes.default.string, suffix: _propTypes.default.string }) }, _class2.defaultProps = { color: '#D92932', size: INITIAL_FONT_SIZE, textColor: '#333333', component: 'a', href: '/' }, _temp)) || _class);exports.Logotype = Logotype;