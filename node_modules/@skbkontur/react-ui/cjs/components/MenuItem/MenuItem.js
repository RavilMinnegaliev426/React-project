"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.isMenuItem = exports.MenuItem = void 0;var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutPropertiesLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose"));var _inheritsLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _warning = _interopRequireDefault(require("warning"));
var _classnames = _interopRequireDefault(require("classnames"));

var _utils = require("../../lib/utils");
var _ThemeContext = require("../../lib/theming/ThemeContext");


var _MenuItem = require("./MenuItem.styles");






























/**
                                               * Элемент меню.
                                               */var
MenuItem = /*#__PURE__*/function (_React$Component) {(0, _inheritsLoose2.default)(MenuItem, _React$Component);function MenuItem() {var _this;for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {args[_key] = arguments[_key];}_this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;_this.























    theme = void 0;_this.
    mouseEntered = false;_this.

















































































    handleMouseEnterFix = function (e) {
      if (!_this.mouseEntered && _this.props.onMouseEnter) {
        _this.mouseEntered = true;
        _this.props.onMouseEnter(e);
      }
    };_this.

    handleMouseLeave = function (e) {
      _this.mouseEntered = false;
      if (_this.props.onMouseLeave) {
        _this.props.onMouseLeave(e);
      }
    };_this.

    getComponent = function () {var _this$props =
      _this.props,disabled = _this$props.disabled,component = _this$props.component,href = _this$props.href;

      if (disabled) {
        return 'button';
      }

      if (component) {
        return component;
      }

      if (href) {
        return 'a';
      }

      return 'button';
    };return _this;}var _proto = MenuItem.prototype;_proto.render = function render() {var _this2 = this;return _react.default.createElement(_ThemeContext.ThemeContext.Consumer, null, function (theme) {_this2.theme = theme;return _this2.renderMain();});};_proto.renderMain = function renderMain() {var _cn, _cn2;var _this$props2 = this.props,alkoLink = _this$props2.alkoLink,link = _this$props2.link,comment = _this$props2.comment,icon = _this$props2.icon,loose = _this$props2.loose,state = _this$props2.state,children = _this$props2.children,_enableIconPadding = _this$props2._enableIconPadding,component = _this$props2.component,onMouseEnter = _this$props2.onMouseEnter,onMouseLeave = _this$props2.onMouseLeave,rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props2, ["alkoLink", "link", "comment", "icon", "loose", "state", "children", "_enableIconPadding", "component", "onMouseEnter", "onMouseLeave"]);(0, _warning.default)(alkoLink === undefined, "[MenuItem]: Prop 'alkoLink' was deprecated please use 'link' instead");var hover = state === 'hover' && !this.props.disabled;var iconElement = null;if (icon) {iconElement = _react.default.createElement("div", { className: _MenuItem.jsStyles.icon() }, icon);}var className = (0, _classnames.default)((_cn = {}, _cn[_MenuItem.jsStyles.root()] = true, _cn[_MenuItem.jsStyles.loose()] = !!loose, _cn[_MenuItem.jsStyles.hover(this.theme)] = hover, _cn[_MenuItem.jsStyles.selected(this.theme)] = state === 'selected', _cn[_MenuItem.jsStyles.link(this.theme)] = !!link || !!alkoLink, _cn[_MenuItem.jsStyles.withIcon(this.theme)] = Boolean(iconElement) || !!_enableIconPadding, _cn[_MenuItem.jsStyles.disabled(this.theme)] = !!this.props.disabled, _cn));var content = children;if ((0, _utils.isFunction)(children)) {content = children(this.props.state);}var Component = this.getComponent();return _react.default.createElement(Component, (0, _extends2.default)({}, rest, { onMouseOver: this.handleMouseEnterFix, onMouseLeave: this.handleMouseLeave, className: className, tabIndex: -1 }), iconElement, content, this.props.comment && _react.default.createElement("div", { "data-tid": "MenuItem__comment", className: (0, _classnames.default)((_cn2 = {}, _cn2[_MenuItem.jsStyles.comment()] = true, _cn2[_MenuItem.jsStyles.commentHover()] = hover, _cn2)) }, comment));} // https://github.com/facebook/react/issues/10109
  // Mouseenter event not triggered when cursor moves from disabled button
  ;return MenuItem;}(_react.default.Component);exports.MenuItem = MenuItem;MenuItem.__KONTUR_REACT_UI__ = 'MenuItem';MenuItem.__MENU_ITEM__ = true;MenuItem.propTypes = { alkoLink: _propTypes.default.bool, comment: _propTypes.default.node, disabled: _propTypes.default.bool, href: _propTypes.default.string, icon: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.node]), loose: _propTypes.default.bool, state: _propTypes.default.string, target: _propTypes.default.string, onClick: _propTypes.default.func };
var isMenuItem = function isMenuItem(child) {
  return _react.default.isValidElement(child) ?
  Object.prototype.hasOwnProperty.call(child.type, '__MENU_ITEM__') :
  false;
};exports.isMenuItem = isMenuItem;