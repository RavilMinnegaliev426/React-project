{"version":3,"sources":["Toggle.tsx"],"names":["Toggle","props","theme","input","focus","tabListener","isTabPressed","inputRef","element","handleChange","event","onValueChange","target","checked","isUncontrolled","setState","onChange","handleFocus","onFocus","focusByTab","handleBlur","onBlur","state","defaultChecked","componentDidMount","autoFocus","render","renderMain","warning","error","loading","color","disabled","containerClassNames","jsStyles","container","focused","isLoading","isWarning","isError","wrapper","wrapperDisabled","backgroundColor","borderColor","boxShadow","undefined","activeBackground","handle","React","Component","__KONTUR_REACT_UI__","propTypes","PropTypes","bool","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport { tabListener } from '../../lib/events/tabListener';\r\nimport { ThemeContext } from '../../lib/theming/ThemeContext';\r\nimport { Theme } from '../../lib/theming/Theme';\r\n\r\nimport { jsStyles } from './Toggle.styles';\r\n\r\nexport interface ToggleProps {\r\n  checked?: boolean;\r\n  defaultChecked?: boolean;\r\n  disabled?: boolean;\r\n  onValueChange?: (value: boolean) => void;\r\n  onChange?: React.ChangeEventHandler<HTMLInputElement>;\r\n  warning?: boolean;\r\n  error?: boolean;\r\n  loading?: boolean;\r\n  autoFocus?: boolean;\r\n  onFocus?: React.FocusEventHandler<HTMLInputElement>;\r\n  onBlur?: React.FocusEventHandler<HTMLInputElement>;\r\n  color?: React.CSSProperties['color'];\r\n}\r\n\r\nexport interface ToggleState {\r\n  checked?: boolean;\r\n  focusByTab?: boolean;\r\n}\r\n\r\nexport class Toggle extends React.Component<ToggleProps, ToggleState> {\r\n  public static __KONTUR_REACT_UI__ = 'Toggle';\r\n\r\n  public static propTypes = {\r\n    checked: PropTypes.bool,\r\n    defaultChecked: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    loading: PropTypes.bool,\r\n    warning: PropTypes.bool,\r\n    onValueChange: PropTypes.func,\r\n  };\r\n\r\n  public static defaultProps = {\r\n    disabled: false,\r\n    loading: false,\r\n  };\r\n\r\n  private theme!: Theme;\r\n  private input: HTMLInputElement | null = null;\r\n\r\n  constructor(props: ToggleProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      focusByTab: false,\r\n      checked: props.defaultChecked,\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    if (this.props.autoFocus) {\r\n      tabListener.isTabPressed = true;\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   */\r\n  public focus = () => {\r\n    if (this.input) {\r\n      tabListener.isTabPressed = true;\r\n      this.input.focus();\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <ThemeContext.Consumer>\r\n        {theme => {\r\n          this.theme = theme;\r\n          return this.renderMain();\r\n        }}\r\n      </ThemeContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private renderMain() {\r\n    const { warning, error, loading, color } = this.props;\r\n    const disabled = this.props.disabled || loading;\r\n    const checked = this.isUncontrolled() ? this.state.checked : this.props.checked;\r\n\r\n    const containerClassNames = cn(jsStyles.container(this.theme), {\r\n      [jsStyles.focused(this.theme)]: !disabled && !!this.state.focusByTab,\r\n      [jsStyles.isLoading(this.theme)]: !!loading,\r\n      [jsStyles.isWarning(this.theme)]: !color && !!warning,\r\n      [jsStyles.isError(this.theme)]: !color && !!error,\r\n    });\r\n\r\n    return (\r\n      <label\r\n        className={cn(jsStyles.wrapper(this.theme), {\r\n          [jsStyles.wrapperDisabled(this.theme)]: !!disabled,\r\n        })}\r\n      >\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={checked}\r\n          onChange={this.handleChange}\r\n          className={jsStyles.input(this.theme)}\r\n          onFocus={this.handleFocus}\r\n          onBlur={this.handleBlur}\r\n          ref={this.inputRef}\r\n          disabled={disabled}\r\n        />\r\n        <div\r\n          className={containerClassNames}\r\n          style={\r\n            checked && color\r\n              ? {\r\n                  backgroundColor: color,\r\n                  borderColor: color,\r\n                  boxShadow: `inset 0 0 0 1px ${color}`,\r\n                }\r\n              : undefined\r\n          }\r\n        >\r\n          <div\r\n            className={jsStyles.activeBackground()}\r\n            style={checked && color ? { backgroundColor: color } : undefined}\r\n          />\r\n        </div>\r\n        <div className={jsStyles.handle(this.theme)} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private inputRef = (element: HTMLInputElement) => {\r\n    this.input = element;\r\n  };\r\n\r\n  private handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (this.props.onValueChange) {\r\n      this.props.onValueChange(event.target.checked);\r\n    }\r\n\r\n    if (this.isUncontrolled()) {\r\n      this.setState({\r\n        checked: event.target.checked,\r\n      });\r\n    }\r\n\r\n    if (this.props.onChange) {\r\n      this.props.onChange(event);\r\n    }\r\n  };\r\n\r\n  private handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event);\r\n    }\r\n\r\n    if (tabListener.isTabPressed) {\r\n      this.setState({ focusByTab: true });\r\n    }\r\n  };\r\n\r\n  private handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event);\r\n    }\r\n    this.setState({\r\n      focusByTab: false,\r\n    });\r\n  };\r\n\r\n  private isUncontrolled() {\r\n    return this.props.checked === undefined;\r\n  }\r\n}\r\n"]}