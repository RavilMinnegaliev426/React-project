{"version":3,"sources":["memo.ts"],"names":["memo","fn","cache","getHash","args","reduce","acc","x","keysCount","limit","hash","fromCache","result"],"mappings":"2DAAO,SAASA,IAAT,CAAiBC,EAAjB,EAA2B;AAChC,MAAIC,KAA6B,GAAG,EAApC;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD,UAAiBA,IAAI,CAACC,MAAL,CAAY,UAACC,GAAD,EAAMC,CAAN,UAAYD,GAAG,GAAGC,CAAlB,EAAZ,EAAiC,EAAjC,CAAjB,EAAhB;AACA,MAAIC,SAAS,GAAG,CAAhB;AACA,MAAMC,KAAK,GAAG,GAAd;;AAEA;AACA,SAAO,YAAa;AAClB,QAAI,mCADKL,IACL,oDADKA,IACL;AACF,UAAMM,IAAI,GAAGP,OAAO,CAACC,IAAD,CAApB;AACA,UAAMO,SAAS,GAAGT,KAAK,CAACQ,IAAD,CAAvB;AACA,UAAIC,SAAJ,EAAe;AACb,eAAOA,SAAP;AACD;AACD;AACA,UAAMC,MAAM,GAAGX,EAAE,MAAF,SAAMG,IAAN,CAAf;AACAF,MAAAA,KAAK,CAACQ,IAAD,CAAL,GAAcE,MAAd;AACAJ,MAAAA,SAAS;AACT,aAAOI,MAAP;AACD,KAXD,SAWU;AACR,UAAIJ,SAAS,GAAGC,KAAhB,EAAuB;AACrBP,QAAAA,KAAK,GAAG,EAAR;AACAM,QAAAA,SAAS,GAAG,CAAZ;AACD;AACF;AACF,GAlBD;AAmBD","sourcesContent":["export function memo<T>(fn: T): T {\r\n  let cache: { [key: string]: any } = {};\r\n  const getHash = (args: any[]) => args.reduce((acc, x) => acc + x, '');\r\n  let keysCount = 0;\r\n  const limit = 1e4;\r\n\r\n  // @ts-ignore\r\n  return (...args) => {\r\n    try {\r\n      const hash = getHash(args);\r\n      const fromCache = cache[hash];\r\n      if (fromCache) {\r\n        return fromCache;\r\n      }\r\n      // @ts-ignore\r\n      const result = fn(...args);\r\n      cache[hash] = result;\r\n      keysCount++;\r\n      return result;\r\n    } finally {\r\n      if (keysCount > limit) {\r\n        cache = {};\r\n        keysCount = 0;\r\n      }\r\n    }\r\n  };\r\n}\r\n"]}